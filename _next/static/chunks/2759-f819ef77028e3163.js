"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2759],{81973:function(e,t,a){a.d(t,{k:function(){return s.Z}});var s=a(78321)},90343:function(e,t,a){a.d(t,{sp:function(){return BVaultApy},Cw:function(){return BVaultB},Bx:function(){return BVaultCard},O4:function(){return BVaultCardComming},aK:function(){return BVaultP},ge:function(){return BVaultRedeemAll}});var s=a(52628),n=a(35496),l=a(51767),r=a(53333),i=a(4605),o=a(90947),c=a(15493),d=a(66986),u=a(86026),m=a(181),x=a(2360),p=a(95499),h=a(64370),f=a(81973),v=a(83978),b=a.n(v),g=a(38762),j=a(83508),y=a(12485),w=a(93650),k=a(14993),N=a(85665),T=a(20265),S=a(67541),B=a(36602),P=a(51966),A=a(98589),V=a(97130),C=a(49041),q=a(64217),I=a(11292);let bnToNum=e=>b().round(parseFloat((0,I.d)(BigInt(e))),5),logTrans=e=>b().round(Math.log10(90*e+1),5),revertLog=e=>b().round((Math.pow(10,e)-1)/90,5);function BvaultEpochYtPrices(e){let{bvc:t,epochId:a}=e,{data:n}=(0,h.a)({queryKey:["bvualt-epoch-yt-prices",t.vault,a],queryFn:()=>(0,V.l6)(t.vault,a),initialData:[]}),[l,r]=(0,k.Z)(!0),{options:i}=(0,j.useMemo)(()=>{let e=n.map(e=>[(0,c.G$)(1e3*e.time,c.mv.ALL),l?logTrans(bnToNum(e.price)):bnToNum(e.price)]),valueFormater=e=>l?revertLog(e).toString():e.toString(),t={animation:!0,animationDuration:200,tooltip:{trigger:"axis",valueFormatter:valueFormater},grid:{top:30,bottom:30,right:20,show:!1},toolbox:{show:!1},xAxis:{type:"category",boundaryGap:!1,axisLine:{onZero:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1},max:e=>1.1*e.max,axisLabel:{formatter:valueFormater}},dataZoom:[{type:"inside",start:0,end:100,minValueSpan:10},{show:!1}],series:[{name:"YT Price",type:"line",symbol:"none",sampling:"lttb",itemStyle:{color:"rgb(30, 202, 83)"},areaStyle:{origin:"start",color:new q.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(30, 202, 83)"},{offset:1,color:"rgba(30, 202, 83, 0.2)"}])},data:e}]};return{data:e,options:t}},[n,l]);return(0,s.jsxs)("div",{className:"card p-4 mx-auto max-w-4xl w-full min-w-0",children:[(0,s.jsxs)("div",{className:"flex justify-between gap-2 items-center",children:[(0,s.jsx)("span",{className:"text-base font-bold",children:"YT Price Chart"}),(0,s.jsx)("span",{className:"text-xs font-medium dark:text-[#FBECEC]"})]}),(0,s.jsx)("div",{className:"flex gap-2 justify-end items-center mt-2",children:(0,s.jsx)("span",{className:(0,c.cn)("cursor-pointer text-xs px-1 py-0 rounded border-primary border",l?"bg-primary":"bg-transparent"),onClick:()=>r(),children:"LOG"})}),(0,s.jsx)(C.Z,{option:i,style:{height:240}})]})}var F=a(25676),E=a(19671),R=a(64417),Y=a(84633),L=a(16658),U=a(83084),D=a(93063),M=a(31480),K=a(42929),G=a(47259),_=a(43625),z=a(70475);function TupleTxt(e){return(0,s.jsxs)("div",{className:"flex items-center gap-5",children:[(0,s.jsx)("div",{className:"text-xs dark:text-white/60 font-medium",children:e.tit}),(0,s.jsx)("div",{className:(0,c.cn)("text-lg  font-medium flex items-center",e.subClassname),children:e.sub})]})}let W=BigInt(1e16);function BVaultRedeem(e){let{bvc:t}=e,[a,n]=(0,j.useState)(""),r=(0,c.su)(a),i=(0,m.nr)(t.vault),o=(0,m.Vw)(t.vault)[0],d=(0,u.o)(e=>e.sliceTokenStore.balances[t.pToken]||0n,["sliceTokenStore.balances.".concat(t.pToken)]),x=(0,m.R3)(t),p=i.current.duration>0n?"Waiting Time: ~".concat((0,c.Y)((i.current.duration+i.current.startTime)*1000n-BigInt(b().now()))):"";return(0,s.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-1"),children:[(0,s.jsx)(A.W,{asset:t.pTokenSymbol,amount:a,balance:d,setAmount:n}),(0,s.jsxs)("div",{className:"text-xs font-medium text-center",children:[p," ",(0,s.jsx)(U.C,{children:"Wait to claim after the Epoch ends."})]}),(0,s.jsx)(P.v,{className:"mx-auto mt-6",tx:"Request",spender:null==o?void 0:o.redeemPool,approves:{[t.pToken]:r},disabled:o&&r<=0n||r>d,config:{abi:i.closed?l.j5:l.gg,address:i.closed?t.vault:(null==o?void 0:o.redeemPool)||S.DR,functionName:"redeem",args:[r]},onTxSuccess:()=>{n(""),x()}})]})}function BVaultRedeemAll(e){let{bvc:t}=e,a=(0,u.o)(e=>e.sliceTokenStore.balances[t.pToken]||0n,["sliceTokenStore.balances.".concat(t.pToken)]),n=(0,m.R3)(t),{data:r}=(0,B.p)(),{ids:i,claimable:o}=(0,m.gz)(t.vault),{mutate:h,isPending:f}=(0,p.D)({mutationKey:["readeemAll",a,o,i],mutationFn:async()=>{if(!r)throw"Error";let e=(0,d.B)();a>10n&&await r.writeContract({abi:l.j5,address:t.vault,functionName:"redeem",args:[a]}).then(t=>e.waitForTransactionReceipt({hash:t,confirmations:_.EI})),o>10n&&await r.writeContract({abi:l.j5,address:t.vault,functionName:"batchClaimRedeemAssets",args:[i]}).then(t=>e.waitForTransactionReceipt({hash:t,confirmations:_.EI})),G.A.success("Transaction success")},onSuccess:n,onError:c.S3}),v=!r||a+o<=100n;return(0,s.jsxs)("div",{className:(0,c.cn)("flex justify-between items-center gap-5 flex-wrap"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-nowrap",children:[(0,s.jsx)(E.c,{symbol:t.assetSymbol,size:30})," ",t.assetSymbol]}),(0,s.jsxs)("div",{className:"whitespace-nowrap",children:["Balance: ",(0,x.d)(a)]}),(0,s.jsxs)("div",{className:"whitespace-nowrap",children:["Claimable: ",(0,x.d)(o)]}),(0,s.jsx)(z.k6,{className:"mx-auto mt-6 flex justify-center items-center gap-2",busy:f,disabled:v,onClick:h,children:"Redeem All"})]})}function BVaultClaim(e){let{bvc:t}=e,a=(0,m.nr)(t.vault),n=(0,m.Vw)(t.vault)[0],r=(null==n?void 0:n.redeemingBalance)||0n,{ids:i,claimable:o}=(0,m.gz)(t.vault),d=(0,m.R3)(t);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between text-base font-medium items-center gap-5 pt-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-black/60 dark:text-white/60 text-sm",children:"Available to Claim"}),(0,s.jsxs)("div",{className:"flex gap-4 items-center whitespace-nowrap mt-2",children:[(0,s.jsx)(E.c,{symbol:t.yeetLiqSymbol||t.assetSymbol,size:24}),(0,s.jsx)("span",{className:"font-semibold",children:t.yeetLiqSymbol||t.assetSymbol}),(0,s.jsx)("span",{className:"text-black/60 dark:text-white/60 ",children:(0,x.d)(o)})]})]}),(0,s.jsx)(P.v,{className:"ml-auto w-1/3",busyShowTxet:!1,tx:"Claim",disabled:o<=0n,config:{abi:l.j5,address:t.vault,functionName:"batchClaimRedeemAssets",args:[i.length>40?i.slice(i.length-40):i]},onTxSuccess:()=>{d()}})]}),(0,s.jsx)("div",{className:"h-[1px] bg-border my-4"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-black/60 dark:text-white/60 mb-4",children:"Pending Requests"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(E.c,{symbol:t.pTokenSymbol,size:24}),(0,s.jsx)("span",{className:"font-semibold",children:t.pTokenSymbol}),(0,s.jsx)("span",{className:"text-black/60 dark:text-white/60",children:(0,x.d)(r)}),(0,s.jsxs)("div",{className:"ml-auto text-xs text-black/60 dark:text-white/60 ",children:["Settlement Time : ",(0,s.jsx)("span",{className:"text-black dark:text-white font-semibold pr-2",children:(0,c.G$)((a.current.duration+a.current.startTime)*1000n,c.mv.DATE2)})," ",(0,c.Y)((a.current.duration+a.current.startTime)*1000n-BigInt(b().now()))]})]})]})]})}function BVaultP(e){var t;let{bvc:a}=e,[i,o]=(0,j.useState)(""),d=(0,c.su)(i),p=r.P[a.asset],h=!!p,f=h?"PT":a.pTokenSymbol,v=h?"LP":a.assetSymbol,b=(0,m.nr)(a.vault),y=(0,u.o)(e=>e.sliceTokenStore.balances[a.asset]||0n,["sliceTokenStore.balances.".concat(a.asset)]),{data:w}=(0,B.p)(),k=(0,m.R3)(a),N=(0,g.useSearchParams)(),T=N.get("subtab"),S=(0,g.useRouter)(),V=[{tab:"Buy",content:(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(A.W,{asset:a.assetSymbol,amount:i,balance:y,setAmount:o,error:d>0n&&d<W?"Minimum amount is ".concat((0,x.d)(W)):""}),(0,s.jsx)(F.x,{address:a.asset}),(0,s.jsx)("div",{className:"text-xs font-medium text-center",children:"Receive 1 ".concat(f," for every ").concat(v)}),(0,s.jsx)(P.v,{className:"mx-auto mt-4",tx:"Buy",disabled:d<=0n||d>y||d<W,spender:a.vault,approves:{[a.asset]:d},config:{abi:l.j5,address:a.vault,functionName:"deposit",args:[d]},onTxSuccess:()=>{o(""),k()}})]})},{tab:"Withdraw",content:(0,s.jsx)(BVaultRedeem,{bvc:a})},{tab:"Claim",content:(0,s.jsx)(BVaultClaim,{bvc:a})}],C=null===(t=V.find(e=>e.tab.toLowerCase()==T))||void 0===t?void 0:t.tab;return(0,s.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-5","max-w-4xl mx-auto w-full","max-w-xl"),children:[(0,s.jsxs)("div",{className:"card !p-0 overflow-hidden w-full",children:[(0,s.jsxs)("div",{className:"flex p-5 bg-[#10B98126] gap-5",children:[(0,s.jsx)(E.c,{size:54,symbol:"PToken"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{className:"text-xl text-black dark:text-white font-semibold",children:a.pTokenSymbol}),(0,s.jsx)("div",{className:"text-xs text-black/60 dark:text-white/60 font-medium",children:"Interest bearing rebase principal token"})]})]}),(0,s.jsxs)("div",{className:"flex items-baseline justify-between px-5 pt-5 gap-5",children:[(0,s.jsx)(TupleTxt,{tit:"APY Est.",sub:(0,s.jsx)(BVaultApy,{bvc:a,showTip:!0})}),(0,s.jsx)(TupleTxt,{tit:"Total Supply",sub:(0,s.jsx)(s.Fragment,{children:(0,x.d)(b.pTokenTotal)})})]}),(0,s.jsx)("div",{className:"flex px-2 pb-5",children:(0,s.jsx)("button",{className:"btn-link ml-auto text-black/60 dark:text-white/60 text-xs",onClick:()=>{null==w||w.watchAsset({type:"ERC20",options:{address:a.pToken,symbol:a.pTokenSymbol,decimals:18}}).catch(c.S3)},children:"Add to wallet"})})]}),(0,s.jsx)("div",{className:"md:col-span-2 card !p-4",children:(0,s.jsx)(Y.x,{currentTab:C,data:V,onTabChange:e=>(0,n.rc)(S,a.vault,"principal_panda",e)})})]})}function BVaultYInfo(e){let{bvc:t}=e,a=t.assetSymbol.includes("-"),n=a?"YT":t.yTokenSymbol,l=a?"LP token":t.assetSymbol,r=(0,m.nr)(t.vault),o=r.current,d=r.current.yTokenAmountForSwapYT>0n?r.lockedAssetTotal*i.Pq/r.current.yTokenAmountForSwapYT:0n,[u]=(0,m.v7)(t.vault),{roi:p,restakingIncomesApy:h,additionalRoi:v}=(0,K.tY)(t);return(0,s.jsxs)("div",{className:"card !p-0 overflow-hidden flex flex-col",children:[(0,s.jsxs)("div",{className:"flex p-5 bg-[#6366F126] gap-5",children:[(0,s.jsx)(E.c,{size:54,symbol:"YToken"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{className:"text-xl text-black dark:text-white font-semibold",children:t.yTokenSymbol}),(0,s.jsx)("div",{className:"text-xs text-black/60 dark:text-white/60 font-medium",children:"Yield token"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-between p-5 gap-5 flex-1",children:[(0,s.jsxs)("div",{className:"flex justify-between items-baseline gap-4 flex-wrap",children:[(0,s.jsxs)("div",{className:"text-xs flex gap-2 items-end",children:[(0,s.jsxs)(U.C,{node:(0,s.jsx)("span",{className:"text-2xl font-medium underline underline-offset-2 relative top-0.5",children:(0,c.Jh)(p,18,2)}),children:[(0,s.jsxs)("div",{children:["Restaking incomes: ",(0,c.Jh)(h,18,2)]}),(0,s.jsxs)("div",{children:["Additional airdrops: ",(0,c.Jh)(v,18,2)]}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{children:"YT Spent: -100%"})]}),"Est.ROI in remaining days"]}),(0,s.jsxs)("span",{className:"text-xs relative top-[3.9375rem]",children:["1",n," = Yield of ",(0,x.d)(d,2)," ",l]})]}),(0,s.jsx)(TupleTxt,{tit:"Circulation amount",sub:(0,s.jsx)(s.Fragment,{children:(0,x.d)(r.current.yTokenAmountForSwapYT)})}),o&&(0,s.jsxs)("div",{className:"dark:text-white/60 text-xs whitespace-nowrap gap-1 flex w-full flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{children:"Epoch ".concat(o.epochId.toString())}),(0,s.jsxs)("span",{className:"scale-90",children:["~",(0,c.Y)((o.startTime+o.duration)*1000n-BigInt(new Date().getTime()))," remaining"]})]}),(0,s.jsx)(f.k,{value:(e=>{let t=BigInt(Math.floor(new Date().getTime()/1e3));if(t<e.startTime)return 0;if(t-o.startTime>=o.duration)return 100;let a=(t-o.startTime)*100n/e.duration;return parseInt(a.toString())})(o),className:"mt-2 rounded-full overflow-hidden"}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"scale-90",children:(0,c.G$)(1000n*o.startTime,c.mv.ALL2)}),(0,s.jsx)("span",{className:"scale-90",children:(0,c.G$)((o.startTime+o.duration)*1000n,c.mv.ALL2)})]})]})]})]})}function BVaultYTrans(e){let{bvc:t}=e,a=t.assetSymbol.includes("-");a||t.pTokenSymbol;let n=a?"YT":t.yTokenSymbol,r=a?"LP token":t.assetSymbol,[p,f]=(0,j.useState)(""),v=(0,c.su)(p),b=(0,m.nr)(t.vault),g=(0,u.o)(e=>e.sliceTokenStore.balances[t.asset]||0n,["sliceTokenStore.balances.".concat(t.asset)]),N=(0,o.p)(),[T,S]=(0,j.useState)(["calcSwap",t.vault,v,N]);(0,w.Z)(()=>S(["calcSwap",t.vault,v,N]),300,["calcSwap",t.vault,v,N]);let{data:B,isFetching:V}=(0,h.a)({queryKey:T,queryFn:()=>(0,d.B)().readContract({abi:l.j5,address:t.vault,functionName:"calcSwap",args:[v]})}),[C,q]=(0,k.Z)(!1),I=b.current.vaultYTokenBalance,E=(0,c.ok)(B,"1"),R=I>0n?b.Y*i.Pq/I:0n,Y=R>0n?i.Pq*i.Pq/R:0n,L=C?"1 ".concat(r,"=").concat((0,x.d)(Y)," ").concat(n):"1 ".concat(n,"=").concat((0,x.d)(R)," ").concat(r),U=I>E?(b.Y+v)*i.Pq/(I-E):0n,D=(0,c.Kl)(E,void 0,!0),M=U>R&&R>0n?(U-R)*BigInt(1e10)/R:0n,G=(0,m.R3)(t),{roi:_,roiChange:z}=(0,K.tY)(t,E,U);return(0,s.jsxs)("div",{className:"card !p-4 flex flex-col h-[24.25rem] gap-1",children:[(0,s.jsx)(A.W,{asset:t.assetSymbol,amount:p,balance:g,setAmount:f,error:v>0n&&v<W?"Minimum amount is ".concat((0,x.d)(W)):""}),(0,s.jsx)(F.x,{address:t.asset}),(0,s.jsx)("div",{className:"text-base font-bold my-2",children:"Receive"}),(0,s.jsx)(A.W,{asset:t.yTokenSymbol,loading:V&&!!p,readonly:!0,disable:!0,checkBalance:!1,amount:D}),(0,s.jsxs)("div",{className:"text-xs font-medium  flex justify-between select-none",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(y.k$E,{className:"text-sm text-primary cursor-pointer inline-block",onClick:()=>q()}),(0,s.jsx)("span",{children:"Price: ".concat(L)})]}),(0,s.jsx)("div",{className:"flex gap-2 items-center",children:"Price Impact: ".concat((0,c.Jh)(M,10,2))})]}),E>0n&&(0,s.jsxs)("div",{className:"text-xs font-medium text-center my-auto text-black/80 dark:text-white/80",children:["Implied ROI Change: ",(0,c.Jh)(_,18,2)," ","->"," ",(0,s.jsx)("span",{className:(0,c.cn)({"text-red-400":_-z>=BigInt(1e17)}),children:(0,c.Jh)(z,18,2)})]}),(0,s.jsx)(P.v,{className:"mx-auto mt-auto",tx:"Buy",skipSimulate:!0,disabled:v<=0n||v>g||v<W,config:{abi:l.j5,address:t.vault,functionName:"swap",args:[v]},approves:{[t.asset]:v},spender:t.vault,onTxSuccess:()=>{f(""),G()}})]})}function BribeTit(e){return(0,s.jsxs)("div",{className:"flex items-center justify-start pl-5 gap-3",children:[(0,s.jsx)(E.c,{symbol:"GreenDot",size:14}),(0,s.jsx)(U.C,{node:(0,s.jsx)("span",{className:"text-sm font-medium",children:(0,c.lS)(e.name,6,0)}),children:e.name.length>6?e.name:null})]})}function BVaultPoolsOld(e){var t;let{bvc:a}=e,[n,r]=(0,j.useState)(!1),o=(0,m.Vw)(a.vault),d=(0,j.useMemo)(()=>n?o.filter(e=>e.bribes.reduce((e,t)=>e+t.bribeAmount,0n)>0n):o,[o,n]),[u,p]=(0,N.Z)(),h="text-black/60 dark:text-white/60 text-sm",[f,v]=(0,j.useState)(null===(t=d[0])||void 0===t?void 0:t.epochId),b=(0,j.useMemo)(()=>f?d.find(e=>e.epochId==f):d[0],[d,f]),g=(null==b?void 0:b.userBalanceYToken)||0n,y=(null==b?void 0:b.userBalanceYTokenSyntyetic)||0n,onRowClick=e=>{var t;v(null===(t=d[e])||void 0===t?void 0:t.epochId)},w=(null==b?void 0:b.bribes)||[],k=(0,j.useMemo)(()=>{let e=w.find(e=>e.bribeAmount>0n);return e&&0n!=e.bribeTotalAmount?(0,c.Jh)(e.bribeAmount*i.Pq/e.bribeTotalAmount,18):(0,c.Jh)(0n,0n)},[w]),S=(0,m.R3)(a);return(0,s.jsxs)("div",{className:"md:h-[24.25rem] card !p-4",children:[(0,s.jsx)("div",{className:"font-bold text-base",children:"Harvest"}),(0,s.jsxs)("div",{className:(0,c.cn)("flex flex-col md:flex-row gap-4 mt-2"),children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 shrink-0 w-full md:w-[14.375rem]",ref:u,children:[(0,s.jsxs)("div",{className:"flex items-center gap-8 text-sm font-semibold",children:[(0,s.jsx)("span",{children:"My Pool Only"}),(0,s.jsx)(L.r,{checked:n,onChange:r})]}),(0,s.jsx)(T.aV,{className:d.length>6?"pr-5":"",width:p.width,height:280,rowHeight:e=>{let{index:t}=e;return t<d.length-1?76:56},overscanRowCount:6,rowCount:d.length,rowRenderer:function(e){let{key:t,style:a,index:n}=e,l=d[n],r="".concat((0,c.G$)(1000n*l.startTime),"-").concat((0,c.G$)((l.startTime+l.duration)*1000n));return(0,s.jsx)("div",{style:a,className:"cursor-pointer",onClick:()=>onRowClick(n),children:(0,s.jsxs)("div",{className:(0,c.cn)("h-[56px] card !rounded-lg !px-5 !py-2 font-semibold",n<d.length-1?"mb-[20px]":""),children:[(0,s.jsxs)("div",{className:"text-sm",children:["Epoch ",d[n].epochId.toString()]}),(0,s.jsx)("div",{className:"text-xs dark:text-white/60 mt-1",children:r})]})},t)}})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"flex gap-6 items-end font-semibold",children:[(0,s.jsx)("span",{className:"text-sm",children:"Accumulated Rewards"}),(0,s.jsxs)("span",{className:"text-xs dark:text-white/60",children:["Epoch ",((null==b?void 0:b.epochId)||1n).toString()]})]}),(0,s.jsx)("div",{className:"mt-2 rounded-lg border border-solid border-border px-4 py-1 h-[8.125rem] overflow-auto",children:(0,s.jsx)(R.ZP,{headerClassName:"text-center text-black/60 dark:text-white/60 border-b-0",headerItemClassName:"py-1",rowClassName:"text-center",cellClassName:"py-0",header:["","","Total","Mine",""],span:{1:2,2:1,3:1},data:w.map(e=>["",(0,s.jsx)(BribeTit,{name:e.bribeSymbol},"1"),(0,x.d)(e.bribeTotalAmount),(0,x.d)(e.bribeAmount),""])})}),(0,s.jsxs)("div",{className:"rounded-lg border border-solid border-border px-4 py-2 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"font-semibold text-xs",children:[(0,s.jsxs)("div",{children:["My yToken: ",(0,s.jsx)("span",{className:(0,c.cn)(h),children:(0,x.d)(g)})]}),(0,s.jsxs)("div",{children:["Time Weighted Points:"," ",(0,s.jsx)("span",{className:(0,c.cn)(h),children:g>0n&&0n==y?"Reward received":(0,x.d)(y)})]})]}),(0,s.jsxs)("div",{className:"text-sm",children:["My Share: ",(0,s.jsx)("span",{className:(0,c.cn)(h,"text-xl"),children:k})]})]}),(0,s.jsx)("span",{className:"text-xs mx-auto",children:"You can harvest at the end of Epoch"}),(0,s.jsx)(P.v,{className:"mx-auto mt-4",tx:"Harvest",disabled:!b||!(null==b?void 0:b.settled),config:{abi:l.j5,address:a.vault,functionName:"claimBribes",args:[null==b?void 0:b.epochId]},onTxSuccess:()=>{S()}})]})]})]})}function BVaultPools(e){var t,a;let{bvc:n}=e,[r,i]=(0,j.useState)(!0),o=(0,m.Vw)(n.vault),d=(0,j.useMemo)(()=>r?o.filter(e=>e.userClaimableYTokenSyntyetic>0n||e.sBribes.reduce((e,t)=>e+t.bribeAmount,0n)>0n||e.aBribes.reduce((e,t)=>e+t.bribeAmount,0n)>0n):o,[o,r]),[u,p]=(0,N.Z)(),[h,f]=(0,j.useState)((null===(t=d[0])||void 0===t?void 0:t.epochId)||(null===(a=o[0])||void 0===a?void 0:a.epochId)),v=(0,j.useMemo)(()=>h?d.find(e=>e.epochId==h):d[0],[d,h]),b=(null==v?void 0:v.userBalanceYToken)||0n,g=(null==v?void 0:v.userBalanceYTokenSyntyetic)||0n,y=(null==v?void 0:v.userClaimableYTokenSyntyetic)||0n,onRowClick=e=>{var t;f(null===(t=d[e])||void 0===t?void 0:t.epochId)};(0,j.useEffect)(()=>{var e,t;o.length&&f((null===(e=d[0])||void 0===e?void 0:e.epochId)||(null===(t=o[0])||void 0===t?void 0:t.epochId))},[o.length]);let w=(null==v?void 0:v.sBribes)||[],k=(null==v?void 0:v.aBribes)||[],S=(0,m.R3)(n);return(0,s.jsxs)("div",{className:"md:h-[24.25rem] card !p-4",children:[(0,s.jsx)("div",{className:"font-bold text-base",children:"Harvest"}),(0,s.jsxs)("div",{className:(0,c.cn)("flex flex-col md:flex-row gap-4 mt-2"),children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 shrink-0 w-full md:w-[14.375rem]",ref:u,children:[(0,s.jsxs)("div",{className:"flex items-center gap-8 text-sm font-semibold",children:[(0,s.jsx)("span",{children:"My Pool Only"}),(0,s.jsx)(L.r,{checked:r,onChange:i})]}),(0,s.jsx)(T.aV,{className:d.length>6?"pr-5":"",width:p.width,height:280,rowHeight:e=>{let{index:t}=e;return t<d.length-1?76:56},overscanRowCount:6,rowCount:d.length,rowRenderer:function(e){let{key:t,style:a,index:n}=e,l=d[n],r="".concat((0,c.G$)(1000n*l.startTime),"-").concat((0,c.G$)((l.startTime+l.duration)*1000n));return(0,s.jsx)("div",{style:a,className:"cursor-pointer",onClick:()=>onRowClick(n),children:(0,s.jsxs)("div",{className:(0,c.cn)("h-[56px] card !rounded-lg !px-5 !py-2 font-semibold",n<d.length-1?"mb-[20px]":""),children:[(0,s.jsxs)("div",{className:"text-sm",children:["Epoch ",d[n].epochId.toString()]}),(0,s.jsx)("div",{className:"text-xs dark:text-white/60 mt-1",children:r})]})},t)}})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"flex gap-6 items-end font-semibold",children:[(0,s.jsx)("span",{className:"text-sm",children:"Rewards"}),(0,s.jsxs)("span",{className:"text-xs opacity-60",children:["Epoch ",((null==v?void 0:v.epochId)||h||1n).toString()]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto flex flex-col gap-4 font-semibold text-sm",children:[(0,s.jsxs)("div",{className:"flex gap-10 items-end font-semibold",children:[(0,s.jsxs)("span",{className:"text-sm",children:[n.yTokenSymbol," Balance"]}),(0,s.jsx)("span",{className:"text-sm opacity-60",children:(0,x.d)(b)})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-5 justify-start relative pt-8 items-center",children:[w.map(e=>(0,s.jsxs)("div",{className:"flex items-center w-full relative gap-20 pl-[20%]",children:[(0,s.jsx)(BribeTit,{name:e.bribeSymbol}),(0,s.jsx)("div",{className:"absolute left-1/2",children:(0,x.d)(e.bribeAmount)})]},e.bribeToken)),(0,s.jsx)("span",{className:"absolute left-0 top-0",children:"Restaking Earnings"}),(0,s.jsx)("span",{className:"absolute left-1/2 top-0 opacity-60",children:"Claimable"}),(0,s.jsx)(P.v,{className:"absolute w-28 top-0 right-0",tx:"Claim",disabled:!v,config:{abi:l.l0,address:null==v?void 0:v.stakingBribesPool,functionName:"getBribes"},onTxSuccess:()=>{S()}})]}),(0,s.jsxs)("div",{className:"flex items-center relative",children:[(0,s.jsxs)("span",{className:"text-sm",children:["YT Points ",(0,s.jsx)(U.C,{children:"YT Points are calculated based on the duration of YT holding and apply to some uncertain rewards, such as airdrops."})]}),(0,s.jsx)("span",{className:" opacity-60 ml-10",children:(0,x.d)(g,void 0,23)}),(0,s.jsxs)("div",{className:"flex flex-col gap-1 absolute left-1/2 top-0",children:[(0,s.jsx)("span",{className:"opacity-60",children:"Claimable"}),(0,s.jsx)("span",{children:(0,x.d)(y,void 0,23)})]}),(0,s.jsx)(P.v,{className:"w-28 ml-auto",tx:"Claim",disabled:!v,config:{abi:l.q3,address:null==v?void 0:v.adhocBribesPool,functionName:"collectYT"},onTxSuccess:()=>{S()}})]}),k.length>0&&(0,s.jsxs)("div",{className:"flex flex-col gap-5 justify-start relative pt-8 items-center",children:[k.map(e=>(0,s.jsxs)("div",{className:"flex items-center w-full relative gap-20 pl-[20%]",children:[(0,s.jsx)(BribeTit,{name:e.bribeSymbol}),(0,s.jsx)("div",{className:"absolute left-1/2",children:(0,x.d)(e.bribeAmount)})]},e.bribeToken)),(0,s.jsx)("span",{className:"absolute left-0 top-0",children:"Additional Incentives"}),(0,s.jsx)("span",{className:"absolute left-1/2 top-0 opacity-60",children:"Claimable"}),(0,s.jsx)(P.v,{className:"absolute w-28 top-0 right-0",tx:"Claim",disabled:!v,config:{abi:l.q3,address:null==v?void 0:v.adhocBribesPool,functionName:"getBribes"},onTxSuccess:()=>{S()}})]}),(0,s.jsx)("div",{className:"text-center text-sm font-medium flex items-center flex-nowrap justify-center whitespace-nowrap mt-auto gap-1"})]})]})]})]})}function BVaultApy(e){let{bvc:t,showTip:a=!1}=e,[n,r]=(0,m.oU)(t),{data:u}=function(){let e=(0,o.p)(),t=M.Be[e];return(0,h.a)({initialData:0n,queryKey:["VerioStakeApy",t],enabled:!!t,queryFn:async()=>{let e=(0,d.B)(),a=await e.readContract({abi:l.PJ,address:t,functionName:"getTotalStake"});return 262750n*i.Pq*i.$X/a}})}(),x=(0,c.Jh)(r+u,10);return a?(0,s.jsxs)(U.C,{className:"underline underline-offset-[3px]",node:x,children:[(0,s.jsxs)("div",{children:["vIP Base: ",(0,c.Jh)(u,10)]}),(0,s.jsxs)("div",{children:["YT Income: ",n]})]}):(0,s.jsx)(s.Fragment,{children:x})}function BVaultB(e){let{bvc:t}=e,a=(0,m.nr)(t.vault);return(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[4fr_6fr] gap-5",children:[(0,s.jsx)(BVaultYInfo,{bvc:t}),(0,s.jsx)(BvaultEpochYtPrices,{bvc:t,epochId:a.epochCount}),(0,s.jsx)(BVaultYTrans,{bvc:t}),t.isOld?(0,s.jsx)(BVaultPoolsOld,{bvc:t}):(0,s.jsx)(BVaultPools,{bvc:t})]})}function BVaultCard(e){let{vc:t}=e,a=(0,g.useRouter)(),[l,o]=t.assetSymbol.split("-"),d=(0,m.nr)(t.vault),p=r.P[t.asset],h=(0,u.o)(e=>e.sliceTokenStore.prices,["sliceTokenStore.prices"]),f=p&&h[p.base]||0n,v=p&&h[p.quote]||0n,y=d.lpBase||0n,w=d.lpQuote||0n,k=y*f/i.Pq,N=w*v/i.Pq,T=k+N;0n===T&&(T=(d.lockedAssetTotal||0n)*(h[t.asset]||0n)/i.Pq);let[S]=(0,m.v7)(t.vault),B="Epoch ".concat(((null==d?void 0:d.epochCount)||0n).toString()),P=0n==d.epochCount?"-- -- --":(0,c.G$)((d.current.startTime+d.current.duration)*1000n,c.mv.DATE2),A=0n==d.epochCount?"":(0,c.Y)((d.current.startTime+d.current.duration)*1000n-BigInt(b().now())),{data:{avrageApy:V,items:C}}=(0,K.Zi)(t),{roi:q}=(0,K.tY)(t);return(0,s.jsxs)("div",{className:(0,c.cn)("card !p-0 grid grid-cols-2 overflow-hidden",{}),children:[(0,s.jsxs)("div",{className:(0,c.cn)(D.bG,"border-b","bg-black/10 dark:bg-white/10 col-span-2 flex-row px-4 md:px-5 py-4 items-center"),children:[(0,s.jsx)(E.c,{symbol:t.assetSymbol,size:44}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:" text-lg font-semibold whitespace-nowrap",children:t.assetSymbol}),(0,s.jsx)("div",{className:" text-sm font-medium",children:t.assetSymbol.includes("-")?"LP Token":""})]}),(0,s.jsxs)("div",{className:"ml-auto",children:[(0,s.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:"Total Value Locked"}),(0,s.jsxs)("div",{className:"text-sm font-medium",children:["$",(0,x.d)(T,2)]})]})]}),p&&(0,D.BW)(l,y,k),p&&(0,D.BW)(o,w,N,!0),(0,D.yP)("Settlement Time",d.closed?"status-red":"status-green",d.closed?"Closed":(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,s.jsx)("span",{children:P}),(0,s.jsx)("span",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:A})]}),d.epochCount>0n&&(0,s.jsx)("div",{className:"absolute top-full mt-1 left-0 text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:B})]})),(0,D.yP)("Reward",t.rewardSymbol||"vIP",(0,s.jsxs)(j.Fragment,{children:[(0,s.jsx)("span",{children:t.rewardSymbol||"vIP"}),(0,s.jsxs)("div",{className:"text-xs whitespace-nowrap absolute top-2/3 left-1/2 -translate-x-1/2",children:["Underlying APY:",(0,s.jsx)(U.C,{node:(0,s.jsx)("span",{className:"underline underline-offset-2",children:(0,c.Jh)(V,18,2)}),children:(0,s.jsxs)("div",{className:"grid grid-cols-3",children:[(0,s.jsx)("div",{className:"p-2",children:"IP Asset"}),(0,s.jsx)("div",{className:"p-2",children:"Restaked"}),(0,s.jsx)("div",{className:"p-2",children:"APY"}),C.map(e=>(0,s.jsxs)(j.Fragment,{children:[(0,s.jsx)("div",{className:"px-2",children:e.tit||"-"}),(0,s.jsx)("div",{className:"px-2",children:(0,x.d)(e.staked)}),(0,s.jsx)("div",{className:"px-2",children:(0,c.Jh)(e.apy,18,2)})]},e.tit))]})})]})]}),!0),(0,D.Sn)("PToken","Principal Token",(0,s.jsx)(BVaultApy,{bvc:t}),"YToken","Yield Token","".concat((0,c.Jh)(q,18,2)),e=>{e.stopPropagation(),(0,n.rc)(a,t.vault,"principal_token")},e=>{e.stopPropagation(),(0,n.rc)(a,t.vault,"yield_token")})]})}function BVaultCardComming(e){let{symbol:t=""}=e;return(0,s.jsxs)("div",{className:(0,c.cn)("card cursor-pointer !p-0 grid grid-cols-2 overflow-hidden h-[20rem]",{}),children:[(0,s.jsxs)("div",{className:(0,c.cn)(D.bG,"border-b","bg-black/10 dark:bg-white/10 col-span-2 flex-row px-4 md:px-5 py-4 items-center h-20"),children:[(0,s.jsx)(E.c,{symbol:t,size:44}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:" text-lg font-semibold whitespace-nowrap",children:t}),(0,s.jsx)("div",{className:" text-sm font-medium",children:t.includes("-")?"LP Token":""})]}),(0,s.jsxs)("div",{className:"ml-auto",children:[(0,s.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:"Total Value Locked"}),(0,s.jsx)("div",{className:"text-sm font-medium",children:"$-"})]})]}),(0,s.jsx)("div",{className:(0,c.cn)(D.bG,"col-span-2"),children:(0,s.jsx)("div",{className:"text-xs font-semibold leading-[12px] whitespace-nowrap",children:"New Vault Coming Soon..."})})]})}},25676:function(e,t,a){a.d(t,{x:function(){return GetvIP}});var s=a(52628);a(53333);var n=a(6062),l=a(47450),r=a.n(l),i=a(19671);function GetvIP(e){let{address:t}=e;return(0,s.jsxs)("div",{className:"text-xs font-medium flex gap-2 justify-end items-center",children:[(0,s.jsx)(i.c,{symbol:"verio",size:18}),(0,s.jsx)(r(),{target:"_blank",className:"underline",href:(0,n.FN)(t),children:"Get vIP on Verio"})]})}},64417:function(e,t,a){var s=a(52628),n=a(15493),l=a(83978),r=a.n(l);function DefEmpty(){return(0,s.jsx)("tr",{className:"text-lg font-normal text-center text-black ",children:(0,s.jsx)("td",{colSpan:100,className:"h-[100px] py-5 align-top"})})}a(83508),t.ZP=e=>{let{header:t,data:a,span:l={},empty:i=(0,s.jsx)(DefEmpty,{}),className:o="relative min-w-full bg-transparent ",headerClassName:c,headerItemClassName:d,tbodyClassName:u="",rowClassName:m,rowStyle:x,cellClassName:p,onClickRow:h,onRowMouseHover:f}=e,v=t.reduce((e,t,a)=>{var s;return e+(null!==(s=l[a])&&void 0!==s?s:1)},0),b=v>0?100/v:0;return(0,s.jsxs)("table",{className:(0,n.cn)("relative min-w-full bg-transparent ",o),children:[(0,s.jsx)("thead",{className:"",children:(0,s.jsx)("tr",{className:(0,n.cn)("text-left whitespace-nowrap font-normal text-black border-b border-gray-100 pt-5 pb-6 dark:text-slate-50 dark:border-zinc-600",c),children:t.map((e,t)=>{var a;return(0,s.jsx)("th",{style:{width:"".concat(r().floor(b*(null!==(a=l[t])&&void 0!==a?a:1),2),"%")},scope:"col",className:(0,n.cn)(0==l[t]?"p-0 w-0":"p-3 font-normal text-sm",d),children:e},t)})})}),(0,s.jsxs)("tbody",{className:(0,n.cn)(u),children:[a.map((e,a)=>(0,s.jsx)("tr",{onClick:()=>h&&h(a),onMouseEnter:()=>f&&f(a),onMouseLeave:()=>f&&f(-1),style:"function"==typeof x?x(a):x,className:(0,n.cn)("text-slate-700 dark:text-slate-50 font-medium whitespace-nowrap",h?"cursor-pointer hover:bg-slate-400/10":"","function"==typeof m?m(a):m),children:e.map((e,r)=>r>=t.length?(0,s.jsx)(s.Fragment,{children:e}):(0,s.jsx)("td",{className:(0,n.cn)(0==l[r]?"p-0 w-max":"px-3 py-2 text-sm w-max","function"==typeof p?p(a,r):p),children:e},r))},a)),0===a.length&&i]})]})}},16658:function(e,t,a){a.d(t,{r:function(){return Switch}});var s=a(52628),n=a(15493),l=a(54648);function Switch(e){let t=(0,l.l)();return(0,s.jsx)("div",{style:{padding:1,border:"1px solid transparent",backgroundRepeat:"no-repeat",backgroundClip:"padding-box,border-box",backgroundOrigin:"padding-box,border-box",backgroundImage:e.checked?"radial-gradient(#0B1215,#0B1215),radial-gradient(122.5% 122.5% at 52.9% 16.25%, #6366F1 0%, #6366F1 36.26%, #6366F1 92.54%)":"light"==t.theme?"radial-gradient(#FAFAFA,#FAFAFA),radial-gradient(#0A1114,#0A1114)":"radial-gradient(#0A1114,#0A1114),radial-gradient(#4A5546,#4A5546)"},className:(0,n.cn)("relative h-[1em] w-[2.5em] cursor-pointer rounded-[0.4em] text-xl"),onClick:()=>{var t;return null===(t=e.onChange)||void 0===t?void 0:t.call(e,!e.checked)},children:(0,s.jsx)("div",{className:(0,n.cn)("transition-all h-full w-[1.5em] absolute top-0 rounded-[0.4em]",e.checked?"left-[1em]":"-left-[1px]"),style:{background:e.checked?"radial-gradient(76.25% 76.25% at 50.3% 23.75%, #6366F1 0%, #6366F1 100%)":"#3B4144"}})})}a(19698)},83084:function(e,t,a){a.d(t,{C:function(){return Tip}});var s=a(52628),n=a(15493),l=a(52653),r=a(55966);function Tip(e){let{children:t,node:a,className:i,inFlex:o,contentClassName:c}=e,d=document.getElementById("tooltip-root");return t?(0,s.jsx)(l.zt,{children:(0,s.jsxs)(l.fC,{children:[(0,s.jsx)(l.xz,{asChild:!0,onClickCapture:e=>{e.preventDefault(),e.stopPropagation()},children:a?(0,s.jsx)("div",{className:(0,n.cn)("inline-block cursor-default",i),style:{verticalAlign:"text-bottom"},children:a}):(0,s.jsx)("div",{className:(0,n.cn)(o?"flex":"translate-y-[-6%] inline-block"," px-[3px] cursor-default relative",i),children:(0,s.jsx)(r.apP,{className:"inline-block stroke-slate-500"})})}),(0,s.jsx)(l.h_,{container:d,children:(0,s.jsxs)(l.VY,{className:(0,n.cn)("max-w-xs text-sm text-white bg-slate-900 shadow-lg dark:bg-[#333333] rounded-md p-4",c),children:[t,(0,s.jsx)(l.Eh,{})]})})]})}):a}},93063:function(e,t,a){a.d(t,{BW:function(){return renderToken},Sn:function(){return renderChoseSide},bG:function(){return o},yP:function(){return renderStat}});var s=a(52628),n=a(15493),l=a(2360),r=a(19671),i=a(70475);let o="py-5 flex flex-col items-center gap-2 relative dark:border-border border-solid",renderToken=function(e,t,a){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,s.jsx)("div",{className:(0,n.cn)(o,"border-b",{"border-l":i}),children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap flex gap-2 items-center",children:[(0,s.jsx)(r.c,{symbol:e,size:14}),e]}),(0,s.jsxs)("div",{className:"flex mt-2 flex-col gap-1 pl-[1.375rem] text-xs font-medium",children:[(0,s.jsx)("span",{className:"",children:(0,l.d)(t)}),(0,s.jsx)("span",{className:" text-[#64748B] dark:text-slate-50/60",children:"$".concat((0,l.d)(a,2))})]})]})})},renderStat=function(e,t,a){let l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,s.jsx)("div",{className:(0,n.cn)(o,"border-b pb-10",{"border-l":l}),children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap text-center",children:e}),(0,s.jsxs)("div",{className:"flex mt-2 items-center gap-2 text-sm font-medium",children:[(0,s.jsx)(r.c,{symbol:t,size:14}),"string"==typeof a?(0,s.jsx)("span",{children:a}):a]})]})})},BtnWrap=e=>{let{children:t,onClick:a,...n}=e;return(0,s.jsx)(i.k6,{hiddenBorder:!0,...n,disabled:!e.onClick,onClick:a,children:t})},renderChoseSide=(e,t,a,l,i,c,d,u)=>(0,s.jsxs)("div",{className:(0,n.cn)(o,"col-span-2 gap-4"),children:[(0,s.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:"Choose your side"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 w-full px-4",children:[(0,s.jsx)(BtnWrap,{className:(0,n.cn)("h-[4.25rem] w-full relative disabled:opacity-100 disabled:cursor-default"),onClick:d,children:(0,s.jsxs)("div",{className:"flex gap-2 items-center p-4 w-full h-[4.25rem] absolute left-0 top-0",children:[(0,s.jsx)(r.c,{symbol:e,size:36}),(0,s.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,s.jsx)("div",{className:"text-white/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:t}),(0,s.jsx)("span",{className:" text-[14px] leading-[14px] font-medium",children:a})]})]})}),(0,s.jsx)(BtnWrap,{className:(0,n.cn)("h-[4.25rem] w-full relative disabled:opacity-100 disabled:cursor-default"),onClick:u,children:(0,s.jsxs)("div",{className:"flex flex-row-reverse gap-2 items-center p-4 w-full h-[4.25rem] absolute left-0 top-0",children:[(0,s.jsx)(r.c,{symbol:l,size:36}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,s.jsx)("div",{className:"text-white/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:i}),(0,s.jsx)("span",{className:" text-[14px] leading-[14px] font-medium",children:c})]})]})})]})]})},42929:function(e,t,a){a.d(t,{LF:function(){return f},Zi:function(){return useBVaultUnderlyingAPY},tY:function(){return useBvaultROI}});var s=a(51767),n=a(6062),l=a(4605),r=a(66986),i=a(181),o=a(64370),c=a(83978),d=a.n(c),u=a(95891),m=a(35004),x=a(11292),p=a(67541);let h=(0,u.V)(["struct UserStakeAmountDetail { address stakeTokenAddress; uint256 amount; uint8 lockup; uint256 lastStakeTimestamp;}","function getUserStakeAmountForIP(address _ipAsset, address _user) external view returns (UserStakeAmountDetail[][] memory)","function getTotalStakeWeightedInIPForIP(address _ipAsset) external view returns (uint256)","function getTotalStakeAmountForIP(address _ipAsset, address[] calldata _stakeTokens) external view returns (uint256[] memory)","struct RewardPoolState {address rewardToken;uint8 rewardTokenType;uint8 distributionType;uint256 rewardsPerEpoch;uint256 rewardPerToken;uint256 totalRewards;uint256 totalDistributedRewards;uint256 lastEpochBlock;}","function getRewardPools(address _ipAsset) external view returns (RewardPoolState[][] memory)","function calculateIPWithdrawal(uint256 _vIPToBurn) external view returns (uint256)"]),f={"0xB1D831271A68Db5c18c8F0B69327446f7C8D0A42":"IPPY","0x0a0466c312687027E2BEa065d4Cca0DCEC19bb2C":"Globkins","0xCdF104e4F24d593E16B9F6c382cEB1FB5573EEDd":"Mimboku","0x8c40Ef7408D6036Dca0b69E67D960dd48014cB16":"Sofamon","0x00e23f81e489E43484B0B8Bc109faD6C1F4c28E7":"Benjamin","0x42A351E005De1330DeDe69Ca4Ae1B06715a2f4fA":"WTF"};function useBVaultUnderlyingAPY(e){let t=e.vault,{data:a}=(0,o.a)({initialData:[],queryKey:["bvualtipassets",t],enabled:!!t,queryFn:async()=>{let e=await (0,r.B)().readContract({abi:s.j5,address:t,functionName:"ipAssets"});return console.info("ipAssets:",e),e}});return(0,o.a)({initialData:{avrageApy:0n,items:[]},queryKey:["bvualtunderlyingapy",t,a],enabled:!!t&&a.length>0,gcTime:36e5,queryFn:async()=>{let s=(0,r.B)((0,n.BV)(),1),i=await s.readContract({abi:h,address:"0xf6701A6A20639f0E765bA7FF66FD4f49815F1a27",functionName:"calculateIPWithdrawal",args:[(0,m.f)("1")]}),o=(0,m.f)("2.367"),apyByIpAsset=async a=>{let[[n],r]=await Promise.all([s.readContract({abi:h,functionName:"getTotalStakeAmountForIP",address:e.ipAssetStaking,args:[a,[e.asset]]}),s.readContract({abi:h,functionName:"getTotalStakeWeightedInIPForIP",address:e.ipAssetStaking,args:[a]})]),c=(0,m.f)("0.00009"),d=r>0n?c*l.SH*l.Pq/o*l.Pq/r:0n;n>=(0,m.f)("100")&&i>0n&&r>0n&&(d+=(0,m.f)("7.5")*l.Pq/i*(n*l.Pq/r)/l.Pq/100n);let u=4n*d;return console.info("underlyingApy:",t,a,(0,x.d)(u)),u},c=await Promise.all(a.map(apyByIpAsset)),d=await Promise.all(a.map(a=>s.readContract({abi:h,functionName:"getUserStakeAmountForIP",address:e.ipAssetStaking,args:[a,t]}))),u=d.map(e=>{var t;return null===(t=e.find(e=>e.length))||void 0===t?void 0:t.find(e=>!!e)}),p=u.reduce((e,t)=>e+((null==t?void 0:t.amount)||0n),0n),v=p>0n?c.map((e,t)=>{var a;return e*((null==u?void 0:null===(a=u[t])||void 0===a?void 0:a.amount)||0n)}).reduce((e,t)=>e+t,0n)/p:0n,b=c.map((e,t)=>{var s;return{apy:e,staked:(null==u?void 0:null===(s=u[t])||void 0===s?void 0:s.amount)||0n,ipID:a[t],tit:f[a[t]]}}).sort((e,t)=>{let a=t.apy-e.apy;return a>0n?1:a<0n?-1:0});return console.info("staked:",t,u,v),{avrageApy:v,items:b}}})}function calcRestakingApy(e,t,a,s,n){let r=t*e*a/l.Pq/l.SH,i=s>0n?r*l.Pq/s:0n,o=n>0n?i*l.Pq/n:0n;return o}function calcAdditionalApy(e,t,a,s){let n=e+t*a,r=0n*l.Pq,i=n>0n?r*l.Pq/n:0n,o=l.Pq*a,c=i*o/l.Pq,d=s>0n?c*l.Pq/s:0n;return d}function calcAdditionalApy2(e,t,a){let s=0n*l.Pq,n=e>0n?s*l.Pq/e:0n,r=l.Pq*t,i=n*r/l.Pq,o=a>0n?i*l.Pq/a:0n;return o}function useBvaultROI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0n,n=e.vault,c=(0,i.nr)(n),{data:{avrageApy:u}}=useBVaultUnderlyingAPY(e),m=c.current.yTokenAmountForSwapYT,x=c.current.vaultYTokenBalance,h=c.current.duration+c.current.startTime-BigInt(d().round(d().now()/1e3)),f=c.pTokenTotal,v=x>0n?c.Y*l.Pq/x:0n,b=calcRestakingApy(u,f,h,m,v),g=t>0n?calcRestakingApy(u,f,h,m+t,a):0n,{data:j}=function(e){let t=(0,i.nr)(e);return(0,o.a)({initialData:0n,gcTime:36e5,queryKey:["ytPoints",e,t.current.adhocBribesPool],enabled:!!e&&!!t.current.adhocBribesPool,queryFn:async()=>{let e=(0,r.B)();return t.current.adhocBribesPool===p.DR?0n:e.readContract({abi:s.q3,address:t.current.adhocBribesPool,functionName:"totalSupply"})}})}(n),y=e.pTokenV2?calcAdditionalApy2(c.ytPointsMaxTotalSupply,h,v):calcAdditionalApy(j,m,h,v),w=t>0n?e.pTokenV2?calcAdditionalApy2(c.ytPointsMaxTotalSupply+t*h,h,a):calcAdditionalApy(j,m+t,h,a):0n;return{roi:b>0n?b+y-l.Pq:0n,roiChange:g>0n?g+w-l.Pq:0n,restakingIncomesApy:b,additionalRoi:y}}},766:function(e,t,a){a.d(t,{Ev:function(){return useLoadBVaults},a1:function(){return useLoadLVaults},g2:function(){return useLoadUserBVaults},tK:function(){return useLoadLntVaults},z2:function(){return useLoadUserLVaults}});var s=a(31480),n=a(6194),l=a(4605),r=a(86026),i=a(64370),o=a(83978),c=a.n(o),d=a(83508),u=a(6951),m=a(90947),x=a(43625);function useLoadLVaults(){let e=(0,m.p)(),t=n.iK[e]||[],{address:a}=(0,u.m)(),s=(0,d.useMemo)(()=>c().chain(n.iK[e]||[]).map(e=>[e.assetTokenAddress,e.xTokenAddress]).flatten().concat([n.O1[e]]).union().value(),[e]);(0,i.a)({queryKey:["UpdateLvautlsTokens",s],queryFn:async()=>(await r.w.getState().sliceTokenStore.updateTokenTotalSupply(s),!0)}),(0,i.a)({queryKey:["UpdateUserLvautlsTokens",s,a],queryFn:async()=>!!a&&(await r.w.getState().sliceTokenStore.updateTokensBalance(s,a),!0)}),(0,i.a)({queryKey:["UpdateLVautls",t],queryFn:async()=>(await r.w.getState().sliceLVaultsStore.updateLVaults(t),!0)})}function useLoadBVaults(){let e=(0,m.p)(),t=(0,d.useMemo)(()=>s.Fw[e].filter(e=>(e.onEnv||[]).includes(l.Vi)),[e,l.Vi]);(0,i.a)({queryKey:["UpdateBVaults",t],queryFn:async()=>(await Promise.all([r.w.getState().sliceBVaultsStore.updateBvaults(t),r.w.getState().sliceBVaultsStore.updateYTokenSythetic(t)]),!0)});let{address:a}=(0,u.m)(),n=(0,d.useMemo)(()=>t.map(e=>[e.asset,e.pToken]).flat().reduce((e,t)=>e.includes(t)?e:[...e,t],[]),[t]);(0,i.a)({queryKey:["UpdateBvautlsTokens",n],queryFn:async()=>(await Promise.all([r.w.getState().sliceTokenStore.updateTokenTotalSupply(n),r.w.getState().sliceTokenStore.updateTokenPrices(n)]),!0),throwOnError:(e,t)=>(console.error(e),!1)}),(0,i.a)({queryKey:["UpdateUserBvautlsTokens",n,a],queryFn:async()=>!!a&&(await r.w.getState().sliceTokenStore.updateTokensBalance(n,a),!0)})}function useLoadLntVaults(){let e=(0,m.p)(),t=(0,d.useMemo)(()=>{var t;return(null===(t=x.f_[e])||void 0===t?void 0:t.filter(e=>(e.onEnv||[]).includes(l.Vi)))||[]},[e,l.Vi]);(0,i.a)({queryKey:["UpdateLntVaults",t],queryFn:async()=>(await r.w.getState().sliceLntVaultsStore.updateLntVaults(t),!0)});let{address:a}=(0,u.m)(),s=(0,d.useMemo)(()=>t.map(e=>[e.vestingToken,e.vToken]).flat().reduce((e,t)=>e.includes(t)?e:[...e,t],[]),[t]);(0,i.a)({queryKey:["UpdateLntvautlsTokens",s],queryFn:async()=>(await r.w.getState().sliceTokenStore.updateTokenTotalSupply(s),await r.w.getState().sliceTokenStore.updateTokenPrices(s),!0),throwOnError:(e,t)=>(console.error(e),!1)}),(0,i.a)({queryKey:["UpdateUserLntvautlsTokens",s,a],queryFn:async()=>!!a&&(await r.w.getState().sliceTokenStore.updateTokensBalance(s,a),!0)})}function useLoadUserLVaults(){let{address:e}=(0,u.m)(),t=(0,m.p)(),a=n.iK[t]||[];(0,i.a)({queryKey:["UpdateAllUserLVaults",t,e,a],queryFn:async()=>!!e&&(await Promise.all(a.map(t=>r.w.getState().sliceLVaultsStore.updateUserLVault(t,e))),!0)})}function useLoadUserBVaults(){let{address:e}=(0,u.m)(),t=(0,m.p)(),a=(0,d.useMemo)(()=>s.Fw[t].filter(e=>(e.onEnv||[]).includes(l.Vi)),[t,l.Vi]),n=(0,r.o)(e=>c().keys(e.sliceBVaultsStore.bvaults).toString(),["sliceBVaultsStore.bvaults"]);(0,i.a)({queryKey:["UpdateAllUserBvaults",a,t,e,n],queryFn:async()=>{if(!e)return!1;let t=r.w.getState().sliceBVaultsStore.bvaults;for(let e of a)if(!t[e.vault])return!1;await Promise.all(a.map(e=>r.w.getState().sliceBVaultsStore.updateEpoches(e)));let getEpochesParams=e=>{let t=r.w.getState().sliceBVaultsStore.bvaults[e.vault],a=[];for(let s=parseInt(t.epochCount.toString());s>0;s--){let t=r.w.getState().sliceBVaultsStore.epoches["".concat(e.vault,"_").concat(s)];a.push(t)}return a};return await Promise.all(a.map(t=>r.w.getState().sliceUserBVaults.updateEpoches(t,e,getEpochesParams(t)))),!0}})}},181:function(e,t,a){a.d(t,{R3:function(){return useUpBVaultForUserAction},Vw:function(){return useEpochesData},Zd:function(){return useBVaultEpoches},d6:function(){return useResetBVaultsData},gz:function(){return useCalcClaimable},lL:function(){return calcBVaultPTApy},nr:function(){return useBVault},oU:function(){return useBVaultApy},v7:function(){return useBVaultBoost}});var s=a(4605),n=a(90947),l=a(15493),r=a(2360),i=a(83978),o=a.n(i),c=a(83508),d=a(6951),u=a(86026);function useResetBVaultsData(){let e=(0,n.p)(),{address:t}=(0,d.m)();(0,c.useEffect)(()=>{},[e]),(0,c.useEffect)(()=>{u.w.getState().sliceUserBVaults.reset()},[t])}function useBVault(e){return(0,u.o)(t=>t.sliceBVaultsStore.bvaults[e]||(0,l.Yb)({current:(0,l.Yb)({},0n)},0n),["sliceBVaultsStore.bvaults.".concat(e)])}function useBVaultEpoches(e){return(0,u.o)(t=>{let a=t.sliceBVaultsStore.bvaults[e];if(!a||a.epochCount<=0n)return[];let s=o().range(1,parseInt((a.epochCount+1n).toString())).reverse(),n=t.sliceBVaultsStore.epoches;return s.map(t=>n["".concat(e,"_").concat(t)]).filter(e=>null!=e)},["sliceBVaultsStore.bvaults.".concat(e),"sliceBVaultsStore.epoches"])}function useEpochesData(e){let t=useBVaultEpoches(e),a=(0,u.o)(t=>t.sliceUserBVaults.epoches[e]||[],["sliceUserBVaults.epoches.".concat(e)]);return(0,c.useMemo)(()=>{let e=a.reduce((e,t)=>({...e,[t.epochId.toString()]:t}),{});return t.map(t=>(0,l.Yb)({...t,...e[t.epochId.toString()]||{bribes:[],sBribes:[],aBribes:[]}},0n))},[t,a])}function useCalcClaimable(e){let t=useEpochesData(e);return(0,c.useMemo)(()=>{let e=t.filter(e=>e.claimableAssetBalance&&e.settled);return{ids:e.map(e=>e.epochId),claimable:e.reduce((e,t)=>e+t.claimableAssetBalance,0n)}},[t])}function useBVaultBoost(e){let t=(0,u.o)(()=>(function(e){let t=u.w.getState(),a=t.sliceBVaultsStore.bvaults[e],n=(null==a?void 0:a.current.vaultYTokenBalance)||0n,l=(null==a?void 0:a.Y)||0n,i=l>0n?n*s.Pq/l:0n,o=(null==a?void 0:a.current.yTokenAmountForSwapYT)||0n,c=(null==a?void 0:a.lockedAssetTotal)||0n,d=o>0n?c*s.Pq/o:0n;return console.info("calcBootst:",(0,r.d)(i),(0,r.d)(d)),s.Pq,i})(e),["sliceBVaultsStore.bvaults.".concat(e)]);return[(0,r.d)(t,0),t]}function calcBVaultPTApy(e){let t=u.w.getState(),a=t.sliceBVaultsStore.bvaults[e.vault],n=(0,l.ok)(t.sliceBVaultsStore.yTokenSythetic,[e.vault]),r=0n;return r=e.pTokenV2?a&&a.ptRebaseRate&&a.pTokenTotal?a.ptRebaseRate/s.Pq*s.SH*BigInt(1e10)/a.pTokenTotal/s.Pq:0n:a&&a.current.assetTotalSwapAmount&&n?a.current.assetTotalSwapAmount*s.SH*BigInt(1e10)/n:0n,console.info("apy:",e.vault,r,e.pTokenV2,null==a?void 0:a.ptRebaseRate,null==a?void 0:a.pTokenTotal),r}function useBVaultApy(e){let t=(0,u.o)(()=>calcBVaultPTApy(e),["sliceBVaultsStore.bvaults.".concat(e.vault),"sliceBVaultsStore.yTokenSythetic.".concat(e.vault)]);return[(0,l.Jh)(t,10),t]}function useUpBVaultForUserAction(e,t){let{address:a}=(0,d.m)();return()=>{(0,l.XD)(async()=>{if(null==t||t(),!a)return;await Promise.all([u.w.getState().sliceTokenStore.updateTokensBalance([e.asset,e.pToken],a),u.w.getState().sliceTokenStore.updateTokenTotalSupply([e.asset,e.pToken]),u.w.getState().sliceBVaultsStore.updateBvaults([e]),u.w.getState().sliceBVaultsStore.updateYTokenSythetic([e])]);let s=u.w.getState().sliceBVaultsStore.bvaults[e.vault];await u.w.getState().sliceBVaultsStore.updateEpoches(e,s.epochCount>1n?[s.epochCount,s.epochCount-1n]:[s.epochCount]);let n=[];for(let t=parseInt(s.epochCount.toString());t>0;t--){let a=u.w.getState().sliceBVaultsStore.epoches["".concat(e.vault,"_").concat(t)];n.push(a)}console.info("onUserAction:epoches",n),await u.w.getState().sliceUserBVaults.updateEpoches(e,a,n)},3,1e3)}}}}]);