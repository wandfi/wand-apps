"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2536],{59781:function(e,t,a){a.d(t,{kQ:function(){return toLVault},p2:function(){return toLntVault},rc:function(){return toBVault}});var n=a(26361);function toBVault(e,t,a,s){if(!t)return e.push("/ip-vaults");let r="/ip-vaults?vault=".concat(t);a&&(r+="&tab=".concat((0,n.pi)(a))),s&&(r+="&subtab=".concat((0,n.pi)(s))),e.push(r)}function toLVault(e,t,a){if(!t)return e.push("/l-vaults");let s="/l-vaults?vault=".concat(t);a&&(s+="&tab=".concat((0,n.pi)(a))),e.push(s)}function toLntVault(e,t,a){if(!t)return e.push("/lnt-vaults");let s="/lnt-vaults?vault=".concat(t);a&&(s+="&tab=".concat((0,n.pi)(a))),e.push(s)}},99548:function(e,t,a){a.d(t,{v:function(){return ApproveAndTx},L:function(){return NftApproveAndTx}});var n=a(31113),s=a(19757),r=a(26361),l=a(78403),o=a(83978),u=a.n(o),c=a(64103),i=a(47259),d=a(58714),p=a(96670),f=a(4408);let m={},useApproves=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10000000000n*10n**18n,{address:n,chainId:o}=(0,p.m)(),{data:u}=(0,f.p)(),[v,h]=(0,c.useState)(!1),g=(0,c.useMemo)(()=>Object.keys(e).filter(e=>e!==s.K8),[e]),[x,w]=(0,c.useState)(t&&m[t]||{}),updateAllownce=(e,a)=>{t&&(m[t]={...m[t]||{},[e]:a},w(t=>({...t,[e]:a})))};(0,c.useEffect)(()=>{n&&t&&o&&g.forEach(e=>{(0,l.B)().readContract({abi:d.Wo,address:e,functionName:"allowance",args:[n,t]}).then(t=>updateAllownce(e,t||0n)).catch(console.error)})},[g,o,n]);let[b,y]=(0,c.useState)(!1),k=(0,c.useMemo)(()=>g.filter(t=>(0,r.ok)(e,t)>0n&&(0,r.ok)(e,t)>(0,r.ok)(x,t)),[e,g,x]),approve=async()=>{if(0!=k.length&&t)try{y(!0),h(!1);for(let n=0;n<k.length;n++){let s=k[n],r=!1===a?e[s]:a,o=await (null==u?void 0:u.writeContract({abi:d.Wo,address:s,functionName:"approve",args:[t,r]}));o&&await (0,l.B)().waitForTransactionReceipt({hash:o}),updateAllownce(s,r)}i.A.success("Approve success"),y(!1),h(!0)}catch(e){i.A.error((0,r.az)(e)),y(!1),h(!1)}};return{approve,loading:b,shouldApprove:k.length>0,isSuccess:v}},v={},useNftApproves=(e,t)=>{let{address:a,chainId:n}=(0,p.m)(),{data:s}=(0,f.p)(),[o,m]=(0,c.useState)(!1),h=u().keys(e),[g,x]=(0,c.useState)(t&&v[t]||{}),updateAllownce=(e,a)=>{t&&(v[t]={...v[t]||{},[e]:a},x(t=>({...t,[e]:a})))};(0,c.useEffect)(()=>{a&&t&&n&&h.forEach(e=>{(0,l.B)().readContract({abi:d.Hr,address:e,functionName:"isApprovedForAll",args:[a,t]}).then(t=>t!==g[e]&&updateAllownce(e,t)).catch(console.error)})},[h,n,a]);let[w,b]=(0,c.useState)(!1),y=(0,c.useMemo)(()=>h.filter(e=>!g[e]),[e,h,g]),approve=async()=>{if(0!=y.length&&t)try{b(!0),m(!1);for(let e=0;e<y.length;e++){let a=y[e],n=await (null==s?void 0:s.writeContract({abi:d.Hr,address:a,functionName:"setApprovalForAll",args:[t,!0]}));n&&await (0,l.B)().waitForTransactionReceipt({hash:n}),updateAllownce(a,!0)}i.A.success("Approve success"),b(!1),m(!0)}catch(e){i.A.error((0,r.az)(e)),b(!1),m(!1)}};return{approve,loading:w,shouldApprove:y.length>0,isSuccess:o}};var h=a(78354),g=a(88501),x=a(60689);function ApproveAndTx(e){let{className:t,tx:a,busyShowTxet:s=!0,approves:r,spender:l,requestAmount:o,config:u,toast:i=!0,skipSimulate:d=!1,disabled:p,confirmations:f,onTxSuccess:m,onApproveSuccess:v}=e,{write:w,isDisabled:b,isLoading:y}=(0,h.R)(u,{onSuccess:()=>m&&m(),autoToast:i,skipSimulate:d,confirmations:f}),k=p||b||y||!1===u.enabled,{approve:S,shouldApprove:V,loading:T,isSuccess:A}=useApproves(r||{},l,o),L=(0,c.useRef)();return(L.current=v,(0,c.useEffect)(()=>{L.current&&A&&L.current()},[A]),V)?(0,n.jsx)(x.k,{className:(0,g.m)("flex items-center justify-center gap-4",t),onClick:S,busy:T,disabled:p||!S||T,children:"Approve"}):(0,n.jsx)(x.k,{className:(0,g.m)("flex items-center justify-center gap-4",t),onClick:()=>w(),busy:y,busyShowContent:s,disabled:k,children:a})}function NftApproveAndTx(e){let{className:t,tx:a,busyShowTxet:s=!0,approves:r,spender:l,requestAmount:o,config:u,toast:i=!0,skipSimulate:d=!1,disabled:p,confirmations:f,onTxSuccess:m,onApproveSuccess:v}=e,{write:w,isDisabled:b,isLoading:y}=(0,h.R)(u,{onSuccess:()=>m&&m(),autoToast:i,skipSimulate:d,confirmations:f}),k=p||b||y||!1===u.enabled,{approve:S,shouldApprove:V,loading:T,isSuccess:A}=useNftApproves(null!=r?r:{},l),L=(0,c.useRef)();return(L.current=v,(0,c.useEffect)(()=>{L.current&&A&&L.current()},[A]),V)?(0,n.jsx)(x.k,{className:(0,g.m)("flex items-center justify-center gap-4",t),onClick:S,busy:T,disabled:p||!S||T,children:"Approve"}):(0,n.jsx)(x.k,{className:(0,g.m)("flex items-center justify-center gap-4",t),onClick:()=>w(),busy:y,busyShowContent:s,disabled:k,children:a})}},91214:function(e,t,a){a.d(t,{W:function(){return AssetInput}});var n=a(31113),s=a(26361),r=a(84944),l=a(33501),o=a(64103),u=a(45631),c=a(35057),i=a(99971),d=a(12045),p=a(36762),f=a(85665),m=a(83978),v=a.n(m);function AssetInput(e){let{asset:t="ETH",assetIcon:a,assetURL:m,checkBalance:h=!0,balance:g,balanceTit:x="Balance",decimals:w=18,exchange:b,readonly:y,selected:k,onClick:S,amount:V,setAmount:T,price:A,disable:L,hasInput:N=!1,options:j,onChange:B=()=>{},defaultValue:C,balanceClassName:E="",loading:q,disableNegative:U}=e,F=(0,o.useRef)(null),K=h&&void 0!==g&&(0,s.su)("number"==typeof V?V+"":V||"",w)>("bigint"==typeof g?g:0n),P=(0,d.l)(e=>"dark"==e.theme),[M,{width:R}]=(0,f.Z)();return(0,n.jsxs)("div",{className:"relative w-full",onClick:()=>{S&&!L&&S()},children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("div",{className:"absolute flex items-center h-fit gap-2 left-[48px] bottom-1 w-full  max-w-[calc(100%-56px)]",style:{pointerEvents:"none"},children:[A&&(0,n.jsx)("div",{className:"text-neutral-500 dark:text-slate-50/70 text-xs max-w-full overflow-hidden",children:A}),b&&(0,n.jsxs)("div",{className:"text-slate-500 dark:text-slate-50/70 text-xs max-w-full overflow-hidden",children:["~$",b]})]}),(0,n.jsxs)("div",{className:"absolute flex items-center gap-2 w-fit top-1/2 left-4 -translate-y-1/2",ref:M,children:[(0,n.jsx)(i.c,{size:24,symbol:a||t,url:m,className:"rounded-full"}),(0,n.jsx)("div",{className:(0,l.Z)("relative",A||b?"-top-[6px]":""),children:N?(0,n.jsx)(u.ZP,{options:j,onChange:B,defaultValue:C,styles:{control:(e,t)=>({...e,border:"0px",outline:"none",boxShadow:"none",borderRadius:"0px",minHeight:"24px",padding:"0px",background:"transparent"}),singleValue:(e,t)=>({...e,color:P?"#fff":"#000"}),valueContainer:(e,t)=>({...e,padding:"0px"}),menu:(e,t)=>({...e,margin:0,background:P?"#444":"#fff"}),option:(e,t)=>({...e,color:P?"#fff":"#000",background:P?"transparent":"#fff"}),menuPortal:(e,t)=>({...e,margin:0})}}):(0,n.jsx)("div",{children:t})})]}),(0,n.jsx)("input",{value:q?"":V,onChange:e=>{if(y)return;let t=(e.target.value||"").replaceAll("-","").replaceAll("+","");T(t)},ref:F,type:"number",disabled:L,style:{paddingLeft:"".concat(v().round((R+32)/16,3),"rem")},className:(0,l.Z)(y?"bg-slate-50 cursor-not-allowed dark:bg-slate-800":"bg-white dark:bg-transparent",{"border-green-700 border-2":k,"border-red-400 !border-2 focus:border-red-400":K,"border-slate-400  focus:border-primary":!K&&!k},"w-full h-14 text-right pr-4 font-bold text-lg border-[#4A5546] border focus:border-2 text-slate-700 rounded-lg outline-none dark:text-slate-50"),placeholder:"0.000",maxLength:36,pattern:"[0-9.]{36}",step:.01,title:"",readOnly:y}),q&&(0,n.jsx)(p.$,{className:"absolute right-24 top-[1.125rem]"})]}),void 0!=g&&(0,n.jsxs)("div",{className:"flex items-center justify-between mt-1 px-1 text-slate-400 dark:text-slate-50/70 text-sm",children:[(0,n.jsxs)("div",{className:E,children:[(0,n.jsxs)("span",{children:[x,": ",(0,r.d)(g,3,w)]}),(0,n.jsx)("button",{className:"text-primary ml-2",onClick:()=>{let e=(0,c.b)(g,w);T(e),S&&!L&&S()},children:"Max"})]}),(0,n.jsx)("div",{className:"text-sm text-red-400",children:K?"Insufficient account balance":""})]})]})}},44939:function(e,t,a){a.d(t,{E:function(){return PageWrap}});var n=a(31113);a(64103);var s=a(26361),r=a(69708),l=a(12045);function PageWrap(e){let{children:t,className:a}=e,o=(0,l.l)(e=>e.theme),u=(0,r.usePathname)();return(0,n.jsx)("div",{className:(0,s.cn)("min-h-[calc(100vh+1px)] h-auto pt-[90px] pb-6",a),style:{backgroundSize:"contain",background:"light"==o?"#eeeeee":"/"==u?"url(bg_home.svg) center bottom no-repeat,linear-gradient(105.67deg, #02050E 14.41%, #1D2F23 98.84%)":"linear-gradient(105.67deg, #02050E 14.41%, #1D2F23 98.84%)"},children:t})}},16738:function(e,t,a){a.d(t,{x:function(){return SimpleTabs}});var n=a(31113),s=a(26361),r=a(24626),l=a(64103);function SimpleTabs(e){let{currentTab:t,className:a,listClassName:o,triggerClassName:u,contentClassName:c,hiddenConetent:i=!1,data:d,onTabChange:p}=e,[f,m]=(0,l.useState)(t||d[0].tab);return(0,l.useEffect)(()=>{d.find(e=>e.tab==f)||m(d[0].tab)},[f,d]),(0,n.jsxs)(r.fC,{value:t||f,className:(0,s.cn)("w-full",a),onValueChange:e=>{m(e),null==p||p(e)},children:[(0,n.jsx)(r.aV,{className:(0,s.cn)("p-1 w-fit rounded-md gap-5 flex bg-transparent",o),children:d.map(e=>(0,n.jsx)(r.xz,{className:(0,s.cn)('rounded-[3px] text-sm py-1.5 px-0 text-black/50 font-medium data-[state="active"]:bg-black data-[state="active"]:text-slate-900 !bg-transparent dark:text-white/50 dark:data-[state="active"]:text-white',u),value:e.tab,children:e.tab},e.tab))}),!i&&d.map(e=>(0,n.jsx)(r.VY,{value:e.tab,className:(0,s.cn)("flex flex-col gap-6 outline-none",c),children:e.content},e.tab))]})}},31889:function(e,t,a){a.d(t,{Ev:function(){return useLoadBVaults},a1:function(){return useLoadLVaults},g2:function(){return useLoadUserBVaults},tK:function(){return useLoadLntVaults},z2:function(){return useLoadUserLVaults}});var n=a(87031),s=a(19757),r=a(22139),l=a(55349),o=a(64370),u=a(83978),c=a.n(u),i=a(64103),d=a(96670),p=a(59175),f=a(95889);function useLoadLVaults(){let e=(0,p.p)(),t=s.iK[e]||[],{address:a}=(0,d.m)(),n=(0,i.useMemo)(()=>c().chain(s.iK[e]||[]).map(e=>[e.assetTokenAddress,e.xTokenAddress]).flatten().concat([s.O1[e]]).union().value(),[e]);(0,o.a)({queryKey:["UpdateLvautlsTokens",n],queryFn:async()=>(await l.w.getState().sliceTokenStore.updateTokenTotalSupply(n),!0)}),(0,o.a)({queryKey:["UpdateUserLvautlsTokens",n,a],queryFn:async()=>!!a&&(await l.w.getState().sliceTokenStore.updateTokensBalance(n,a),!0)}),(0,o.a)({queryKey:["UpdateLVautls",t],queryFn:async()=>(await l.w.getState().sliceLVaultsStore.updateLVaults(t),!0)})}function useLoadBVaults(){let e=(0,p.p)(),t=(0,i.useMemo)(()=>n.Fw[e].filter(e=>(e.onEnv||[]).includes(r.Vi)),[e,r.Vi]);(0,o.a)({queryKey:["UpdateBVaults",t],queryFn:async()=>(await Promise.all([l.w.getState().sliceBVaultsStore.updateBvaults(t),l.w.getState().sliceBVaultsStore.updateYTokenSythetic(t)]),!0)});let{address:a}=(0,d.m)(),s=(0,i.useMemo)(()=>t.map(e=>[e.asset,e.pToken]).flat().reduce((e,t)=>e.includes(t)?e:[...e,t],[]),[t]);(0,o.a)({queryKey:["UpdateBvautlsTokens",s],queryFn:async()=>(await Promise.all([l.w.getState().sliceTokenStore.updateTokenTotalSupply(s),l.w.getState().sliceTokenStore.updateTokenPrices(s)]),!0),throwOnError:(e,t)=>(console.error(e),!1)}),(0,o.a)({queryKey:["UpdateUserBvautlsTokens",s,a],queryFn:async()=>!!a&&(await l.w.getState().sliceTokenStore.updateTokensBalance(s,a),!0)})}function useLoadLntVaults(){let e=(0,p.p)(),t=(0,i.useMemo)(()=>{var t;return(null===(t=f.f_[e])||void 0===t?void 0:t.filter(e=>(e.onEnv||[]).includes(r.Vi)))||[]},[e,r.Vi]);(0,o.a)({queryKey:["UpdateLntVaults",t],queryFn:async()=>(await l.w.getState().sliceLntVaultsStore.updateLntVaults(t),!0)});let{address:a}=(0,d.m)(),n=(0,i.useMemo)(()=>t.map(e=>[e.vestingToken,e.vToken]).flat().reduce((e,t)=>e.includes(t)?e:[...e,t],[]),[t]);(0,o.a)({queryKey:["UpdateLntvautlsTokens",n],queryFn:async()=>(await l.w.getState().sliceTokenStore.updateTokenTotalSupply(n),await l.w.getState().sliceTokenStore.updateTokenPrices(n),!0),throwOnError:(e,t)=>(console.error(e),!1)}),(0,o.a)({queryKey:["UpdateUserLntvautlsTokens",n,a],queryFn:async()=>!!a&&(await l.w.getState().sliceTokenStore.updateTokensBalance(n,a),!0)})}function useLoadUserLVaults(){let{address:e}=(0,d.m)(),t=(0,p.p)(),a=s.iK[t]||[];(0,o.a)({queryKey:["UpdateAllUserLVaults",t,e,a],queryFn:async()=>!!e&&(await Promise.all(a.map(t=>l.w.getState().sliceLVaultsStore.updateUserLVault(t,e))),!0)})}function useLoadUserBVaults(){let{address:e}=(0,d.m)(),t=(0,p.p)(),a=(0,i.useMemo)(()=>n.Fw[t].filter(e=>(e.onEnv||[]).includes(r.Vi)),[t,r.Vi]),s=(0,l.o)(e=>c().keys(e.sliceBVaultsStore.bvaults).toString(),["sliceBVaultsStore.bvaults"]);(0,o.a)({queryKey:["UpdateAllUserBvaults",a,t,e,s],queryFn:async()=>{if(!e)return!1;let t=l.w.getState().sliceBVaultsStore.bvaults;for(let e of a)if(!t[e.vault])return!1;await Promise.all(a.map(e=>l.w.getState().sliceBVaultsStore.updateEpoches(e)));let getEpochesParams=e=>{let t=l.w.getState().sliceBVaultsStore.bvaults[e.vault],a=[];for(let n=parseInt(t.epochCount.toString());n>0;n--){let t=l.w.getState().sliceBVaultsStore.epoches["".concat(e.vault,"_").concat(n)];a.push(t)}return a};return await Promise.all(a.map(t=>l.w.getState().sliceUserBVaults.updateEpoches(t,e,getEpochesParams(t)))),!0}})}},78354:function(e,t,a){a.d(t,{R:function(){return useWrapContractWrite}});var n=a(26361),s=a(78403),r=a(64103),l=a(47259),o=a(4408);function useWrapContractWrite(e,t){let{autoToast:a=!0,onSuccess:u}=t||{},[c,i]=(0,r.useState)(!1),[d,p]=(0,r.useState)(!1),{data:f}=(0,o.p)(),m=!f||!f.account||c||!e,write=async()=>{if(!m){i(!0),p(!1);try{let n="function"==typeof e?await e():e,r=(0,s.B)(),o={account:f.account,...n};if(!(null==t?void 0:t.skipSimulate)){let e=await r.simulateContract(o);o=e.request}let c=await f.writeContract(o),i=await r.waitForTransactionReceipt({hash:c,confirmations:null==t?void 0:t.confirmations});if("success"!==i.status)throw"Transaction reverted";p(!0),u&&u(),a&&l.A.success("Transaction success")}catch(e){a&&l.A.error((0,n.az)(e))}i(!1)}};return{write,isDisabled:m,isLoading:c,isSuccess:d}}}}]);