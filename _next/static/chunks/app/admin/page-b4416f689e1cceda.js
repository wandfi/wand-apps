(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{42706:function(e,t,a){Promise.resolve().then(a.bind(a,10219))},10219:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return AdminPage}});var n=a(31113),s=a(99548),i=a(88702),r=a(44939),l=a(38894),u=a(19757),o=a(59175),d=a(48405),c=a(15506),p=a(26361),m=a(64103),f=a(45631),v=a(58409),x=a(85665),g=a(62531),b=a(35057),j=a(33737),h=a(11292),A=a(61766),N=a(58714),T=a(96670);let P=[{label:"资产利息率",value:"Y"},{label:"目标AAR",value:"AART"},{label:"安全AAR",value:"AARS"},{label:"上顶AAR",value:"AARU"},{label:"熔断AAR",value:"AARC"},{label:"赎回手续费",value:"C"},{label:"进入国库比例",value:"TreasuryFeeRate"},{label:"Discount冷静时间",value:"CircuitBreakPeriod",units:0},{label:"低买池最小成交量USB",value:"PtyPoolMinUsbAmount"},{label:"高卖池最小成交量",value:"PtyPoolMinAssetAmount"},{label:"RateR",value:"RateR"}],y=[{label:"产品周期",value:"D",units:0},{label:"初始定价",value:"APRi"},{label:"赎回手续费",value:"f1"},{label:"利息佣金",value:"f2"}],U=[{label:"产品周期",value:"D",units:0},{label:"Nft质押Claim等待时间",value:"NftDepositLeadingTime",units:0},{label:"Nft赎回等待时间",value:"NftRedeemWaitingPeriod",units:0},{label:"初始定价",value:"APRi"},{label:"赎回手续费",value:"f1"},{label:"利息佣金",value:"f2"}];function UpdateVaultParams(e){let{paramList:t,vault:a,protocoSettingAddress:r}=e,u=(0,m.useMemo)(()=>t.map(e=>({...e,label:"".concat(e.label,"(").concat(e.value,")")})),[t]),[{value:o,param:d},h]=(0,v.Z)({value:"",param:u[0]}),{data:A,refetch:N}=(0,c.uX)({contracts:t.map(e=>({abi:l.$4,address:r,functionName:"vaultParamValue",args:[a,(0,g.$G)(e.value,{size:32})]}))}),T=(0,m.useMemo)(()=>(A||[]).map((e,a)=>{let n=t[a];return"".concat(n.label,"(").concat(n.value,"): ").concat((0,b.b)(e.result||0n,"number"==typeof n.units?n.units:10))}),[A]),P="number"==typeof d.units?d.units:10,[y,U]=(0,x.Z)();return(0,n.jsxs)(i.Ak,{tit:"Vault Param Vaule",children:[(0,n.jsx)(f.ZP,{classNames:i.At,maxMenuHeight:U.height+110,value:d,options:u,onChange:e=>h({param:e})}),(0,n.jsx)("input",{value:o.toString(),onChange:e=>{let t=(e.target.value||"").replaceAll("-","").replaceAll("+","");h({value:t})},type:"number",className:(0,p.cn)(i.pk),pattern:"[0-9.]{36}",step:1,placeholder:"0"}),(0,n.jsx)(s.v,{tx:"Write",config:{abi:l.$4,address:r,functionName:"updateVaultParamValue",args:[a,(0,g.$G)(d.value,{size:32}),(0,j.v)(o,P)]},onTxSuccess:()=>{h({value:""}),N()},className:" w-full flex items-center justify-center gap-4"}),(0,n.jsx)("div",{className:"text-sm flex flex-col items-start",ref:y,children:T.map((e,t)=>(0,n.jsx)("div",{children:e},"info_".concat(t)))})]})}function UpdateVaultPrice(e){let{vc:t}=e,[{feed:a},r]=(0,v.Z)({feed:""});return(0,n.jsxs)(i.Ak,{tit:"Vault Price Feed",children:[(0,n.jsx)("input",{type:"text",placeholder:"_assetTokenPriceFeed_",value:a,onChange:e=>r({feed:e.target.value}),className:(0,p.cn)(i.pk)}),(0,n.jsx)(s.v,{tx:"Write",config:{abi:l.WW,address:t.vault,functionName:"updatePriceFeed",args:[a]},onTxSuccess:()=>{r({feed:""})},className:" w-full flex items-center justify-center gap-4"})]})}function ClaimYieldsForBuyPool(e){let{vc:t}=e,{data:a}=(0,c.D2)({abi:l.aT,address:t.ptyPoolBelowAddress,functionName:"claimableYields"}),r=t.ptyPoolBelowAddress&&a||0n,[{address:u},o]=(0,v.Z)({address:""});return(0,n.jsxs)(i.Ak,{tit:"ClaimYields for Buy Low Pool",children:[(0,n.jsxs)("span",{children:["Yields: ",(0,h.d)(r)]}),(0,n.jsx)("input",{type:"text",placeholder:"recipient",value:u,onChange:e=>o({address:e.target.value}),className:(0,p.cn)(i.pk)}),(0,n.jsx)(s.v,{tx:"Write",disabled:!t.ptyPoolBelowAddress||r<=0n,config:{abi:l.aT,address:t.ptyPoolBelowAddress,functionName:"claimYields",args:[u]},className:"!mt-0  max-w-[100px] flex items-center justify-center gap-4"})]})}function SetTester(e){let{vc:t}=e,{data:a}=(0,c.D2)({abi:l.Og,address:t.assetTokenFeed,functionName:"getTestersCount"}),{data:r}=(0,c.D2)({abi:l.Og,address:t.assetTokenFeed,functionName:"owner"}),u=a||0n,{data:o}=(0,c.uX)({contracts:Array.from(Array(parseInt(u.toString()))).map((e,a)=>({abi:l.Og,address:t.assetTokenFeed,functionName:"getTester",args:[BigInt(a)]}))}),d=(null==o?void 0:o.map(e=>e.result))||[],[{address:m},f]=(0,v.Z)({address:""});return(0,n.jsxs)(i.Ak,{tit:"Set tester",children:[(0,n.jsxs)("div",{children:["Owner: ",r]}),(0,n.jsxs)("div",{children:["Tester Count: ",u.toString()]}),(0,n.jsx)("div",{children:"Testers"}),d.map(e=>(0,n.jsx)("div",{children:e},e)),(0,n.jsx)("input",{type:"text",placeholder:"recipient",value:m,onChange:e=>f({address:e.target.value}),className:(0,p.cn)(i.pk)}),(0,n.jsx)(s.v,{tx:"Write",disabled:!m,config:{abi:l.Og,address:t.assetTokenFeed,functionName:"setTester",args:[m,!0]},className:"!mt-0  max-w-[100px] flex items-center justify-center gap-4"})]})}function Erc20Approve(){let[e,t]=(0,v.Z)({token:"",spender:"",amount:0n});return(0,n.jsxs)(i.Ak,{tit:"Erc20Approve",children:[(0,n.jsx)("input",{type:"text",placeholder:"token",value:e.token,onChange:e=>t({token:e.target.value}),className:(0,p.cn)(i.pk)}),(0,n.jsx)("input",{type:"text",placeholder:"spender",value:e.spender,onChange:e=>t({spender:e.target.value}),className:(0,p.cn)(i.pk)}),(0,n.jsx)("input",{type:"text",placeholder:"amount",value:e.amount.toString(),onChange:e=>{try{t({amount:(0,p.su)(e.target.value,0)})}catch(e){}},className:(0,p.cn)(i.pk)}),(0,n.jsx)(s.v,{tx:"Write",disabled:!(0,A.U)(e.token)||!(0,A.U)(e.spender)||e.amount<=0n,config:{abi:N.Wo,address:e.token,functionName:"approve",args:[e.spender,e.amount]},className:"!mt-0 w-full flex items-center justify-center gap-4"})]})}let k=[{label:"赎回手续费",value:"C"}];function InitReinit(e){let{vault:t}=e,{data:a}=(0,c.uX)({contracts:[{abi:l.qU,address:t,functionName:"paramValue",args:[(0,g.$G)("D",{size:32})]},{abi:l.qU,address:t,functionName:"nftVtAmount"},{abi:l.qU,address:t,functionName:"nftVestingEndTime"},{abi:l.qU,address:t,functionName:"nftVestingDuration"},{abi:l.qU,address:t,functionName:"ytSwapPaymentToken"},{abi:l.qU,address:t,functionName:"ytSwapPrice"}]}),{data:s}=(0,c.D2)({abi:l.qU,address:t,functionName:"initialized"}),r=null==a?void 0:a.map(e=>{var t;return(null===(t=e.result)||void 0===t?void 0:t.toString())||""});return(0,n.jsx)(i.UT,{abi:l.qU,tit:"InitOrReinit",txProps:{disabled:"boolean"!=typeof s},functionName:s?"reInitialize":"initialize",address:t,argsDef:r},"lnt-vault-init")}function DeleteIpAssets(e){let{data:t}=(0,c.D2)({abi:l.j5,address:e.vault,functionName:"ipAssets"});return(0,n.jsx)(i.UT,{abi:l.j5,functionName:"removeIpAsset",address:e.vault,infos:JSON.stringify(t||"",void 0,2)},"b-vault-removeIpAsset")}function AdminPage(){let e=(0,o.p)(),{current:t,setState:a,options:s}=(0,d.G)(),{chain:c}=(0,T.m)();return(0,n.jsx)(r.E,{children:(0,n.jsx)("div",{className:"w-full flex",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4 w-full max-w-[840px] mx-auto px-5",children:[(0,n.jsx)(f.ZP,{classNames:i.At,defaultValue:s[0],options:s,onChange:e=>e&&a({current:e})}),(null==t?void 0:t.type)=="L-Vault"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(UpdateVaultParams,{vault:t.data.vault,paramList:P,protocoSettingAddress:u.e_[e]}),(0,n.jsx)(UpdateVaultPrice,{vc:t.data}),["pauseMint","unpauseMint","pauseRedeem","unpauseRedeem","pauseUsbToMarginTokens","unpauseUsbToMarginTokens"].map(e=>(0,n.jsx)(i.UT,{functionName:e,abi:l.WW,address:t.data.vault},"l-vault-".concat(e))),(0,n.jsx)(i.UT,{abi:l.EF,functionName:"transferOwnership",address:u.Vq[e]}),(0,n.jsx)(ClaimYieldsForBuyPool,{vc:t.data}),(null==c?void 0:c.testnet)&&(0,n.jsx)(SetTester,{vc:t.data})]}),(null==t?void 0:t.type)=="P-Vault"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(UpdateVaultParams,{vault:t.data.vault,paramList:k,protocoSettingAddress:u.e_[e]}),["configureBlastYieldsAndGas","configureBlastPoints"].map(e=>(0,n.jsx)(i.UT,{abi:l.a4,functionName:e,address:t.data.vault},"p-vault-".concat(e)))]}),(null==t?void 0:t.type)=="B-Vault"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(UpdateVaultParams,{vault:t.data.vault,paramList:y,protocoSettingAddress:t.data.protocolSettingsAddress}),(0,n.jsx)(DeleteIpAssets,{vault:t.data.vault}),["addIpAsset","updateMaxIpAssets","updateC","close","pause","unpause","pauseRedeemPool","unpauseRedeemPool","addBribeToken","addBribes","setBriber"].map(e=>(0,n.jsx)(i.UT,{abi:l.j5,functionName:e,address:t.data.vault},"b-vault-".concat(e))),(0,n.jsx)(i.UT,{tit:"transferOwnership",abi:l.RR,functionName:"transferOwnership",address:t.data.protocolAddress}),(0,n.jsx)(i.UT,{tit:"upsertParamConfig",abi:l.$4,functionName:"upsertParamConfig",address:t.data.protocolSettingsAddress})]}),(null==t?void 0:t.type)=="Lnt-Vault"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(UpdateVaultParams,{vault:t.data.vault,paramList:U,protocoSettingAddress:t.data.protocolSettingsAddress}),(0,n.jsx)(InitReinit,{vault:t.data.vault}),["startEpoch1","updateNftDepositClaimableTime","depositNftVestingToken","withdrawNftVestingToken","addYtRewards"].map(e=>(0,n.jsx)(i.UT,{abi:l.qU,functionName:e,address:t.data.vault},"lnt-vault-".concat(e))),(0,n.jsx)(i.UT,{tit:"transferOwnership",abi:l.RR,functionName:"transferOwnership",address:t.data.protocolAddress}),(0,n.jsx)(i.UT,{tit:"upsertParamConfig",abi:l.$4,functionName:"upsertParamConfig",address:t.data.protocolSettingsAddress}),(null==c?void 0:c.testnet)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.UT,{tit:"mintMockNFT",abi:l.Oq,functionName:"safeMint",address:t.data.asset}),(0,n.jsx)(i.UT,{tit:"mintMockERC20",abi:l.vJ,functionName:"mint",address:t.data.vestingToken})]})]}),(0,n.jsx)(Erc20Approve,{})]})})})}},17695:function(e,t,a){"use strict";a.d(t,{S1:function(){return off},ZT:function(){return noop},jU:function(){return n},on:function(){return on}});var noop=function(){};function on(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function off(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var n="undefined"!=typeof window},85665:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var n=a(64103),s=a(17695),i=s.jU?n.useLayoutEffect:n.useEffect,r={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0},l=s.jU&&void 0!==window.ResizeObserver?function(){var e=(0,n.useState)(null),t=e[0],a=e[1],s=(0,n.useState)(r),l=s[0],u=s[1],o=(0,n.useMemo)(function(){return new window.ResizeObserver(function(e){if(e[0]){var t=e[0].contentRect;u({x:t.x,y:t.y,width:t.width,height:t.height,top:t.top,left:t.left,bottom:t.bottom,right:t.right})}})},[]);return i(function(){if(t)return o.observe(t),function(){o.disconnect()}},[t]),[a,l]}:function(){return[s.ZT,r]}}},function(e){e.O(0,[4881,7495,7622,931,4300,3960,6525,5228,4289,7093,604,1744],function(){return e(e.s=42706)}),_N_E=e.O()}]);