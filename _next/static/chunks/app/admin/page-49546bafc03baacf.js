(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{74653:function(e,t,a){Promise.resolve().then(a.bind(a,34472))},34472:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return AdminPage}});var n=a(52987),s=a(4949),r=a(61387),i=a(26694),u=a(43213),o=a(36213),l=a(53414),d=a(79999),c=a(7347),m=a(40292),p=a(99409),f=a(16759),v=a(83810),x=a(13854),T=a(77317),b=a(45631),h=a(58409),g=a(85665),w=a(5477),j=a(68728),A=a(13277),k=a(29332),N=a(40190),P=a(5624);let y=[{label:"资产利息率",value:"Y"},{label:"目标AAR",value:"AART"},{label:"安全AAR",value:"AARS"},{label:"上顶AAR",value:"AARU"},{label:"熔断AAR",value:"AARC"},{label:"赎回手续费",value:"C"},{label:"进入国库比例",value:"TreasuryFeeRate"},{label:"Discount冷静时间",value:"CircuitBreakPeriod",units:0},{label:"低买池最小成交量USB",value:"PtyPoolMinUsbAmount"},{label:"高卖池最小成交量",value:"PtyPoolMinAssetAmount"},{label:"RateR",value:"RateR"}],B=[{label:"产品周期",value:"D",units:0},{label:"初始定价",value:"APRi"},{label:"赎回手续费",value:"f1"},{label:"利息佣金",value:"f2"}],R=[{label:"产品周期",value:"D",units:0},{label:"Nft质押Claim等待时间",value:"NftDepositLeadingTime",units:0},{label:"Nft赎回等待时间",value:"NftRedeemWaitingPeriod",units:0},{label:"初始定价",value:"APRi"},{label:"赎回手续费",value:"f1"},{label:"利息佣金",value:"f2"}],U=[{label:"产品周期",value:"ED",units:0},{label:"initialAnchor",value:"initialAnchor",units:18},{label:"scalarRoot",value:"scalarRoot",units:18},{label:"赎回手续费",value:"f1",units:18},{label:"利息佣金",value:"f2",units:18}];function UpdateVaultParams(e){let{paramList:t,vault:a,protocoSettingAddress:i}=e,o=(0,T.useMemo)(()=>t.map(e=>({...e,label:"".concat(e.label,"(").concat(e.value,")")})),[t]),[{value:l,param:d},c]=(0,h.Z)({value:"",param:o[0]}),{data:m,refetch:p}=(0,v.uX)({contracts:t.map(e=>({abi:u.$4,address:i,functionName:"vaultParamValue",args:[a,(0,w.$G)(e.value,{size:32})]}))}),f=(0,T.useMemo)(()=>(m||[]).map((e,a)=>{let n=t[a];return"".concat(n.label,"(").concat(n.value,"): ").concat((0,j.b)(e.result||0n,"number"==typeof n.units?n.units:10))}),[m]),k="number"==typeof d.units?d.units:10,[N,P]=(0,g.Z)();return(0,n.jsxs)(r.Ak,{tit:"Vault Param Vaule",children:[(0,n.jsx)(b.ZP,{classNames:r.At,maxMenuHeight:P.height+110,value:d,options:o,onChange:e=>c({param:e})}),(0,n.jsx)("input",{value:l.toString(),onChange:e=>{let t=(e.target.value||"").replaceAll("-","").replaceAll("+","");c({value:t})},type:"number",className:(0,x.cn)(r.pk),pattern:"[0-9.]{36}",step:1,placeholder:"0"}),(0,n.jsx)(s.vZ,{tx:"Write",config:{abi:u.$4,address:i,functionName:"updateVaultParamValue",args:[a,(0,w.$G)(d.value,{size:32}),(0,A.v)(l,k)]},onTxSuccess:()=>{c({value:""}),p()},className:" w-full flex items-center justify-center gap-4"}),(0,n.jsx)("div",{className:"text-sm flex flex-col items-start",ref:N,children:f.map((e,t)=>(0,n.jsx)("div",{children:e},"info_".concat(t)))})]})}function UpdateVaultPrice(e){let{vc:t}=e,[{feed:a},i]=(0,h.Z)({feed:""});return(0,n.jsxs)(r.Ak,{tit:"Vault Price Feed",children:[(0,n.jsx)("input",{type:"text",placeholder:"_assetTokenPriceFeed_",value:a,onChange:e=>i({feed:e.target.value}),className:(0,x.cn)(r.pk)}),(0,n.jsx)(s.vZ,{tx:"Write",config:{abi:u.WW,address:t.vault,functionName:"updatePriceFeed",args:[a]},onTxSuccess:()=>{i({feed:""})},className:" w-full flex items-center justify-center gap-4"})]})}function ClaimYieldsForBuyPool(e){let{vc:t}=e,{data:a}=(0,v.D2)({abi:u.aT,address:t.ptyPoolBelowAddress,functionName:"claimableYields"}),i=t.ptyPoolBelowAddress&&a||0n,[{address:o},l]=(0,h.Z)({address:""});return(0,n.jsxs)(r.Ak,{tit:"ClaimYields for Buy Low Pool",children:[(0,n.jsxs)("span",{children:["Yields: ",(0,k.d)(i)]}),(0,n.jsx)("input",{type:"text",placeholder:"recipient",value:o,onChange:e=>l({address:e.target.value}),className:(0,x.cn)(r.pk)}),(0,n.jsx)(s.vZ,{tx:"Write",disabled:!t.ptyPoolBelowAddress||i<=0n,config:{abi:u.aT,address:t.ptyPoolBelowAddress,functionName:"claimYields",args:[o]},className:"!mt-0  max-w-[100px] flex items-center justify-center gap-4"})]})}function SetTester(e){let{vc:t}=e,{data:a}=(0,v.D2)({abi:u.Og,address:t.assetTokenFeed,functionName:"getTestersCount"}),{data:i}=(0,v.D2)({abi:u.Og,address:t.assetTokenFeed,functionName:"owner"}),o=a||0n,{data:l}=(0,v.uX)({contracts:Array.from(Array(parseInt(o.toString()))).map((e,a)=>({abi:u.Og,address:t.assetTokenFeed,functionName:"getTester",args:[BigInt(a)]}))}),d=(null==l?void 0:l.map(e=>e.result))||[],[{address:c},m]=(0,h.Z)({address:""});return(0,n.jsxs)(r.Ak,{tit:"Set tester",children:[(0,n.jsxs)("div",{children:["Owner: ",i]}),(0,n.jsxs)("div",{children:["Tester Count: ",o.toString()]}),(0,n.jsx)("div",{children:"Testers"}),d.map(e=>(0,n.jsx)("div",{children:e},e)),(0,n.jsx)("input",{type:"text",placeholder:"recipient",value:c,onChange:e=>m({address:e.target.value}),className:(0,x.cn)(r.pk)}),(0,n.jsx)(s.vZ,{tx:"Write",disabled:!c,config:{abi:u.Og,address:t.assetTokenFeed,functionName:"setTester",args:[c,!0]},className:"!mt-0  max-w-[100px] flex items-center justify-center gap-4"})]})}function Erc20Approve(){let[e,t]=(0,h.Z)({token:"",spender:"",amount:0n});return(0,n.jsxs)(r.Ak,{tit:"Erc20Approve",children:[(0,n.jsx)("input",{type:"text",placeholder:"token",value:e.token,onChange:e=>t({token:e.target.value}),className:(0,x.cn)(r.pk)}),(0,n.jsx)("input",{type:"text",placeholder:"spender",value:e.spender,onChange:e=>t({spender:e.target.value}),className:(0,x.cn)(r.pk)}),(0,n.jsx)("input",{type:"text",placeholder:"amount",value:e.amount.toString(),onChange:e=>{try{t({amount:(0,x.su)(e.target.value,0)})}catch(e){}},className:(0,x.cn)(r.pk)}),(0,n.jsx)(s.vZ,{tx:"Write",disabled:!(0,N.U)(e.token)||!(0,N.U)(e.spender)||e.amount<=0n,config:{abi:P.Wo,address:e.token,functionName:"approve",args:[e.spender,e.amount]},className:"!mt-0 w-full flex items-center justify-center gap-4"})]})}let S=[{label:"赎回手续费",value:"C"}];function InitReinit(e){let{vault:t}=e,{data:a}=(0,v.uX)({contracts:[{abi:u.qU,address:t,functionName:"paramValue",args:[(0,w.$G)("D",{size:32})]},{abi:u.qU,address:t,functionName:"nftVtAmount"},{abi:u.qU,address:t,functionName:"nftVestingEndTime"},{abi:u.qU,address:t,functionName:"nftVestingDuration"},{abi:u.qU,address:t,functionName:"ytSwapPaymentToken"},{abi:u.qU,address:t,functionName:"ytSwapPrice"}]}),{data:s}=(0,v.D2)({abi:u.qU,address:t,functionName:"initialized"}),i=null==a?void 0:a.map(e=>{var t;return(null===(t=e.result)||void 0===t?void 0:t.toString())||""});return(0,n.jsx)(r.UT,{abi:u.qU,tit:"InitOrReinit",txProps:{disabled:"boolean"!=typeof s},functionName:s?"reInitialize":"initialize",address:t,argsDef:i},"lnt-vault-init")}function DeleteIpAssets(e){let{data:t}=(0,v.D2)({abi:u.j5,address:e.vault,functionName:"ipAssets"}),a={};return null==t||t.forEach(e=>{a[e]=m.LF[e]}),(0,n.jsx)(r.UT,{abi:u.j5,functionName:"removeIpAsset",address:e.vault,infos:JSON.stringify(a,void 0,2)},"b-vault-removeIpAsset")}function AdminPage(){let e=(0,p.p)(),{current:t,setState:a,options:s}=(0,f.G)(),m=(0,l.I$)();return(0,n.jsx)(i.E,{children:(0,n.jsx)("div",{className:"w-full flex",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4 w-full max-w-[840px] mx-auto px-5",children:[(0,n.jsx)("div",{className:"text-lg whitespace-pre-wrap p-2 bg-primary/20 rounded-xl",children:JSON.stringify({Decimal18:"000000000000000000"},void 0,2)}),(0,n.jsx)(b.ZP,{classNames:r.At,defaultValue:s[0],options:s,onChange:e=>e&&a({current:e})}),(null==t?void 0:t.type)=="L-Vault"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(UpdateVaultParams,{vault:t.data.vault,paramList:y,protocoSettingAddress:d.e_[e]}),(0,n.jsx)(UpdateVaultPrice,{vc:t.data}),["pauseMint","unpauseMint","pauseRedeem","unpauseRedeem","pauseUsbToMarginTokens","unpauseUsbToMarginTokens"].map(e=>(0,n.jsx)(r.UT,{functionName:e,abi:u.WW,address:t.data.vault},"l-vault-".concat(e))),(0,n.jsx)(r.UT,{abi:u.EF,functionName:"transferOwnership",address:d.Vq[e]}),(0,n.jsx)(ClaimYieldsForBuyPool,{vc:t.data}),(null==m?void 0:m.testnet)&&(0,n.jsx)(SetTester,{vc:t.data})]}),(null==t?void 0:t.type)=="P-Vault"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(UpdateVaultParams,{vault:t.data.vault,paramList:S,protocoSettingAddress:d.e_[e]}),["configureBlastYieldsAndGas","configureBlastPoints"].map(e=>(0,n.jsx)(r.UT,{abi:u.a4,functionName:e,address:t.data.vault},"p-vault-".concat(e)))]}),(null==t?void 0:t.type)=="B-Vault"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(UpdateVaultParams,{vault:t.data.vault,paramList:B,protocoSettingAddress:t.data.protocolSettingsAddress}),(0,n.jsx)(DeleteIpAssets,{vault:t.data.vault}),["addIpAsset","updateMaxIpAssets","updateC","close","pause","unpause","pauseRedeemPool","unpauseRedeemPool","addBribeToken","addBribes","setBriber"].map(e=>(0,n.jsx)(r.UT,{abi:u.j5,functionName:e,address:t.data.vault},"b-vault-".concat(e))),(0,n.jsx)(r.UT,{tit:"transferOwnership",abi:u.RR,functionName:"transferOwnership",address:t.data.protocolAddress}),(0,n.jsx)(r.UT,{tit:"upsertParamConfig",abi:u.$4,functionName:"upsertParamConfig",address:t.data.protocolSettingsAddress})]}),(null==t?void 0:t.type)=="Lnt-Vault"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(UpdateVaultParams,{vault:t.data.vault,paramList:R,protocoSettingAddress:t.data.protocolSettingsAddress}),(0,n.jsx)(InitReinit,{vault:t.data.vault}),["startEpoch1","updateNftDepositClaimableTime","depositNftVestingToken","withdrawNftVestingToken","addYtRewards"].map(e=>(0,n.jsx)(r.UT,{abi:u.qU,functionName:e,address:t.data.vault},"lnt-vault-".concat(e))),(0,n.jsx)(r.UT,{tit:"transferOwnership",abi:u.RR,functionName:"transferOwnership",address:t.data.protocolAddress}),(0,n.jsx)(r.UT,{tit:"upsertParamConfig",abi:u.$4,functionName:"upsertParamConfig",address:t.data.protocolSettingsAddress}),(null==m?void 0:m.testnet)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.UT,{tit:"mintMockNFT",abi:u.Oq,functionName:"safeMint",address:t.data.asset}),(0,n.jsx)(r.UT,{tit:"mintMockERC20",abi:u.vJ,functionName:"mint",address:t.data.vestingToken})]})]}),(null==t?void 0:t.type)=="B-Vault2"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(UpdateVaultParams,{vault:t.data.vault,paramList:U,protocoSettingAddress:t.data.protocalSettings}),["initialize","updateThreshold","pause","unpause"].map(e=>(0,n.jsx)(r.UT,{abi:o.t9,functionName:e,address:t.data.vault},"b-vault2-".concat(e))),(0,n.jsx)(r.UT,{tit:"updateYieldSwapHookHelper",abi:u.RR,functionName:"updateYieldSwapHookHelper",address:t.data.protocal}),(0,n.jsx)(r.UT,{tit:"transferOwnership",abi:u.RR,functionName:"transferOwnership",address:t.data.protocal}),(0,n.jsx)(r.UT,{tit:"upsertParamConfig",abi:u.$4,functionName:"upsertParamConfig",address:t.data.protocalSettings}),(null==m?void 0:m.testnet)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.UT,{tit:"mint (".concat((0,c.kb)(t.data.asset,e).symbol,")"),abi:u.vJ,functionName:"mint",address:t.data.asset}),(0,n.jsx)(r.UT,{tit:"setTester (".concat((0,c.kb)(t.data.asset,e).symbol,")"),abi:u.vJ,functionName:"setTester",address:t.data.asset})]}),t.data.mockInfraredVault&&(0,n.jsx)(r.UT,{tit:"MockInfraredVault addReward ".concat(t.data.mockInfraredVault),abi:o.mZ,functionName:"addReward",address:t.data.mockInfraredVault})]}),(0,n.jsx)(Erc20Approve,{})]})})})}},36213:function(e,t,a){"use strict";a.d(t,{HP:function(){return d},Pq:function(){return r},T_:function(){return l},aA:function(){return i},c1:function(){return o},mZ:function(){return c},oW:function(){return u},t9:function(){return s}});var n=a(74724);let s=(0,n.V)(["function initialized() view returns (bool)","function BT() external view returns (address)","function Points() external view returns (address)","function bootstrapStartTime() external view returns (uint256)","function bootstrapDuration() external view returns (uint256)","function bootstrapThreshold() external view returns (uint256)","function totalDeposits() external view returns (uint256)","function bootstrapSucceeded() public view returns (bool)","function bootstrapStarted() public view returns (bool)","function bootstrapEnded() public view returns (bool)","function bootstrapFailed() public view returns (bool)","function bootstrapping() public view returns (bool)","function currentEpochId() public view returns (uint256)","function epochIdCount() public view returns (uint256)","function epochIdAt(uint256 index) public view returns (uint256)","function epochInfoById(uint256 epochId) public view returns (Epoch memory)","struct Epoch {uint256 epochId;uint256 startTime;uint256 duration;address PT;address YT;}","function addLiquidity(uint256 amountBT, uint256 deadline) external returns (uint256 amountShares, uint256 amountPT, uint256 amountYT)","function removeLiquidity(uint256 shares, uint256 minAmountBT, uint256 deadline) external returns (uint256 amountBT, uint256 amountPT, uint256 amountYT)","function swapExactBTForPT(uint256 amountBT, uint256 minAmountPT, uint256 deadline) external returns (uint256 amountPT)","function swapExactPTForBT(uint256 amountPT, uint256 minAmountBT, uint256 deadline) external returns (uint256 amountBT)","function swapExactBTForYT(uint256 amountBT, uint256 amountBT1, uint256 minRefundBT, uint256 deadline) external returns (uint256 amountYT, uint256 refundBT)","function swapExactYTForBT(uint256 amountYT, uint256 minAmountBT, uint256 deadline) external returns (uint256 amountBT)","function initialize(uint256 _bootstrapStartTime, uint256 _bootstrapDuration, uint256 _bootstrapThreshold) external","function updateThreshold(uint256 _threshold) external","function pause() external","function unpause() external"]),r=(0,n.V)(["function deposit(address receiver,address tokenIn,uint256 amountTokenToDeposit,uint256 minSharesOut) external payable returns (uint256 amountSharesOut)","function redeem(address receiver,uint256 amountSharesToRedeem,address tokenOut,uint256 minTokenOut) external payable returns (uint256 amountTokenOut)","function previewDeposit(address tokenIn,uint256 amountTokenToDeposit) external view returns (uint256 amountSharesOut)","function previewRedeem(address tokenOut,uint256 amountSharesToRedeem) external view returns (uint256 amountTokenOut)","function getTokensIn() public view returns (address[] memory res)","function getTokensOut() public view returns (address[] memory res)","function exchangeRate() public view returns (uint256 res)"]);(0,n.V)(["function getYieldSwapHook(address bt) public view returns (address)"]);let i=(0,n.V)(["function mint(address BT, uint256 amount) external","function redeem(address BT, uint256 amount) external"]),u=(0,n.V)(["function redeem(address PT, uint256 amount) external"]),o=(0,n.V)(["function getAmountOutBTToVPT(uint256 amountBT) external view returns (uint256 amountVPT)","function getAmountOutVPTToBT(uint256 amountVPT) external view returns (uint256 amountBT)"]),l=(0,n.V)(["function quoteExactBTforYT(address hook,uint256 amountBT,uint256 amountBT1) external view returns (uint256 amountYT, uint256 expectedRefundBT)","function quoteExactYTforBT(address hook,uint256 amountYT) external view returns (uint256 amountBT)","function calcBT1ForSwapBTForYT(address hook,uint256 amountBT,uint256 tolerance) external view returns (uint256 bestAmountBT1, uint256 count)","struct LogData { uint256 BTtp;uint256 BTnet;uint256 Anet;uint256 PTc;uint256 YTc;uint256 vPT;uint256 pt;uint256 Feerate;uint256 ShareTotal;uint256 rateScalar;uint256 rateAnchor;}","function getLog(address protocol, address BT) external view returns(LogData memory log)","function calcRemoveLP(address protocol,address hook,address BT,uint256 shares) external view returns(uint256 amountBT, uint256 amountPT, uint256 amountYT)","function calcAddLP(address protocol,address hook,address BT,uint256 amountBT) external view returns(uint256 amountPT, uint256 amountYT, uint256 amountShares)","function earned(address irm, address user) external view returns(Earned[] memory)","struct Earned { address token; uint256 value;}"]),d=(0,n.V)(["function getUserRewards(address user) external view returns (uint256[] memory rewardAmounts)","function getRewardTokens() public view returns (address[] memory rewardTokens)","function claimRewards(address user) external","function updateRewardIndexes() external","function updateUserRewards(address user) external"]),c=(0,n.V)(["function addReward(address _rewardsToken, uint256 reward, uint256 rewardsDuration) external payable"])},85665:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var n=a(77317),s=a(17695),r=s.jU?n.useLayoutEffect:n.useEffect,i={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0},u=s.jU&&void 0!==window.ResizeObserver?function(){var e=(0,n.useState)(null),t=e[0],a=e[1],s=(0,n.useState)(i),u=s[0],o=s[1],l=(0,n.useMemo)(function(){return new window.ResizeObserver(function(e){if(e[0]){var t=e[0].contentRect;o({x:t.x,y:t.y,width:t.width,height:t.height,top:t.top,left:t.left,bottom:t.bottom,right:t.right})}})},[]);return r(function(){if(t)return l.observe(t),function(){l.disconnect()}},[t]),[a,u]}:function(){return[s.ZT,i]}},92851:function(e,t,a){"use strict";a.d(t,{R:function(){return s}});var n=a(34511);let s=(0,n.a)({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}})}},function(e){e.O(0,[4881,7495,7622,5294,3296,5736,2444,8178,9802,3960,544,1838,3668,2422,9109,1162,4195,6338,1744],function(){return e(e.s=74653)}),_N_E=e.O()}]);