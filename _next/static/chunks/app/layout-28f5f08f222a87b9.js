(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{79391:function(){},35576:function(e,t,n){Promise.resolve().then(n.t.bind(n,8367,23)),Promise.resolve().then(n.bind(n,8994)),Promise.resolve().then(n.t.bind(n,9487,23)),Promise.resolve().then(n.t.bind(n,29180,23)),Promise.resolve().then(n.t.bind(n,62888,23)),Promise.resolve().then(n.t.bind(n,82160,23)),Promise.resolve().then(n.t.bind(n,80265,23))},8994:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return PageLayout}});var s=n(31113),a=n(73216),l=n(22139),r=n(79099),o=n(87031),i=n(95889),c=n(19757),u=n(44769),d=n(59175),p=n(15506),v=n(3168),h=n(3367),f=n(33501),m=n(42487),g=n.n(m),x=n(69708),b=n(64103),S=n(44945),w=n(36847),B=n(44726),k=n(96670),T=n(35664),E=n(99971),j=n(41690),C=n.n(j),y=n(83960),A=n(23449),V=n(60986);let P=[...a.Af.map(e=>({name:e.name,icon:e.iconUrl||"/ETH.svg",chain:e})),{name:"Blast",icon:"blast.png",toUrl:"https://wand.fi/vaults"}];function SwitchChain(){let e=(0,d.p)(),t=P.find(t=>{var n;return(null===(n=t.chain)||void 0===n?void 0:n.id)==e}),[n,l]=(0,b.useState)(!1),{switchChain:r}=(0,V.o)(),o=(0,x.useRouter)(),onClickItem=e=>{e.chain&&(e!==t||v)?r({chainId:e.chain.id}):e.toUrl&&o.push(e.toUrl)},i=(0,b.useRef)(null);(0,A.Z)(i,()=>{l(!1)});let{chainId:c,isConnected:u}=(0,k.m)(),p=a.Af.find(e=>e.id==c),v=!p&&u;return t?(0,s.jsxs)(s.Fragment,{children:[v?(0,s.jsx)("div",{className:"flex items-center gap-2 text-sm font-bold rounded-lg cursor-pointer relative px-2 h-10 bg-red-500 text-white",onClick:()=>l(!0),children:"Wrong network"}):(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium rounded-lg cursor-pointer relative px-2 h-10",onClick:()=>l(!0),children:[(0,s.jsx)(C(),{width:24,height:24,src:t.icon,alt:""}),(0,s.jsx)("div",{className:"hidden sm:block",children:t.name})]}),n&&(0,s.jsx)("div",{className:"fixed bg-black/30 w-screen h-screen left-0 top-0 flex",children:(0,s.jsxs)("div",{ref:i,className:"bg-white shadow-sm dark:bg-slate-800 rounded-2xl m-auto w-full max-w-sm p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-lg font-extrabold",children:"Switch Networks"}),(0,s.jsx)("div",{className:"w-7 h-7 flex justify-center items-center rounded-full border border-slate-400 bg-black/5 hover:bg-black/20 cursor-pointer",onClick:()=>l(!1),children:(0,s.jsx)(y.q5L,{})})]}),(0,s.jsx)("div",{className:"mt-4",children:P.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-lg cursor-pointer ".concat(e!=t||v?"":"bg-indigo-400"),onClick:()=>onClickItem(e),children:[(0,s.jsx)(C(),{width:24,height:24,src:e.icon,alt:""}),(0,s.jsx)("div",{className:"",children:e.name})]},e.name))})]})})]}):null}var N=n(12045),D=n(6371);function Header(){let e=(0,x.usePathname)(),{width:t}=(0,B.Z)(window.innerWidth,window.innerHeight),n="/"!==e&&t<1024;(0,d.p)();let{openChainModal:m}=(0,h.iC)(),j=function(){var e,t,n,s;let a=(0,d.p)(),{address:c}=(0,k.m)(),{data:u}=(0,p.D2)({abi:r.WW,address:l.Px?null===(t=i.f_[a])||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.vault:null===(s=o.Fw[a])||void 0===s?void 0:null===(n=s[0])||void 0===n?void 0:n.vault,functionName:"owner",query:{enabled:!!c}});return!!c&&c==u}(),C=function(){var e,t;let n=(0,d.p)(),{address:s}=(0,k.m)(),{data:a}=(0,p.D2)({abi:r.Og,address:null===(t=c.iK[n])||void 0===t?void 0:null===(e=t[1])||void 0===e?void 0:e.assetTokenFeed,functionName:"isTester",args:[s],query:{enabled:!!s}});return!!a}(),y=(0,b.useMemo)(()=>{let e=[...l.Vi.includes("lnt")?[{href:"/lnt-vaults",label:"LNT-Vaults",icon:S.QZG}]:[...l.hc?[{href:"/bootstrap",label:"Bootstrap",icon:S.QZG,disable:!1}]:[],{href:"/ip-vaults",label:"IP-Vaults",icon:S.QZG,disable:!1},{href:"/portfolio",label:"Portfolio",icon:S.J4},{href:"/dashboard",label:"Dashboard",icon:S.FL4}]];return j&&e.push({href:"/admin",label:"Admin",icon:S.C5v}),(C||j)&&e.push({href:"/tester",label:"Tester",icon:S.rv8}),e},[j,C]),{chain:A,address:V}=(0,k.m)();A&&-1!=a.Af.findIndex(e=>e.id==A.id)&&a.Af.length;let P=(0,b.useMemo)(()=>[{name:"doc",url:(0,l.xb)(),icon:w.K99},{name:"Twitter",url:l.v,icon:w.J6q},{name:"Discord",url:l.Hj,icon:w.HpO}],[u.Kh.value]);return(0,s.jsx)("div",{className:"h-[72px] fixed w-full flex bg-slate-50/30 backdrop-blur-lg dark:text-slate-50 dark:bg-slate-900/30 z-30",children:(0,s.jsxs)("header",{className:"h-[72px] w-full max-w-[1300px] inset-0 mx-auto flex items-center justify-between px-4   z-30 ml-[calc(100vw - 100%)] ",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)(g(),{href:"/",className:"font-semibold flex pr-1 items-center text-base leading-7",children:[(0,s.jsx)(E.c,{symbol:"logo-alt",size:52}),(0,s.jsx)("span",{className:"font-poppins",style:{display:n?"none":"inline-block"},children:"Wand"})]}),(0,s.jsxs)(v.fC,{children:[(0,s.jsxs)(v.xz,{className:(0,f.Z)("flex text-slate-500 dark:text-slate-50 font-medium items-center capitalize text-sm whitespace-nowrap",{hidden:!n}),children:[e.split("/")[1],(0,s.jsx)(w.YRR,{})]}),(0,s.jsx)(v.Uv,{children:(0,s.jsx)(v.VY,{className:"z-50 bg-white p-1 border border-slate-200 shadow-lg rounded-md dark:bg-gray-800 dark:border-gray-700",children:y.map(e=>{let{href:t,label:n,icon:a,disable:l}=e;return(0,s.jsx)(v.ck,{children:l?(0,s.jsx)(D.C,{node:(0,s.jsxs)(g(),{className:"flex items-center text-slate-500 text-sm font-medium gap-1 px-3 py-2 rounded-sm hover:bg-slate-50 dark:text-slate-50 dark:hover:bg-gray-700/30",href:"javascript:void(0);",children:[(0,s.jsx)(a,{}),n]}),children:"Coming Soon"}):(0,s.jsxs)(g(),{className:"flex items-center text-slate-500 text-sm font-medium gap-1 px-3 py-2 rounded-sm hover:bg-slate-50 dark:text-slate-50 dark:hover:bg-gray-700/30",href:t,children:[(0,s.jsx)(a,{}),n]})},n)})})})]})]}),(0,s.jsx)("div",{className:"hidden lg:flex flex-1 px-5 items-center gap-10",children:y.map(t=>{let{href:n,label:a,icon:l,disable:r}=t;return r?(0,s.jsx)(D.C,{node:(0,s.jsxs)(g(),{className:"text-sm font-medium flex gap-1 items-center transition-all active:translate-y-1 text-slate-700 dark:text-slate-50 opacity-50",href:"javascript:void(0);",children:[(0,s.jsx)(l,{}),a]}),children:"Coming Soon"}):(0,s.jsxs)(g(),{className:(0,f.Z)("text-sm font-medium flex gap-1 items-center transition-all active:translate-y-1",e===n?"text-slate-700 dark:text-slate-50":"text-slate-500 dark:text-slate-50/50"),href:n,children:[(0,s.jsx)(l,{}),a]},n)})}),(0,s.jsxs)("div",{className:"flex items-center gap-1 md:gap-4",children:[(0,s.jsx)(N.h,{}),(0,s.jsx)("div",{className:"hidden lg:flex items-center gap-3",children:P.map(e=>{let{url:t,icon:n,name:a}=e;return(0,s.jsx)(g(),{href:t,className:"text-slate-300 hover:text-primary",children:(0,s.jsx)(n,{})},a)})}),(0,s.jsx)(SwitchChain,{}),(0,s.jsx)(T.Z,{})]})]})})}var U=n(23647),R=n(47259),L=n(15680),H=n(4410),I=n(4356),Y=n(87142),F=n(74882),O=n(38422),_=n(14266),W=n(178),M=n(78246),q=n(62753),Z=n(8887),z=n(45066),G=n(11522),K=n(45248),J=n(99946),X=n(52671),$=n(85895),Q=n(8912),ee=n(7915),et=n(32417),en=n(83037),es=n(26276),ea=n(9793);BigInt.prototype.toJSON=function(){return this.toString()};let el=new $.f({uri:"https://api.studio.thegraph.com/query/45897/wand/version/latest",cache:new Q.h}),er=new et.S({defaultOptions:{queries:{retry:3}}});function Providers(e){let{children:t}=e,[n,l]=b.useState();b.useEffect(()=>{let e=(0,Z.o)({storage:{getItem:e=>window.localStorage.getItem(e),removeItem:e=>window.localStorage.removeItem(e),setItem:(e,t)=>{"wagmi.cache"!==e&&localStorage.setItem(e,t)}}}),t=(0,h.a3)([{groupName:"Recommended",wallets:[I.U,Y.P,F.D,O.c,_.X,W.J,M.b,q.D]}],{appName:"ZooFi",projectId:"abf1f323cd9ff9f6a27167188d993168"});l((0,z._)({connectors:t,storage:e,chains:a.Af,client:e=>{let{chain:t}=e;return(0,es.e)({chain:t,transport:(0,ea.d)(void 0,{batch:a.Xp}),batch:{multicall:a.y1}})}}))},[]);let r=(0,N.l)(e=>e.theme);return n?(0,s.jsx)(ee.e,{client:el,children:(0,s.jsx)(G.F,{config:n,children:(0,s.jsx)(en.aH,{client:er,children:(0,s.jsx)(J.QueryParamProvider,{adapter:K.Z,children:(0,s.jsx)(h.pj,{locale:"en-US",modalSize:"compact",theme:"dark"===r?(0,L.$)({accentColor:"green"}):(0,H.W)(),children:(0,s.jsx)(X.A,{children:t})})})})})}):null}var eo=n(63126);function PageLoading(){let e=(0,U.N)();return(0,s.jsx)("div",{className:(0,eo.cn)("top-loader fixed z-10 top-0 left-0",e?"visible":"invisible")})}function PageLayout(e){let{children:t}=e;return(0,u.Vi)(),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(Providers,{children:[(0,s.jsx)(Header,{}),t]}),(0,s.jsx)(R.x,{position:"top-right",offset:70}),(0,s.jsx)(PageLoading,{})]})}BigInt.prototype.toJSON=function(){return this.toString()}},35664:function(e,t,n){"use strict";n.d(t,{Z:function(){return ConnectBtn}});var s=n(31113),a=n(3367),l=n(44726),r=n(96670),o=n(60689);function ConnectBtn(){(0,l.Z)(1024);let{isConnected:e,chainId:t}=(0,r.m)(),n=(0,a.We)();return e?(0,s.jsx)(a.NL,{chainStatus:"none",showBalance:!1}):(0,s.jsx)(o.k6,{className:"mt-0 w-fit",onClick:()=>{var e;return null===(e=n.openConnectModal)||void 0===e?void 0:e.call(n)},children:(0,s.jsx)("span",{className:"font-medium text-sm px-5 whitespace-nowrap",children:"Connect Wallet"})})}},99971:function(e,t,n){"use strict";n.d(t,{c:function(){return CoinIcon}});var s=n(31113),a=n(28070);let l=a.env.NEXT_PUBLIC_BASE_PATH||"";var r=n(63126);let o={BERA:"BERA.svg",balance:"balance.png",berachain:"berachain.svg",berahub:"berahub.svg",bg_home:"bg_home.svg",blackLine:"blackLine.svg",Bull:"Bull.svg",coin:"coin.png",discord:"discord.png",discount:"discount.png",ETH:"ETH.svg",ethfi:"ethfi.png",ETHx:"ETHx.svg",galxe:"galxe.png",gift:"gift.png",gold:"gold.png",greenCycle:"greenCycle.png",GreenDot:"GreenDot.svg","HONEY-USDC":"HONEY-USDC.svg","USDC-HONEY":"HONEY-USDC.svg","HONEY-WBERA":"HONEY-WBERA.webp","HONEY-WBTC":"HONEY-WBTC.svg","HONEY-WETH":"HONEY-WETH.svg",HONEY:"HONEY.svg",iBGT:"iBGT.webp",iRED:"iRED.svg","logo-alt":"logo-alt.svg",Panda:"Panda.svg",piRED:"piRED.svg","status-green":"status-green.svg","status-red":"status-red.svg",twitter:"twitter.png",USDC:"USDC.svg",USDCx:"USDCx.svg",USDT:"USDT.svg",Venom:"Venom.svg",WBERA:"WBERA.svg",WBTC:"WBTC.svg",WBTCx:"WBTCx.svg",weeth:"weeth.png",weETH:"weETH.svg",weETHx:"weETHx.svg",WETH:"WETH.svg",xBERA:"xBERA.svg",xiBGT:"xiBGT.svg",yiRED:"yiRED.svg",ZUSD:"ZUSD.svg",PToken:"PToken.svg",YToken:"YToken.svg",verio:"verio.svg",vIP:"vIP.svg",pvIP:"PToken.svg",yvIP:"YToken.svg",LPvIP:"LPvIP.svg",bvIP:"bvIP.svg"};function CoinIcon(e){let{symbol:t,size:n=48,url:a,...i}=e,c=o[t],u="".concat(l,"/").concat(c);return t?c||a?(0,s.jsx)("img",{...i,className:(0,r.cn)(i.className),width:n,height:n,src:c?u:a,alt:t}):(0,s.jsxs)("svg",{...i,width:n,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("text",{className:"fill-primary/60",width:"20",x:"12",y:"12",textAnchor:"middle",fontSize:12,dominantBaseline:"middle",children:t.slice(0,2)}),(0,s.jsx)("circle",{className:"stroke-primary/60",cx:"12",cy:"12",r:"11.5",strokeWidth:1})]}):null}},6371:function(e,t,n){"use strict";n.d(t,{C:function(){return Tip}});var s=n(31113),a=n(63126),l=n(52653),r=n(55966);function Tip(e){let{children:t,node:n,className:o,inFlex:i}=e,c=document.getElementById("tooltip-root");return t?(0,s.jsx)(l.zt,{children:(0,s.jsxs)(l.fC,{children:[(0,s.jsx)(l.xz,{asChild:!0,onClickCapture:e=>{e.preventDefault(),e.stopPropagation()},children:n?(0,s.jsx)("div",{className:(0,a.cn)("inline-block cursor-default",o),style:{verticalAlign:"text-bottom"},children:n}):(0,s.jsx)("div",{className:(0,a.cn)(i?"flex":"translate-y-[-6%] inline-block"," px-[3px] cursor-default relative",o),children:(0,s.jsx)(r.apP,{className:"inline-block stroke-slate-500"})})}),(0,s.jsx)(l.h_,{container:c,children:(0,s.jsxs)(l.VY,{className:"max-w-xs text-sm text-white bg-slate-900 shadow-lg dark:bg-[#333333] rounded-md p-4",children:[t,(0,s.jsx)(l.Eh,{})]})})]})}):n}},95889:function(e,t,n){"use strict";n.d(t,{EI:function(){return a},f_:function(){return r}});var s=n(51186);let a=3,l={[s.F.id]:"0x31C410AEF663FEbDD7A2F1cCF0a4487CDcD56fdA"},r={[s.F.id]:[{vault:"0xEF14D1D8128f496f798f6721713D41070F17A727",asset:"0x2020cAB606cF79169A0f3F6Eb3E710326C4a4C1B",assetName:"Era NFT",assetSymbol:"ERA",assetLogo:"",vestingToken:"0xa10519209B4F6c8Ec22Fda6733a103D3e24F4C39",vestingSymbol:"MkRC20",vestingDecimals:18,vToken:"0x0A126144121Db990a066d63b02589D68104909cF",vTokenSymbol:"vERA",yTokenSymbol:"yERA",protocolAddress:"0x896774931349919B71Ec251CCbA1C6AB1FEb45C4",protocolSettingsAddress:"0xD91C388453042a2214Ad085df76A9E08Bc701f23",queryAddres:l[s.F.id],nftStakingPool:"0x73FA161A679020872356Eea8B6648F3D026228D1",onEnv:["betalnt"]}]}},88439:function(e,t,n){"use strict";n.d(t,{b:function(){return useMemoOfChainId}});var s=n(64103),a=n(59175);function useMemoOfChainId(e){let t=(0,a.p)(),n=(0,s.useRef)({});return(0,s.useMemo)(()=>(n.current[t]||(n.current[t]=e()),n.current[t]),[t])}},45438:function(e,t,n){"use strict";n.d(t,{i:function(){return u},p:function(){return useUpdatePtypoolApy}});var s=n(19757),a=n(22139),l=n(8298),r=n(64103),o=n(33737),i=n(93108),c=n(59175);let u=(0,i.Ue)(e=>({update:e}));function useUpdatePtypoolApy(e){let t=(0,c.p)(),n=s.iK[t]||[],i=(0,l.o)(e=>e.sliceLVaultsStore.lvaults,["sliceLVaultsStore.lvaults"]);(0,r.useEffect)(()=>{console.info("updatePtypoolApy"),null==n||n.forEach(n=>{let l=i[n.vault];if(n.ptyPoolAboveAddress&&l&&l.sellPoolTotalStaking&&u.getState().update({[n.ptyPoolAboveAddress]:{staking:(0,o.v)("0.025",10),matching:0n}}),n.ptyPoolBelowAddress&&l&&l.buyPoolTotalStaking&&!l.isStable){let r=l&&l.sellPoolTotalStaking*e[s.O1[t]],o=r>0n&&l.settingsDecimals>0n?l.M_ETHx*l.Y*e[n.xTokenAddress]*a.Pq/2n/r/l.settingsDecimals**10n:0n;u.getState().update({[n.ptyPoolBelowAddress]:{staking:o*10n**10n/a.Pq,matching:0n}})}})},[n,i,e,t])}},15506:function(e,t,n){"use strict";n.d(t,{D2:function(){return useWandContractRead},uX:function(){return useWandContractReads}}),n(78403);var s=n(83978),a=n.n(s);n(64103);var l=n(30308),r=n(59307),o=n(93108);let i=(0,o.Ue)(e=>({time:a().now(),update:()=>{e({time:a().now()})}}));function useWandContractRead(e){let{time:t}=i();return(0,l.u)({...e,query:{placeholderData:e=>e,refetchOnMount:!1,refetchOnWindowFocus:!1,...e.query||{}},wandtime:t})}function useWandContractReads(e){let{time:t}=i();return(0,r.N)({...e,query:{placeholderData:e=>e,refetchOnMount:!1,refetchOnWindowFocus:!1,...e.query||{}},wandtime:t})}},52671:function(e,t,n){"use strict";n.d(t,{g:function(){return g},A:function(){return FetcherProvider}});var s=n(31113),a=n(19757),l=n(22139),r=n(59175),o=n(64103),i=n(25233),c=n(87958),u=n(41340),d=n(73216),p=n(88439),v=n(45438),h=n(63126),f=n(18358),m=n(39577);let g=(0,o.createContext)({prices:(0,h.Yb)({},0n),usbApr:{apr:0n,aprDecimals:10}}),FetcherProvider=e=>{let{children:t}=e;(0,f.d6)();let n=(0,r.p)();!function(){let{chainId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.m)({chainId:e});o.useMemo(()=>(t&&(d.ON.provider=function(e){var t,n;let{chain:s,transport:a}=e,l={chainId:s.id,name:s.name,ensAddress:null===(n=s.contracts)||void 0===n?void 0:null===(t=n.ensRegistry)||void 0===t?void 0:t.address};return"fallback"===a.type?new c.H(a.transports.map(e=>{let{value:t}=e;return new u.r(null==t?void 0:t.url,l)})):new u.r(a.url,l)}(t)),d.ON.provider),[t])}();let x=(0,p.b)(()=>(0,h.Yb)({[a.O1[n]]:l.Pq},0n));(0,m.$$)(x);let b=(0,m.UM)();return(0,v.p)(x),(0,s.jsx)(g.Provider,{value:{prices:x,usbApr:b},children:t})}},18358:function(e,t,n){"use strict";n.d(t,{R3:function(){return useUpBVaultForUserAction},Vw:function(){return useEpochesData},Zd:function(){return useBVaultEpoches},d6:function(){return useResetBVaultsData},gz:function(){return useCalcClaimable},lL:function(){return calcBVaultPTApy},nr:function(){return useBVault},oU:function(){return useBVaultApy},v7:function(){return useBVaultBoost}});var s=n(22139),a=n(59175),l=n(63126),r=n(84944),o=n(83978),i=n.n(o),c=n(64103),u=n(96670),d=n(8298);function useResetBVaultsData(){let e=(0,a.p)(),{address:t}=(0,u.m)();(0,c.useEffect)(()=>{},[e]),(0,c.useEffect)(()=>{d.w.getState().sliceUserBVaults.reset()},[t])}function useBVault(e){return(0,d.o)(t=>t.sliceBVaultsStore.bvaults[e]||(0,l.Yb)({current:(0,l.Yb)({},0n)},0n),["sliceBVaultsStore.bvaults.".concat(e)])}function useBVaultEpoches(e){return(0,d.o)(t=>{let n=t.sliceBVaultsStore.bvaults[e];if(!n||n.epochCount<=0n)return[];let s=i().range(1,parseInt((n.epochCount+1n).toString())).reverse(),a=t.sliceBVaultsStore.epoches;return s.map(t=>a["".concat(e,"_").concat(t)]).filter(e=>null!=e)},["sliceBVaultsStore.bvaults.".concat(e),"sliceBVaultsStore.epoches"])}function useEpochesData(e){let t=useBVaultEpoches(e),n=(0,d.o)(t=>t.sliceUserBVaults.epoches[e]||[],["sliceUserBVaults.epoches.".concat(e)]);return(0,c.useMemo)(()=>{let e=n.reduce((e,t)=>({...e,[t.epochId.toString()]:t}),{});return t.map(t=>(0,l.Yb)({...t,...e[t.epochId.toString()]||{bribes:[],sBribes:[],aBribes:[]}},0n))},[t,n])}function useCalcClaimable(e){let t=useEpochesData(e);return(0,c.useMemo)(()=>{let e=t.filter(e=>e.claimableAssetBalance&&e.settled);return{ids:e.map(e=>e.epochId),claimable:e.reduce((e,t)=>e+t.claimableAssetBalance,0n)}},[t])}function useBVaultBoost(e){let t=(0,d.o)(()=>(function(e){let t=d.w.getState(),n=t.sliceBVaultsStore.bvaults[e],a=(null==n?void 0:n.current.vaultYTokenBalance)||0n,l=(null==n?void 0:n.Y)||0n,o=l>0n?a*s.Pq/l:0n,i=(null==n?void 0:n.current.yTokenAmountForSwapYT)||0n,c=(null==n?void 0:n.lockedAssetTotal)||0n,u=i>0n?c*s.Pq/i:0n;return console.info("calcBootst:",(0,r.d)(o),(0,r.d)(u)),s.Pq,o})(e),["sliceBVaultsStore.bvaults.".concat(e)]);return[(0,r.d)(t,0),t]}function calcBVaultPTApy(e){let t=d.w.getState(),n=t.sliceBVaultsStore.bvaults[e.vault],a=(0,l.ok)(t.sliceBVaultsStore.yTokenSythetic,[e.vault]),r=0n;return r=e.pTokenV2?n&&n.ptRebaseRate&&n.pTokenTotal?n.ptRebaseRate/s.Pq*s.SH*BigInt(1e10)/n.pTokenTotal/s.Pq:0n:n&&n.current.assetTotalSwapAmount&&a?n.current.assetTotalSwapAmount*s.SH*BigInt(1e10)/a:0n,console.info("apy:",e.vault,r,e.pTokenV2,null==n?void 0:n.ptRebaseRate,null==n?void 0:n.pTokenTotal),r}function useBVaultApy(e){let t=(0,d.o)(()=>calcBVaultPTApy(e),["sliceBVaultsStore.bvaults.".concat(e.vault),"sliceBVaultsStore.yTokenSythetic.".concat(e.vault)]);return[(0,l.Jh)(t,10),t]}function useUpBVaultForUserAction(e,t){let{address:n}=(0,u.m)();return()=>{(0,l.XD)(async()=>{if(null==t||t(),!n)return;await Promise.all([d.w.getState().sliceTokenStore.updateTokensBalance([e.asset,e.pToken],n),d.w.getState().sliceTokenStore.updateTokenTotalSupply([e.asset,e.pToken]),d.w.getState().sliceBVaultsStore.updateBvaults([e]),d.w.getState().sliceBVaultsStore.updateYTokenSythetic([e])]);let s=d.w.getState().sliceBVaultsStore.bvaults[e.vault];await d.w.getState().sliceBVaultsStore.updateEpoches(e,s.epochCount>1n?[s.epochCount,s.epochCount-1n]:[s.epochCount]);let a=[];for(let t=parseInt(s.epochCount.toString());t>0;t--){let n=d.w.getState().sliceBVaultsStore.epoches["".concat(e.vault,"_").concat(t)];a.push(n)}console.info("onUserAction:epoches",a),await d.w.getState().sliceUserBVaults.updateEpoches(e,n,a)},3,1e3)}}},39577:function(e,t,n){"use strict";n.d(t,{$$:function(){return useSetLVaultPrices},UM:function(){return useUSBApr},aS:function(){return useValutsLeverageRatio},hC:function(){return useLVault},hY:function(){return useUserLVault},so:function(){return useUpLVaultOnUserAction},z6:function(){return useVaultLeverageRatio}});var s=n(19757),a=n(22139),l=n(59175),r=n(88439),o=n(63126),i=n(8298),c=n(96670),u=n(73216);let d=(0,o.Yb)({vaultMode:0,discountEnable:!1},0n),p=(0,o.Yb)({},0n);function useLVault(e){return(0,i.o)(t=>t.sliceLVaultsStore.lvaults[e]||d,["sliceLVaultsStore.lvaults.".concat(e)])}function useUserLVault(e){return(0,i.o)(t=>t.sliceLVaultsStore.user[e]||p,["sliceLVaultsStore.user.".concat(e)])}function useVaultLeverageRatio(e){let t=useLVault(e.vault),n=(0,o.pF)(t.aar,t.AARDecimals);return Math.max(0,1+1/(n-1))}function useValutsLeverageRatio(){let e=(0,l.p)(),t=s.iK[e]||[],n=(0,r.b)(()=>(0,o.Yb)({},0)),a=(0,i.o)(e=>e.sliceLVaultsStore.lvaults);return null==t||t.forEach(e=>{let t=a[e.vault],s=t?(0,o.pF)(t.aar,t.AARDecimals):0;n[e.vault]=Math.max(0,1+1/(s-1))}),n}function useSetLVaultPrices(e){var t;let n=(0,i.o)(e=>e.sliceLVaultsStore.lvaults),r=(0,i.o)(e=>e.sliceTokenStore.totalSupply),o=(0,l.p)();null===(t=s.iK[o])||void 0===t||t.forEach(t=>{let l=n[t.vault]||d,i=l.assetBalance,c=l.latestPrice,u=l.usbTotalSupply,p=r[t.xTokenAddress]||0n,v=p>0n&&i>0n&&c>0n&&u>0n&&i*c>u*a.Pq?(i*c-u*a.Pq)/p:0n;e[t.xTokenAddress]=v,e[t.assetTokenAddress]=c,p>0n&&i>0n&&c>0n&&u>0n&&i*c<u*a.Pq&&(e[s.O1[o]]=i*c/u)})}function useUSBApr(){var e;let t=(0,l.p)(),n=(0,i.o)(e=>e.sliceLVaultsStore.lvaults),a=0,r=0n,o=0n;return null===(e=s.iK[t])||void 0===e||e.forEach(e=>{let t=n[e.vault]||d;t.isStable?(r+=t.M_USB_USDC*t.Y*t.aar/10n**t.AARDecimals,o+=t.M_USB_USDC,t.M_USB_USDC>0n&&t.Y>0n&&a++):(r+=t.M_USB_ETH*t.Y,o+=t.M_USB_ETH,t.M_USB_ETH>0n&&t.Y>0n&&a++)}),{apr:o>0n?r/o:0n,aprDecimals:10}}function useUpLVaultOnUserAction(e){let{address:t}=(0,c.m)();return()=>{(0,o.XD)(async()=>{if(!t)return;let n=i.w.getState().sliceLVaultsStore,a=[e.assetTokenAddress,e.xTokenAddress,s.O1[(0,u.BV)()]];await Promise.all([n.updateLVaults([e]),n.updateUserLVault(e,t),i.w.getState().sliceTokenStore.updateTokensBalance(a,t),i.w.getState().sliceTokenStore.updateTokenTotalSupply(a)])},3,1e3).catch(console.error)}}},8367:function(){}},function(e){e.O(0,[4881,5294,7495,7622,3113,7073,6121,2466,2882,9637,2653,2487,3960,2814,2206,5357,1749,8298,7093,604,1744],function(){return e(e.s=35576)}),_N_E=e.O()}]);