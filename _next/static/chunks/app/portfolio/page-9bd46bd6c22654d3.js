(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5444],{8631:function(e,t,n){Promise.resolve().then(n.bind(n,94234))},94234:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Dashboard}});var s=n(31113),l=n(44939),a=n(75496),o=n(31889),r=n(99971);n(6371),n(19757);var i=n(59175),c=n(26361);n(39577),n(36602);var u=n(84944),d=n(55349),p=n(87031),m=n(22139),f=n(44020),v=n(18358),x=n(64103);n(83978);var h=n(69708),S=n(55746),b=n(59781),T=n(26619);function PortfolioItem(e){let{title:t,sub:n,tHeader:l,tData:o,tableProps:r}=e;return(0,s.jsxs)("div",{className:"card whitespace-nowrap",children:["string"==typeof t?(0,s.jsx)("div",{className:"text-2xl leading-none font-semibold",children:t}):t,"string"==typeof n?(0,s.jsx)("div",{className:"text-[2rem] text-primary leading-none font-semibold mt-2",children:n}):n,(0,s.jsx)("div",{className:"my-4 h-[1px] bg-border/60 dark:bg-border"}),(0,s.jsx)("div",{className:"w-full overflow-x-auto",children:(0,s.jsx)(a.ZP,{headerClassName:"border-b-0",tbodyClassName:"text-sm font-medium",header:l,data:o,...r||{}})})]})}function IconTitle(e){return(0,s.jsxs)("div",{className:"flex text-2xl leading-none font-semibold items-center gap-4",children:[(0,s.jsx)(r.c,{symbol:e.icon,size:32}),(0,s.jsx)("span",{children:e.tit})]})}function CoinText(e){return(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(r.c,{symbol:e.symbol,size:e.size||20}),(0,s.jsx)("span",{children:e.txt||e.symbol})]})}function PrincipalItem(){let e=(0,h.useRouter)(),t=(0,i.p)(),n=(0,x.useMemo)(()=>p.Fw[t].filter(e=>(e.onEnv||[]).includes(m.Vi)),[t]),l=(0,x.useMemo)(()=>{let t=d.w.getState(),inRedeem=e=>(t.sliceUserBVaults.epoches[e.vault]||[]).reduce((e,t)=>e+t.redeemingBalance,0n),claimAble=e=>(t.sliceUserBVaults.epoches[e.vault]||[]).reduce((e,t)=>e+t.claimableAssetBalance,0n),yieldDay=e=>{let n=t.sliceTokenStore.balances[e.pToken]||0n;return(0,v.lL)(e.vault)*n/10n**10n/365n},l=n.map(e=>{var n,s,l;let a=t.sliceTokenStore.balances[e.pToken]||0n,o=inRedeem(e),r=claimAble(e),i=a+o+r,c=f.P[e.asset],[d,p]=c?e.assetSymbol.split("-"):["",""],m=(null===(n=t.sliceBVaultsStore.bvaults[e.vault])||void 0===n?void 0:n.lpLiq)||0n,v=(null===(s=t.sliceBVaultsStore.bvaults[e.vault])||void 0===s?void 0:s.lpBase)||0n,x=(null===(l=t.sliceBVaultsStore.bvaults[e.vault])||void 0===l?void 0:l.lpQuote)||0n,h=c&&m&&v&&i?i*v/m:0n,S=c&&m&&x&&i?i*x/m:0n,b=(0,u.d)(i);return{bvc:e,pBalance:a,pRedeeming:o,pClaimAble:r,lp:c,baseSymbol:d,quoteSymbol:p,uBase:h,uQuote:S,pTotalUser:i,fmtTotalUser:b}}).filter(e=>e.pTotalUser>0n),a=l.reduce((e,t)=>Math.max(e,t.fmtTotalUser.length),0),o=Math.round(5*a+20);return l.map(t=>{let{bvc:n,pBalance:l,pRedeeming:a,pClaimAble:r,lp:i,fmtTotalUser:c,baseSymbol:d,quoteSymbol:p,uBase:m,uQuote:f}=t;return[(0,s.jsx)(CoinText,{symbol:n.assetSymbol,txt:n.pTokenSymbol,size:32},"coin"),(0,u.d)(l),(0,u.d)(a),(0,s.jsxs)("div",{className:"flex w-fit cursor-pointer items-center gap-2 underline",onClick:()=>(0,b.rc)(e,n.vault,"principal_panda","claim"),children:[(0,u.d)(r),(0,s.jsx)(S.HV3,{})]},"claim"),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{style:{width:o},children:c}),i&&(0,s.jsxs)("div",{children:[(0,s.jsx)(CoinText,{size:14,symbol:d,txt:(0,u.d)(m)}),(0,s.jsx)(CoinText,{size:14,symbol:p,txt:(0,u.d)(f)})]})]},"total"),(0,s.jsx)(T.sp,{bvc:n},"apy"),(0,u.d)(yieldDay(n))]})},[n,d.w.getState()]);return(0,s.jsx)(PortfolioItem,{title:(0,s.jsx)(IconTitle,{tit:"Principal Token",icon:"PToken"}),tHeader:["","Balance","In Redemption","Claimable","Total Amount","APY","Est.Yield/day"],tData:l})}function BoostItem(){let e=(0,h.useRouter)(),t=(0,i.p)(),n=(0,x.useMemo)(()=>p.Fw[t].filter(e=>(e.onEnv||[]).includes(m.Vi)),[t]),l=(0,x.useMemo)(()=>{let t=d.w.getState(),epochInfo=(e,n)=>t.sliceBVaultsStore.epoches["".concat(e,"_").concat(n)],l=n.map(e=>{let n=t.sliceUserBVaults.epoches[e.vault]||[],s=n.map(n=>{var s;return{...n,epochInfo:epochInfo(e.vault,parseInt(n.epochId.toString())),settled:(null===(s=t.sliceBVaultsStore.epoches["".concat(e.vault,"_").concat(parseInt(n.epochId.toString()))])||void 0===s?void 0:s.settled)||!1}}).filter(e=>!!e.epochInfo);return{bvc:e,epochsData:s}}).filter(e=>e.epochsData.length);return l.map(t=>{let{bvc:n,epochsData:l}=t;return[(0,s.jsx)(CoinText,{symbol:n.assetSymbol,txt:n.yTokenSymbol,size:32},"coin"),(0,s.jsx)("div",{children:l.map(e=>(0,s.jsxs)("div",{className:"flex items-baseline",children:[(0,s.jsxs)("div",{className:"w-[4rem]",children:["Epoch ",e.epochId.toString()]}),(0,s.jsxs)("div",{className:"opacity-60 text-xs",children:[(0,c.G$)(1000n*e.epochInfo.startTime)," - ",(0,c.G$)((e.epochInfo.startTime+e.epochInfo.duration)*1000n)]})]},e.epochId.toString()))},"epochs"),(0,s.jsx)("div",{children:l.map(e=>(0,s.jsx)("div",{children:(0,u.d)(e.userBalanceYToken)},e.epochId.toString()))},"amount"),(0,s.jsx)("div",{children:l.map(e=>(0,s.jsx)("div",{children:(0,u.d)(e.userBalanceYTokenSyntyetic,void 0,23)},e.epochId.toString()))},"time weighted"),(0,s.jsx)("div",{children:l.map(t=>(0,s.jsx)("div",{children:t.settled?(0,s.jsxs)("div",{className:"flex w-fit cursor-pointer items-center gap-2 underline",onClick:()=>(0,b.rc)(e,n.vault,"boost_venom"),children:["Ready to Harvest",(0,s.jsx)(S.HV3,{})]},"claim"):"Ongoing"},t.epochId.toString()))},"status")]})},[n,d.w.getState()]);return(0,s.jsx)(PortfolioItem,{title:(0,s.jsx)(IconTitle,{tit:"Yield Token",icon:"YToken"}),tHeader:["","Epoch","YT Balance","YT Points","Status"],tData:l,tableProps:{cellClassName:(e,t)=>0==t?"flex flex-col":"leading-[30px]"}})}function Dashboard(){return(0,o.a1)(),(0,o.Ev)(),(0,o.z2)(),(0,o.g2)(),(0,i.p)(),(0,s.jsx)(l.E,{children:(0,s.jsxs)("div",{className:"w-full max-w-[1200px] px-4 mx-auto flex flex-col gap-5 md:pb-8",children:[(0,s.jsx)(PrincipalItem,{}),(0,s.jsx)(BoostItem,{})]})})}},88439:function(e,t,n){"use strict";n.d(t,{b:function(){return useMemoOfChainId}});var s=n(64103),l=n(59175);function useMemoOfChainId(e){let t=(0,l.p)(),n=(0,s.useRef)({});return(0,s.useMemo)(()=>(n.current[t]||(n.current[t]=e()),n.current[t]),[t])}},39577:function(e,t,n){"use strict";n.d(t,{$$:function(){return useSetLVaultPrices},UM:function(){return useUSBApr},aS:function(){return useValutsLeverageRatio},hC:function(){return useLVault},hY:function(){return useUserLVault},so:function(){return useUpLVaultOnUserAction},z6:function(){return useVaultLeverageRatio}});var s=n(19757),l=n(22139),a=n(59175),o=n(88439),r=n(26361),i=n(55349),c=n(96670),u=n(73216);let d=(0,r.Yb)({vaultMode:0,discountEnable:!1},0n),p=(0,r.Yb)({},0n);function useLVault(e){return(0,i.o)(t=>t.sliceLVaultsStore.lvaults[e]||d,["sliceLVaultsStore.lvaults.".concat(e)])}function useUserLVault(e){return(0,i.o)(t=>t.sliceLVaultsStore.user[e]||p,["sliceLVaultsStore.user.".concat(e)])}function useVaultLeverageRatio(e){let t=useLVault(e.vault),n=(0,r.pF)(t.aar,t.AARDecimals);return Math.max(0,1+1/(n-1))}function useValutsLeverageRatio(){let e=(0,a.p)(),t=s.iK[e]||[],n=(0,o.b)(()=>(0,r.Yb)({},0)),l=(0,i.o)(e=>e.sliceLVaultsStore.lvaults);return null==t||t.forEach(e=>{let t=l[e.vault],s=t?(0,r.pF)(t.aar,t.AARDecimals):0;n[e.vault]=Math.max(0,1+1/(s-1))}),n}function useSetLVaultPrices(e){var t;let n=(0,i.o)(e=>e.sliceLVaultsStore.lvaults),o=(0,i.o)(e=>e.sliceTokenStore.totalSupply),r=(0,a.p)();null===(t=s.iK[r])||void 0===t||t.forEach(t=>{let a=n[t.vault]||d,i=a.assetBalance,c=a.latestPrice,u=a.usbTotalSupply,p=o[t.xTokenAddress]||0n,m=p>0n&&i>0n&&c>0n&&u>0n&&i*c>u*l.Pq?(i*c-u*l.Pq)/p:0n;e[t.xTokenAddress]=m,e[t.assetTokenAddress]=c,p>0n&&i>0n&&c>0n&&u>0n&&i*c<u*l.Pq&&(e[s.O1[r]]=i*c/u)})}function useUSBApr(){var e;let t=(0,a.p)(),n=(0,i.o)(e=>e.sliceLVaultsStore.lvaults),l=0,o=0n,r=0n;return null===(e=s.iK[t])||void 0===e||e.forEach(e=>{let t=n[e.vault]||d;t.isStable?(o+=t.M_USB_USDC*t.Y*t.aar/10n**t.AARDecimals,r+=t.M_USB_USDC,t.M_USB_USDC>0n&&t.Y>0n&&l++):(o+=t.M_USB_ETH*t.Y,r+=t.M_USB_ETH,t.M_USB_ETH>0n&&t.Y>0n&&l++)}),{apr:r>0n?o/r:0n,aprDecimals:10}}function useUpLVaultOnUserAction(e){let{address:t}=(0,c.m)();return()=>{(0,r.XD)(async()=>{if(!t)return;let n=i.w.getState().sliceLVaultsStore,l=[e.assetTokenAddress,e.xTokenAddress,s.O1[(0,u.BV)()]];await Promise.all([n.updateLVaults([e]),n.updateUserLVault(e,t),i.w.getState().sliceTokenStore.updateTokensBalance(l,t),i.w.getState().sliceTokenStore.updateTokenTotalSupply(l)])},3,1e3).catch(console.error)}}},36602:function(e,t,n){"use strict";n.d(t,{A5:function(){return useTotalSupply},b7:function(){return useNftBalance},ln:function(){return useBalances}});var s=n(26361),l=n(55349);function useBalances(){return(0,l.o)(e=>(0,s.Yb)(e.sliceTokenStore.balances,0n),["sliceTokenStore.balances"])}function useNftBalance(e){return(0,l.o)(t=>t.sliceTokenStore.nftBalance[e]||[],["sliceTokenStore.nftBalance.".concat(e)])}function useTotalSupply(e){return(0,l.o)(t=>{var n;return null!==(n=t.sliceTokenStore.totalSupply[e])&&void 0!==n?n:0n},["sliceTokenStore.totalSupply.".concat(e)])}}},function(e){e.O(0,[4881,7495,7622,3113,4105,931,4300,359,6466,2653,7717,2487,5228,6002,2536,6619,7093,604,1744],function(){return e(e.s=8631)}),_N_E=e.O()}]);