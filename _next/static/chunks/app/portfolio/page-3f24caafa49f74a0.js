(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5444],{8631:function(e,t,n){Promise.resolve().then(n.bind(n,94234))},94234:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Dashboard}});var a=n(31113),s=n(44939),l=n(75496),o=n(31889),r=n(99971);n(6371),n(19757);var u=n(59175),c=n(26361);n(39577),n(36602);var i=n(84944),d=n(55349),p=n(87031),m=n(22139),f=n(44020),h=n(18358),v=n(64103);n(83978);var S=n(69708),x=n(55746),V=n(59781);function PortfolioItem(e){let{title:t,sub:n,tHeader:s,tData:o,tableProps:r}=e;return(0,a.jsxs)("div",{className:"card whitespace-nowrap",children:["string"==typeof t?(0,a.jsx)("div",{className:"text-2xl leading-none font-semibold",children:t}):t,"string"==typeof n?(0,a.jsx)("div",{className:"text-[2rem] text-primary leading-none font-semibold mt-2",children:n}):n,(0,a.jsx)("div",{className:"my-4 h-[1px] bg-border/60 dark:bg-border"}),(0,a.jsx)("div",{className:"w-full overflow-x-auto",children:(0,a.jsx)(l.ZP,{headerClassName:"border-b-0",tbodyClassName:"text-sm font-medium",header:s,data:o,...r||{}})})]})}function IconTitle(e){return(0,a.jsxs)("div",{className:"flex text-2xl leading-none font-semibold items-center gap-4",children:[(0,a.jsx)(r.c,{symbol:e.icon,size:32}),(0,a.jsx)("span",{children:e.tit})]})}function CoinText(e){return(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)(r.c,{symbol:e.symbol,size:e.size||20}),(0,a.jsx)("span",{children:e.txt||e.symbol})]})}function PrincipalItem(){let e=(0,S.useRouter)(),t=(0,u.p)(),n=(0,v.useMemo)(()=>p.Fw[t].filter(e=>(e.onEnv||[]).includes(m.Vi)),[t]),s=(0,v.useMemo)(()=>{let t=d.w.getState(),inRedeem=e=>(t.sliceUserBVaults.epoches[e.vault]||[]).reduce((e,t)=>e+t.redeemingBalance,0n),claimAble=e=>(t.sliceUserBVaults.epoches[e.vault]||[]).reduce((e,t)=>e+t.claimableAssetBalance,0n),yieldDay=e=>{let n=t.sliceTokenStore.balances[e.pToken]||0n;return(0,h.lL)(e.vault)*n/10n**10n/365n},s=n.map(e=>{var n,a,s;let l=t.sliceTokenStore.balances[e.pToken]||0n,o=inRedeem(e),r=claimAble(e),u=l+o+r,c=f.P[e.asset],[d,p]=c?e.assetSymbol.split("-"):["",""],m=(null===(n=t.sliceBVaultsStore.bvaults[e.vault])||void 0===n?void 0:n.lpLiq)||0n,h=(null===(a=t.sliceBVaultsStore.bvaults[e.vault])||void 0===a?void 0:a.lpBase)||0n,v=(null===(s=t.sliceBVaultsStore.bvaults[e.vault])||void 0===s?void 0:s.lpQuote)||0n,S=c&&m&&h&&u?u*h/m:0n,x=c&&m&&v&&u?u*v/m:0n,V=(0,i.d)(u);return{bvc:e,pBalance:l,pRedeeming:o,pClaimAble:r,lp:c,baseSymbol:d,quoteSymbol:p,uBase:S,uQuote:x,pTotalUser:u,fmtTotalUser:V}}).filter(e=>e.pTotalUser>0n),l=s.reduce((e,t)=>Math.max(e,t.fmtTotalUser.length),0),o=Math.round(5*l+20);return s.map(t=>{let{bvc:n,pBalance:s,pRedeeming:l,pClaimAble:r,lp:u,fmtTotalUser:d,baseSymbol:p,quoteSymbol:m,uBase:f,uQuote:v}=t;return[(0,a.jsx)(CoinText,{symbol:n.assetSymbol,txt:n.pTokenSymbol,size:32},"coin"),(0,i.d)(s),(0,i.d)(l),(0,a.jsxs)("div",{className:"flex w-fit cursor-pointer items-center gap-2 underline",onClick:()=>(0,V.rc)(e,n.vault,"principal_panda","claim"),children:[(0,i.d)(r),(0,a.jsx)(x.HV3,{})]},"claim"),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{style:{width:o},children:d}),u&&(0,a.jsxs)("div",{children:[(0,a.jsx)(CoinText,{size:14,symbol:p,txt:(0,i.d)(f)}),(0,a.jsx)(CoinText,{size:14,symbol:m,txt:(0,i.d)(v)})]})]},"total"),(0,c.Jh)((0,h.lL)(n.vault),10),(0,i.d)(yieldDay(n))]})},[n,d.w.getState()]);return(0,a.jsx)(PortfolioItem,{title:(0,a.jsx)(IconTitle,{tit:"Principal Token",icon:"PToken"}),tHeader:["","Balance","In Redemption","Claimable","Total Amount","APY","Est.Yield/day"],tData:s})}function BoostItem(){let e=(0,S.useRouter)(),t=(0,u.p)(),n=(0,v.useMemo)(()=>p.Fw[t].filter(e=>(e.onEnv||[]).includes(m.Vi)),[t]),s=(0,v.useMemo)(()=>{let t=d.w.getState(),epochInfo=(e,n)=>t.sliceBVaultsStore.epoches["".concat(e,"_").concat(n)],s=n.map(e=>{let n=t.sliceUserBVaults.epoches[e.vault]||[],a=n.map(n=>{var a;return{...n,epochInfo:epochInfo(e.vault,parseInt(n.epochId.toString())),settled:(null===(a=t.sliceBVaultsStore.epoches["".concat(e.vault,"_").concat(parseInt(n.epochId.toString()))])||void 0===a?void 0:a.settled)||!1}}).filter(e=>!!e.epochInfo);return{bvc:e,epochsData:a}}).filter(e=>e.epochsData.length);return s.map(t=>{let{bvc:n,epochsData:s}=t;return[(0,a.jsx)(CoinText,{symbol:n.assetSymbol,txt:n.yTokenSymbol,size:32},"coin"),(0,a.jsx)("div",{children:s.map(e=>(0,a.jsxs)("div",{className:"flex items-baseline",children:[(0,a.jsxs)("div",{className:"w-[4rem]",children:["Epoch ",e.epochId.toString()]}),(0,a.jsxs)("div",{className:"opacity-60 text-xs",children:[(0,c.G$)(1000n*e.epochInfo.startTime)," - ",(0,c.G$)((e.epochInfo.startTime+e.epochInfo.duration)*1000n)]})]},e.epochId.toString()))},"epochs"),(0,a.jsx)("div",{children:s.map(e=>(0,a.jsx)("div",{children:(0,i.d)(e.userBalanceYToken)},e.epochId.toString()))},"amount"),(0,a.jsx)("div",{children:s.map(e=>(0,a.jsx)("div",{children:(0,i.d)(e.userBalanceYTokenSyntyetic,void 0,23)},e.epochId.toString()))},"time weighted"),(0,a.jsx)("div",{children:s.map(t=>(0,a.jsx)("div",{children:t.settled?(0,a.jsxs)("div",{className:"flex w-fit cursor-pointer items-center gap-2 underline",onClick:()=>(0,V.rc)(e,n.vault,"boost_venom"),children:["Ready to Harvest",(0,a.jsx)(x.HV3,{})]},"claim"):"Ongoing"},t.epochId.toString()))},"status")]})},[n,d.w.getState()]);return(0,a.jsx)(PortfolioItem,{title:(0,a.jsx)(IconTitle,{tit:"Yield Token",icon:"YToken"}),tHeader:["","Epoch","YT Balance","YT Points","Status"],tData:s,tableProps:{cellClassName:(e,t)=>0==t?"flex flex-col":"leading-[30px]"}})}function Dashboard(){return(0,o.a1)(),(0,o.Ev)(),(0,o.z2)(),(0,o.g2)(),(0,u.p)(),(0,a.jsx)(s.E,{children:(0,a.jsxs)("div",{className:"w-full max-w-[1200px] px-4 mx-auto flex flex-col gap-5 md:pb-8",children:[(0,a.jsx)(PrincipalItem,{}),(0,a.jsx)(BoostItem,{})]})})}},59781:function(e,t,n){"use strict";n.d(t,{kQ:function(){return toLVault},p2:function(){return toLntVault},rc:function(){return toBVault}});var a=n(26361);function toBVault(e,t,n,s){if(!t)return e.push("/ip-vaults");let l="/ip-vaults?vault=".concat(t);n&&(l+="&tab=".concat((0,a.pi)(n))),s&&(l+="&subtab=".concat((0,a.pi)(s))),e.push(l)}function toLVault(e,t,n){if(!t)return e.push("/l-vaults");let s="/l-vaults?vault=".concat(t);n&&(s+="&tab=".concat((0,a.pi)(n))),e.push(s)}function toLntVault(e,t,n){if(!t)return e.push("/lnt-vaults");let s="/lnt-vaults?vault=".concat(t);n&&(s+="&tab=".concat((0,a.pi)(n))),e.push(s)}},44939:function(e,t,n){"use strict";n.d(t,{E:function(){return PageWrap}});var a=n(31113);n(64103);var s=n(26361),l=n(69708),o=n(12045);function PageWrap(e){let{children:t,className:n}=e,r=(0,o.l)(e=>e.theme),u=(0,l.usePathname)();return(0,a.jsx)("div",{className:(0,s.cn)("min-h-[calc(100vh+1px)] h-auto pt-[90px] pb-6",n),style:{backgroundSize:"contain",background:"light"==r?"#eeeeee":"/"==u?"url(bg_home.svg) center bottom no-repeat,linear-gradient(105.67deg, #02050E 14.41%, #1D2F23 98.84%)":"linear-gradient(105.67deg, #02050E 14.41%, #1D2F23 98.84%)"},children:t})}},75496:function(e,t,n){"use strict";var a=n(31113),s=n(26361);function DefEmpty(){return(0,a.jsx)("tr",{className:"text-lg font-normal text-center text-black ",children:(0,a.jsx)("td",{colSpan:100,className:"h-[100px] py-5 align-top"})})}n(64103),t.ZP=e=>{let{header:t,data:n,span:l={},empty:o=(0,a.jsx)(DefEmpty,{}),className:r="relative min-w-full bg-transparent ",headerClassName:u,headerItemClassName:c,tbodyClassName:i="",rowClassName:d,rowStyle:p,cellClassName:m,onClickRow:f,onRowMouseHover:h}=e;return(0,a.jsxs)("table",{className:(0,s.cn)("relative min-w-full bg-transparent ",r),children:[(0,a.jsx)("thead",{className:"",children:(0,a.jsx)("tr",{className:(0,s.cn)("text-left whitespace-nowrap font-normal text-black border-b border-gray-100 pt-5 pb-6 dark:text-slate-50 dark:border-zinc-600",u),children:t.map((e,t)=>(0,a.jsx)("th",{colSpan:l[t],scope:"col",className:(0,s.cn)(0==l[t]?"p-0 w-0":"p-3 font-normal text-sm",c),children:e},t))})}),(0,a.jsxs)("tbody",{className:(0,s.cn)(i),children:[n.map((e,n)=>(0,a.jsx)("tr",{onClick:()=>f&&f(n),onMouseEnter:()=>h&&h(n),onMouseLeave:()=>h&&h(-1),style:"function"==typeof p?p(n):p,className:(0,s.cn)("text-slate-700 dark:text-slate-50 font-medium whitespace-nowrap",f?"cursor-pointer hover:bg-slate-400/10":"","function"==typeof d?d(n):d),children:e.map((e,o)=>o>=t.length?(0,a.jsx)(a.Fragment,{children:e}):(0,a.jsx)("td",{colSpan:l[o],className:(0,s.cn)(0==l[o]?"p-0 w-max":"px-3 py-2 text-sm w-max","function"==typeof m?m(n,o):m),children:e},o))},n)),0===n.length&&o]})]})}},6371:function(e,t,n){"use strict";n.d(t,{C:function(){return Tip}});var a=n(31113),s=n(26361),l=n(52653),o=n(55966);function Tip(e){let{children:t,node:n,className:r,inFlex:u}=e,c=document.getElementById("tooltip-root");return t?(0,a.jsx)(l.zt,{children:(0,a.jsxs)(l.fC,{children:[(0,a.jsx)(l.xz,{asChild:!0,onClickCapture:e=>{e.preventDefault(),e.stopPropagation()},children:n?(0,a.jsx)("div",{className:(0,s.cn)("inline-block cursor-default",r),style:{verticalAlign:"text-bottom"},children:n}):(0,a.jsx)("div",{className:(0,s.cn)(u?"flex":"translate-y-[-6%] inline-block"," px-[3px] cursor-default relative",r),children:(0,a.jsx)(o.apP,{className:"inline-block stroke-slate-500"})})}),(0,a.jsx)(l.h_,{container:c,children:(0,a.jsxs)(l.VY,{className:"max-w-xs text-sm text-white bg-slate-900 shadow-lg dark:bg-[#333333] rounded-md p-4",children:[t,(0,a.jsx)(l.Eh,{})]})})]})}):n}},31889:function(e,t,n){"use strict";n.d(t,{Ev:function(){return useLoadBVaults},a1:function(){return useLoadLVaults},g2:function(){return useLoadUserBVaults},tK:function(){return useLoadLntVaults},z2:function(){return useLoadUserLVaults}});var a=n(87031),s=n(19757),l=n(22139),o=n(55349),r=n(64370),u=n(83978),c=n.n(u),i=n(64103),d=n(96670),p=n(59175),m=n(95889);function useLoadLVaults(){let e=(0,p.p)(),t=s.iK[e]||[],{address:n}=(0,d.m)(),a=(0,i.useMemo)(()=>c().chain(s.iK[e]||[]).map(e=>[e.assetTokenAddress,e.xTokenAddress]).flatten().concat([s.O1[e]]).union().value(),[e]);(0,r.a)({queryKey:["UpdateLvautlsTokens",a],queryFn:async()=>(await o.w.getState().sliceTokenStore.updateTokenTotalSupply(a),!0)}),(0,r.a)({queryKey:["UpdateUserLvautlsTokens",a,n],queryFn:async()=>!!n&&(await o.w.getState().sliceTokenStore.updateTokensBalance(a,n),!0)}),(0,r.a)({queryKey:["UpdateLVautls",t],queryFn:async()=>(await o.w.getState().sliceLVaultsStore.updateLVaults(t),!0)})}function useLoadBVaults(){let e=(0,p.p)(),t=(0,i.useMemo)(()=>a.Fw[e].filter(e=>(e.onEnv||[]).includes(l.Vi)),[e,l.Vi]);(0,r.a)({queryKey:["UpdateBVaults",t],queryFn:async()=>(await Promise.all([o.w.getState().sliceBVaultsStore.updateBvaults(t),o.w.getState().sliceBVaultsStore.updateYTokenSythetic(t)]),!0)});let{address:n}=(0,d.m)(),s=(0,i.useMemo)(()=>t.map(e=>[e.asset,e.pToken]).flat().reduce((e,t)=>e.includes(t)?e:[...e,t],[]),[t]);(0,r.a)({queryKey:["UpdateBvautlsTokens",s],queryFn:async()=>(await Promise.all([o.w.getState().sliceTokenStore.updateTokenTotalSupply(s),o.w.getState().sliceTokenStore.updateTokenPrices(s)]),!0),throwOnError:(e,t)=>(console.error(e),!1)}),(0,r.a)({queryKey:["UpdateUserBvautlsTokens",s,n],queryFn:async()=>!!n&&(await o.w.getState().sliceTokenStore.updateTokensBalance(s,n),!0)})}function useLoadLntVaults(){let e=(0,p.p)(),t=(0,i.useMemo)(()=>{var t;return(null===(t=m.f_[e])||void 0===t?void 0:t.filter(e=>(e.onEnv||[]).includes(l.Vi)))||[]},[e,l.Vi]);(0,r.a)({queryKey:["UpdateLntVaults",t],queryFn:async()=>(await o.w.getState().sliceLntVaultsStore.updateLntVaults(t),!0)});let{address:n}=(0,d.m)(),a=(0,i.useMemo)(()=>t.map(e=>[e.vestingToken,e.vToken]).flat().reduce((e,t)=>e.includes(t)?e:[...e,t],[]),[t]);(0,r.a)({queryKey:["UpdateLntvautlsTokens",a],queryFn:async()=>(await o.w.getState().sliceTokenStore.updateTokenTotalSupply(a),await o.w.getState().sliceTokenStore.updateTokenPrices(a),!0),throwOnError:(e,t)=>(console.error(e),!1)}),(0,r.a)({queryKey:["UpdateUserLntvautlsTokens",a,n],queryFn:async()=>!!n&&(await o.w.getState().sliceTokenStore.updateTokensBalance(a,n),!0)})}function useLoadUserLVaults(){let{address:e}=(0,d.m)(),t=(0,p.p)(),n=s.iK[t]||[];(0,r.a)({queryKey:["UpdateAllUserLVaults",t,e,n],queryFn:async()=>!!e&&(await Promise.all(n.map(t=>o.w.getState().sliceLVaultsStore.updateUserLVault(t,e))),!0)})}function useLoadUserBVaults(){let{address:e}=(0,d.m)(),t=(0,p.p)(),n=(0,i.useMemo)(()=>a.Fw[t].filter(e=>(e.onEnv||[]).includes(l.Vi)),[t,l.Vi]),s=(0,o.o)(e=>c().keys(e.sliceBVaultsStore.bvaults).toString(),["sliceBVaultsStore.bvaults"]);(0,r.a)({queryKey:["UpdateAllUserBvaults",n,t,e,s],queryFn:async()=>{if(!e)return!1;let t=o.w.getState().sliceBVaultsStore.bvaults;for(let e of n)if(!t[e.vault])return!1;await Promise.all(n.map(e=>o.w.getState().sliceBVaultsStore.updateEpoches(e)));let getEpochesParams=e=>{let t=o.w.getState().sliceBVaultsStore.bvaults[e.vault],n=[];for(let a=parseInt(t.epochCount.toString());a>0;a--){let t=o.w.getState().sliceBVaultsStore.epoches["".concat(e.vault,"_").concat(a)];n.push(t)}return n};return await Promise.all(n.map(t=>o.w.getState().sliceUserBVaults.updateEpoches(t,e,getEpochesParams(t)))),!0}})}},88439:function(e,t,n){"use strict";n.d(t,{b:function(){return useMemoOfChainId}});var a=n(64103),s=n(59175);function useMemoOfChainId(e){let t=(0,s.p)(),n=(0,a.useRef)({});return(0,a.useMemo)(()=>(n.current[t]||(n.current[t]=e()),n.current[t]),[t])}},18358:function(e,t,n){"use strict";n.d(t,{R3:function(){return useUpBVaultForUserAction},Vw:function(){return useEpochesData},Zd:function(){return useBVaultEpoches},d6:function(){return useResetBVaultsData},gz:function(){return useCalcClaimable},lL:function(){return calcBVaultPTApy},nr:function(){return useBVault},oU:function(){return useBVaultApy},pg:function(){return calcBVaultBoost},v7:function(){return useBVaultBoost}});var a=n(22139),s=n(59175),l=n(26361),o=n(84944),r=n(83978),u=n.n(r),c=n(64103),i=n(96670),d=n(55349);function useResetBVaultsData(){let e=(0,s.p)(),{address:t}=(0,i.m)();(0,c.useEffect)(()=>{},[e]),(0,c.useEffect)(()=>{d.w.getState().sliceUserBVaults.reset()},[t])}function useBVault(e){return(0,d.o)(t=>t.sliceBVaultsStore.bvaults[e]||(0,l.Yb)({current:(0,l.Yb)({},0n)},0n),["sliceBVaultsStore.bvaults.".concat(e)])}function useBVaultEpoches(e){return(0,d.o)(t=>{let n=t.sliceBVaultsStore.bvaults[e];if(!n||n.epochCount<=0n)return[];let a=u().range(1,parseInt((n.epochCount+1n).toString())).reverse(),s=t.sliceBVaultsStore.epoches;return a.map(t=>s["".concat(e,"_").concat(t)]).filter(e=>null!=e)},["sliceBVaultsStore.bvaults.".concat(e),"sliceBVaultsStore.epoches"])}function useEpochesData(e){let t=useBVaultEpoches(e),n=(0,d.o)(t=>t.sliceUserBVaults.epoches[e]||[],["sliceUserBVaults.epoches.".concat(e)]);return(0,c.useMemo)(()=>{let e=n.reduce((e,t)=>({...e,[t.epochId.toString()]:t}),{});return t.map(t=>(0,l.Yb)({...t,...e[t.epochId.toString()]||{bribes:[],sBribes:[],aBribes:[]}},0n))},[t,n])}function useCalcClaimable(e){let t=useEpochesData(e);return(0,c.useMemo)(()=>{let e=t.filter(e=>e.claimableAssetBalance&&e.settled);return{ids:e.map(e=>e.epochId),claimable:e.reduce((e,t)=>e+t.claimableAssetBalance,0n)}},[t])}function calcBVaultBoost(e){let t=d.w.getState(),n=t.sliceBVaultsStore.bvaults[e],s=(null==n?void 0:n.current.vaultYTokenBalance)||0n,l=(null==n?void 0:n.Y)||0n,r=l>0n?s*a.Pq/l:0n,u=(null==n?void 0:n.current.yTokenAmountForSwapYT)||0n,c=(null==n?void 0:n.lockedAssetTotal)||0n,i=u>0n?c*a.Pq/u:0n;return console.info("calcBootst:",(0,o.d)(r),(0,o.d)(i)),r}function useBVaultBoost(e){let t=(0,d.o)(()=>calcBVaultBoost(e),["sliceBVaultsStore.bvaults.".concat(e)]);return[(0,o.d)(t,0),t]}function calcBVaultPTApy(e){let t=d.w.getState(),n=t.sliceBVaultsStore.bvaults[e],s=(0,l.ok)(t.sliceBVaultsStore.yTokenSythetic,[e]),o=n&&n.current.assetTotalSwapAmount&&s?n.current.assetTotalSwapAmount*a.SH*BigInt(1e10)/s:0n;return o}function useBVaultApy(e){let t=(0,d.o)(()=>calcBVaultPTApy(e),["sliceBVaultsStore.bvaults.".concat(e),"sliceBVaultsStore.yTokenSythetic.".concat(e)]);return[(0,l.Jh)(t,10),t]}function useUpBVaultForUserAction(e,t){let{address:n}=(0,i.m)();return()=>{(0,l.XD)(async()=>{if(null==t||t(),!n)return;await Promise.all([d.w.getState().sliceTokenStore.updateTokensBalance([e.asset,e.pToken],n),d.w.getState().sliceTokenStore.updateTokenTotalSupply([e.asset,e.pToken]),d.w.getState().sliceBVaultsStore.updateBvaults([e]),d.w.getState().sliceBVaultsStore.updateYTokenSythetic([e])]);let a=d.w.getState().sliceBVaultsStore.bvaults[e.vault];await d.w.getState().sliceBVaultsStore.updateEpoches(e,a.epochCount>1n?[a.epochCount,a.epochCount-1n]:[a.epochCount]);let s=[];for(let t=parseInt(a.epochCount.toString());t>0;t--){let n=d.w.getState().sliceBVaultsStore.epoches["".concat(e.vault,"_").concat(t)];s.push(n)}console.info("onUserAction:epoches",s),await d.w.getState().sliceUserBVaults.updateEpoches(e,n,s)},3,1e3)}}},39577:function(e,t,n){"use strict";n.d(t,{$$:function(){return useSetLVaultPrices},UM:function(){return useUSBApr},aS:function(){return useValutsLeverageRatio},hC:function(){return useLVault},hY:function(){return useUserLVault},so:function(){return useUpLVaultOnUserAction},z6:function(){return useVaultLeverageRatio}});var a=n(19757),s=n(22139),l=n(59175),o=n(88439),r=n(26361),u=n(55349),c=n(96670),i=n(73216);let d=(0,r.Yb)({vaultMode:0,discountEnable:!1},0n),p=(0,r.Yb)({},0n);function useLVault(e){return(0,u.o)(t=>t.sliceLVaultsStore.lvaults[e]||d,["sliceLVaultsStore.lvaults.".concat(e)])}function useUserLVault(e){return(0,u.o)(t=>t.sliceLVaultsStore.user[e]||p,["sliceLVaultsStore.user.".concat(e)])}function useVaultLeverageRatio(e){let t=useLVault(e.vault),n=(0,r.pF)(t.aar,t.AARDecimals);return Math.max(0,1+1/(n-1))}function useValutsLeverageRatio(){let e=(0,l.p)(),t=a.iK[e]||[],n=(0,o.b)(()=>(0,r.Yb)({},0)),s=(0,u.o)(e=>e.sliceLVaultsStore.lvaults);return null==t||t.forEach(e=>{let t=s[e.vault],a=t?(0,r.pF)(t.aar,t.AARDecimals):0;n[e.vault]=Math.max(0,1+1/(a-1))}),n}function useSetLVaultPrices(e){var t;let n=(0,u.o)(e=>e.sliceLVaultsStore.lvaults),o=(0,u.o)(e=>e.sliceTokenStore.totalSupply),r=(0,l.p)();null===(t=a.iK[r])||void 0===t||t.forEach(t=>{let l=n[t.vault]||d,u=l.assetBalance,c=l.latestPrice,i=l.usbTotalSupply,p=o[t.xTokenAddress]||0n,m=p>0n&&u>0n&&c>0n&&i>0n&&u*c>i*s.Pq?(u*c-i*s.Pq)/p:0n;e[t.xTokenAddress]=m,e[t.assetTokenAddress]=c,p>0n&&u>0n&&c>0n&&i>0n&&u*c<i*s.Pq&&(e[a.O1[r]]=u*c/i)})}function useUSBApr(){var e;let t=(0,l.p)(),n=(0,u.o)(e=>e.sliceLVaultsStore.lvaults),s=0,o=0n,r=0n;return null===(e=a.iK[t])||void 0===e||e.forEach(e=>{let t=n[e.vault]||d;t.isStable?(o+=t.M_USB_USDC*t.Y*t.aar/10n**t.AARDecimals,r+=t.M_USB_USDC,t.M_USB_USDC>0n&&t.Y>0n&&s++):(o+=t.M_USB_ETH*t.Y,r+=t.M_USB_ETH,t.M_USB_ETH>0n&&t.Y>0n&&s++)}),{apr:r>0n?o/r:0n,aprDecimals:10}}function useUpLVaultOnUserAction(e){let{address:t}=(0,c.m)();return()=>{(0,r.XD)(async()=>{if(!t)return;let n=u.w.getState().sliceLVaultsStore,s=[e.assetTokenAddress,e.xTokenAddress,a.O1[(0,i.BV)()]];await Promise.all([n.updateLVaults([e]),n.updateUserLVault(e,t),u.w.getState().sliceTokenStore.updateTokensBalance(s,t),u.w.getState().sliceTokenStore.updateTokenTotalSupply(s)])},3,1e3).catch(console.error)}}},36602:function(e,t,n){"use strict";n.d(t,{A5:function(){return useTotalSupply},b7:function(){return useNftBalance},ln:function(){return useBalances}});var a=n(26361),s=n(55349);function useBalances(){return(0,s.o)(e=>(0,a.Yb)(e.sliceTokenStore.balances,0n),["sliceTokenStore.balances"])}function useNftBalance(e){return(0,s.o)(t=>t.sliceTokenStore.nftBalance[e]||[],["sliceTokenStore.nftBalance.".concat(e)])}function useTotalSupply(e){return(0,s.o)(t=>{var n;return null!==(n=t.sliceTokenStore.totalSupply[e])&&void 0!==n?n:0n},["sliceTokenStore.totalSupply.".concat(e)])}}},function(e){e.O(0,[4881,7495,7622,3113,842,8410,3606,2653,956,6002,7093,604,1744],function(){return e(e.s=8631)}),_N_E=e.O()}]);