(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{79391:function(){},35467:function(t,e,a){"use strict";a.d(e,{fr:function(){return r},u8:function(){return o},zS:function(){return l}});let r={Slate:"slate",Gray:"gray",Zinc:"zinc",Neutral:"neutral",Stone:"stone",Red:"red",Orange:"orange",Amber:"amber",Yellow:"yellow",Lime:"lime",Green:"green",Emerald:"emerald",Teal:"teal",Cyan:"cyan",Sky:"sky",Blue:"blue",Indigo:"indigo",Violet:"violet",Purple:"purple",Fuchsia:"fuchsia",Pink:"pink",Rose:"rose"},o={XS:"xs",SM:"sm",MD:"md",LG:"lg",XL:"xl"},l={Left:"left",Right:"right"}},52100:function(t,e,a){"use strict";a.d(e,{W:function(){return r}});let r={none:{paddingLeft:"pl-0",paddingTop:"pt-0",paddingRight:"pr-0",paddingBottom:"pb-0",paddingX:"px-0",paddingY:"py-0",paddingAll:"p-0",marginLeft:"ml-0",marginTop:"mt-0",marginRight:"mr-0",marginBottom:"mb-0",negativeMarginLeft:"-ml-0",negativeMarginRight:"-mr-0",negativeMarginTop:"-mt-0",negativeMarginBottom:"-mb-0",left:"left-0",right:"right-0",top:"top-0",bottom:"bottom-0",spaceX:"space-x-0"},px:{paddingLeft:"pl-px",paddingTop:"pt-px",paddingRight:"pr-px",paddingBottom:"pb-px",paddingX:"px-px",paddingY:"py-px",paddingAll:"p-px",marginLeft:"ml-px",marginTop:"mt-px",marginRight:"mr-px",marginBottom:"mb-px",negativeMarginLeft:"-ml-px",negativeMarginRight:"-mr-px",negativeMarginTop:"-mt-px",negativeMarginBottom:"-mb-px",left:"left-px",right:"right-px",top:"top-px",bottom:"bottom-px",spaceX:"space-x-px"},threeXs:{paddingLeft:"pl-0.5",paddingTop:"pt-0.5",paddingRight:"pr-0.5",paddingBottom:"pb-0.5",paddingX:"px-0.5",paddingY:"py-0.5",paddingAll:"p-0.5",marginLeft:"ml-0.5",marginTop:"mt-0.5",marginRight:"mr-0.5",marginBottom:"mb-0.5",negativeMarginLeft:"-ml-0.5",negativeMarginRight:"-mr-0.5",negativeMarginTop:"-mt-0.5",negativeMarginBottom:"-mb-0.5",left:"left-0.5",right:"right-0.5",top:"top-0.5",bottom:"bottom-0.5",spaceX:"space-x-0.5"},twoXs:{paddingLeft:"pl-1",paddingTop:"pt-1",paddingRight:"pr-1",paddingBottom:"pb-1",paddingX:"px-1",paddingY:"py-1",paddingAll:"p-1",marginLeft:"ml-1",marginTop:"mt-1",marginRight:"mr-1",marginBottom:"mb-1",negativeMarginLeft:"-ml-1",negativeMarginRight:"-mr-1",left:"left-1",right:"right-1",top:"top-1",bottom:"bottom-1",spaceX:"space-x-1"},xs:{paddingLeft:"pl-1.5",paddingTop:"pt-1.5",paddingRight:"pr-1.5",paddingBottom:"pb-1.5",paddingX:"px-1.5",paddingY:"py-1.5",paddingAll:"p-1.5",marginLeft:"ml-1.5",marginTop:"mt-1.5",marginRight:"mr-1.5",marginBottom:"mb-1.5",negativeMarginLeft:"-ml-1.5",negativeMarginRight:"-mr-1.5",negativeMarginTop:"-mt-1.5",negativeMarginBottom:"-mb-1.5",left:"left-1.5",right:"right-1.5",top:"top-1.5",bottom:"bottom-1.5",spaceX:"space-x-1.5"},sm:{paddingLeft:"pl-2",paddingTop:"pt-2",paddingRight:"pr-2",paddingBottom:"pb-2",paddingX:"px-2",paddingY:"py-2",paddingAll:"p-2",marginLeft:"ml-2",marginTop:"mt-2",marginRight:"mr-2",marginBottom:"mb-2",negativeMarginLeft:"-ml-2",negativeMarginRight:"-mr-2",negativeMarginTop:"-mt-2",negativeMarginBottom:"-mb-2",left:"left-2",right:"right-2",top:"left-2",bottom:"bottom-2",spaceX:"space-x-2"},md:{paddingLeft:"pl-2.5",paddingTop:"pt-2.5",paddingRight:"pr-2.5",paddingBottom:"pb-2.5",paddingX:"px-2.5",paddingY:"py-2.5",paddingAll:"p-2.5",marginLeft:"ml-2.5",marginTop:"mt-2.5",marginRight:"mr-2.5",marginBottom:"mb-2.5",negativeMarginLeft:"-ml-2.5",negativeMarginRight:"-mr-2.5",negativeMarginTop:"-mt-2.5",negativeMarginBottom:"-mb-2.5",left:"left-2.5",right:"right-2.5",top:"top-2.5",bottom:"bottom-2.5",spaceX:"space-x-2.5"},lg:{paddingLeft:"pl-3",paddingTop:"pt-3",paddingRight:"pr-3",paddingBottom:"pb-3",paddingX:"px-3",paddingY:"py-3",paddingAll:"p-3",marginLeft:"ml-3",marginTop:"mt-3",marginRight:"mr-3",marginBottom:"mb-3",negativeMarginLeft:"-ml-3",negativeMarginRight:"-mr-3",negativeMarginTop:"-mt-3",negativeMarginBottom:"-mb-3",left:"left-3",right:"right-3",top:"top-3",bottom:"bottom-3",spaceX:"space-x-3"},xl:{paddingLeft:"pl-3.5",paddingTop:"pt-3.5",paddingRight:"pr-3.5",paddingBottom:"pb-3.5",paddingX:"px-3.5",paddingY:"py-3.5",paddingAll:"p-3.5",marginLeft:"ml-3.5",marginTop:"mt-3.5",marginRight:"mr-3.5",marginBottom:"mb-3.5",negativeMarginLeft:"-ml-3.5",negativeMarginRight:"-mr-3.5",negativeMarginTop:"-mt-3.5",negativeMarginBottom:"-mb-3.5",left:"left-3.5",right:"right-3.5",top:"top-3.5",bottom:"bottom-3.5",spaceX:"space-x-3.5"},twoXl:{paddingLeft:"pl-4",paddingTop:"pt-4",paddingRight:"pr-4",paddingBottom:"pb-4",paddingX:"px-4",paddingY:"py-4",paddingAll:"p-4",marginLeft:"ml-4",marginTop:"mt-4",marginRight:"mr-4",marginBottom:"mb-4",negativeMarginLeft:"-ml-4",negativeMarginRight:"-mr-4",negativeMarginTop:"-mt-4",negativeMarginBottom:"-mb-4",left:"left-4",right:"right-4",top:"top-4",bottom:"bottom-4",spaceX:"space-x-4"},threeXl:{paddingLeft:"pl-6",paddingTop:"pt-6",paddingRight:"pr-6",paddingBottom:"pb-6",paddingX:"px-6",paddingY:"py-6",paddingAll:"p-6",marginLeft:"ml-6",marginTop:"mt-6",marginRight:"mr-6",marginBottom:"mb-6",negativeMarginLeft:"-ml-6",negativeMarginRight:"-mr-6",negativeMarginTop:"-mt-6",negativeMarginBottom:"-mb-6",left:"left-6",right:"right-6",top:"top-6",bottom:"bottom-6",spaceX:"space-x-6"},fourXl:{paddingLeft:"pl-8",paddingTop:"pt-8",paddingRight:"pr-8",paddingBottom:"pb-8",paddingX:"px-8",paddingY:"py-8",paddingAll:"p-8",marginLeft:"ml-8",marginTop:"mt-8",marginRight:"mr-8",marginBottom:"mb-8",negativeMarginLeft:"-ml-8",negativeMarginRight:"-mr-8",negativeMarginTop:"-mt-8",negativeMarginBottom:"-mb-8",left:"left-8",right:"right-8",top:"top-8",bottom:"bottom-8",spaceX:"space-x-8"}}},40460:function(t,e,a){"use strict";a.d(e,{q:function(){return s}});var r=a(15638),o=a(82888),l=Object.prototype.hasOwnProperty,i=new Set(["string","number","boolean"]);let s=function(t){for(var e=arguments.length,a=Array(e>1?e-1:0),s=1;s<e;s++)a[s-1]=arguments[s];return"function"==typeof t?r.I.apply(void 0,[o._,t].concat(a)):r.I.apply(void 0,[function(){return function(t,e){for(var a in e)!function mergePropertyRecursively(t,e,a){if(!l.call(t,e)||i.has(typeof a)||null===a){t[e]=a;return}if(Array.isArray(a)&&Array.isArray(t[e])){t[e]=t[e].concat(a);return}if("object"==typeof a&&"object"==typeof t[e]){if(null===t[e]){t[e]=a;return}for(var r in a)mergePropertyRecursively(t[e],r,a[r])}}(t,a,e[a]);return t}((0,o._)(),t)}].concat(a))}({classGroups:{boxShadow:[{shadow:[{tremor:["input","card","dropdown"],"dark-tremor":["input","card","dropdown"]}]}],borderRadius:[{rounded:[{tremor:["small","default","full"],"dark-tremor":["small","default","full"]}]}],fontSize:[{text:[{tremor:["default","title","metric"],"dark-tremor":["default","title","metric"]}]}]}})},13012:function(t,e,a){"use strict";function n(t){return e=>{t.forEach(t=>{"function"==typeof t?t(e):null!=t&&(t.current=e)})}}function $(t){return e=>`tremor-${t}-${e}`}function c(t,e){return"white"!==t&&"black"!==t&&"transparent"!==t&&e?{bgColor:`bg-${t}-${e}`,selectBgColor:`ui-selected:bg-${t}-${e}`,hoverBgColor:`hover:bg-${t}-${e}`,textColor:`text-${t}-${e}`,selectTextColor:`ui-selected:text-${t}-${e}`,hoverTextColor:`hover:text-${t}-${e}`,borderColor:`border-${t}-${e}`,selectBorderColor:`ui-selected:border-${t}-${e}`,hoverBorderColor:`hover:border-${t}-${e}`,ringColor:`ring-${t}-${e}`,strokeColor:`stroke-${t}-${e}`,fillColor:`fill-${t}-${e}`}:{bgColor:`bg-${t}`,hoverBgColor:`hover:bg-${t}`,selectBgColor:`ui-selected:bg-${t}`,textColor:`text-${t}`,selectTextColor:`ui-selected:text-${t}`,hoverTextColor:`hover:text-${t}`,borderColor:`border-${t}`,selectBorderColor:`ui-selected:border-${t}`,hoverBorderColor:`hover:border-${t}`,ringColor:`ring-${t}`,strokeColor:`stroke-${t}`,fillColor:`fill-${t}`}}a.d(e,{bM:function(){return c},fn:function(){return $},lq:function(){return n}}),a(35467)},36599:function(t,e,a){Promise.resolve().then(a.bind(a,94401))},94401:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return Dashboard}});var r=a(31113),o=a(99971),l=a(44939),i=a(75496),s=a(87031),u=a(19757),p=a(44020),d=a(22139),g=a(59175),m=a(31889),f=a(64103),h=a(52671);a(15506),a(83718);var v=a(26361),b=a(55349),y=a(83978),S=a.n(y),x=a(18358),B=a(84944),T=a(55731),V=a(52100),k=a(13012),w=a(40460);let L=(0,k.fn)("TableCell"),M=f.forwardRef((t,e)=>{let{children:a,className:r}=t,o=(0,T.__rest)(t,["children","className"]);return f.createElement(f.Fragment,null,f.createElement("td",Object.assign({ref:e,className:(0,w.q)(L("root"),"align-middle whitespace-nowrap tabular-nums text-left",V.W.twoXl.paddingAll,r)},o),a))});M.displayName="TableCell";let A=(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,r.jsx)("circle",{cx:"7",cy:"7",r:"5",fill:"white",stroke:"#00DE9C",strokeWidth:"4"})});function DashItem(t){let{title:e,sub:a,tHeader:o,tData:l}=t;return(0,r.jsxs)("div",{className:"card whitespace-nowrap",children:["string"==typeof e?(0,r.jsx)("div",{className:"text-2xl leading-none font-semibold",children:e}):e,"string"==typeof a?(0,r.jsx)("div",{className:"text-[2rem] text-primary leading-none font-semibold mt-2",children:a}):a,(0,r.jsx)("div",{className:"my-4 h-[1px] bg-border/60 dark:bg-border"}),(0,r.jsx)("div",{className:"w-full overflow-x-auto",children:(0,r.jsx)(i.ZP,{headerClassName:"border-b-0",header:o,data:l})})]})}function TVLItem(){let t=function(){let t=(0,g.p)(),e=u.iK[t]||[],a=s.Fw[t].filter(t=>(t.onEnv||[]).includes(d.Vi)),{prices:r}=(0,f.useContext)(h.g),o=(0,b.o)(t=>t.sliceLVaultsStore.lvaults),l=(0,b.o)(t=>t.sliceTokenStore.totalSupply),i=e.map(t=>{var e;return(null===(e=o[t.vault])||void 0===e?void 0:e.usbTotalSupply)||0n}).reduce((t,e)=>t+e,0n),m=(0,b.o)(t=>t.sliceBVaultsStore.bvaults),v=(0,b.o)(t=>t.sliceTokenStore.prices),y=e.map(t=>({name:t.xTokenSymbol+t.version,symbol:t.xTokenSymbol,address:t.xTokenAddress})).map(t=>{let e=r[t.address],a=t.symbol==u.TW?i:l[t.address]||0n,o=e*a/d.Pq;return{...t,price:e,amount:a,usdAmount:o}}).concat(e.filter(t=>!t.isStable).map(t=>{let e=o[t.vault],a=((null==e?void 0:e.sellPoolTotalStaking)||0n)+((null==e?void 0:e.buyPoolBalance)||0n),l=r[t.assetTokenAddress],i=l*a/d.Pq;return{name:t.assetTokenSymbol+t.version,symbol:t.assetTokenSymbol,address:t.assetTokenAddress,price:l,amount:a,usdAmount:i}})).concat(S().chain(a).mapValues(t=>{let e=p.P[t.asset],a=m[t.vault],r=e&&a&&a.lpLiq&&a.lpBase&&a.lpQuote&&v[e.base]&&v[e.quote],o=r?(v[e.base]*a.lpBase+v[e.quote]*a.lpQuote)/a.lpLiq:v[t.asset]||d.Pq,l=(null==a?void 0:a.lpLiq)||(null==a?void 0:a.lockedAssetTotal)||0n;return{name:t.assetSymbol,symbol:t.assetSymbol,address:t.asset,price:o,amount:l,usdAmount:o*l/d.Pq}}).values().reduce((t,e)=>{let a=t.find(t=>t.symbol==e.symbol);return a?(a.amount+=e.amount,a.usdAmount+=e.usdAmount,t):[...t,e]},[]).value()),x=y.reduce((t,e)=>t+e.usdAmount,0n);return{tvl:x,tvlItems:y}}(),e=(0,f.useMemo)(()=>t.tvlItems.map(t=>[(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(o.c,{symbol:t.symbol,size:20}),(0,r.jsx)("span",{children:t.symbol})]},"icon"),"$".concat((0,B.d)(t.price)),(0,B.d)(t.amount),"$".concat((0,B.d)(t.usdAmount))]),[t.tvlItems]);return(0,r.jsx)(DashItem,{title:"Total Value Locked",sub:"$".concat((0,B.d)(t.tvl)),tHeader:["Asset","NAV","Amount","Total"],tData:e})}function BVaultsItem(){let t=(0,g.p)(),e=(0,f.useMemo)(()=>s.Fw[t].filter(t=>(t.onEnv||[]).includes(d.Vi)),[t]),a=(0,b.o)(t=>t.sliceBVaultsStore.bvaults,["sliceBVaultsStore.bvaults"]),l=(0,b.o)(t=>t.sliceTokenStore.prices,["sliceTokenStore.prices"]),i=(0,f.useMemo)(()=>{let t=e.map(t=>{let e=(0,v.ok)(a,[t.vault,"lockedAssetTotal"]),r=e*(0,v.ok)(l,[t.asset])/d.Pq,o=p.P[t.asset];if(o){let e=(0,v.ok)(a,[t.vault,"lpBase"]),i=(0,v.ok)(a,[t.vault,"lpQuote"]);r=(e*(0,v.ok)(l,[o.base])+i*(0,v.ok)(l,[o.quote]))/d.Pq}let[i,s]=o?t.assetSymbol.split("-"):["",""],u=Math.max(22+5*(0,B.d)(e).length,5*(0,B.d)(r).length+5);return{bvc:t,totalDeposit:e,totalDepositUsd:r,totalLeftWidth:u,lp:o,baseSymbol:i,quoteSymbol:s}}),i=t.reduce((t,e)=>Math.max(t,e.totalLeftWidth),0)+20;return t.map(t=>{let{bvc:e,totalDeposit:l,totalDepositUsd:s,lp:u,baseSymbol:p,quoteSymbol:d}=t;return[(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(o.c,{symbol:e.assetSymbol,size:20}),(0,r.jsx)("span",{children:e.assetSymbol})]},"icon"),(0,r.jsxs)("div",{className:"flex gap-8 items-start",children:[(0,r.jsxs)("div",{style:{width:i},children:[(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(o.c,{symbol:e.assetSymbol,size:14}),(0,r.jsx)("span",{children:(0,B.d)(l)})]},"icon"),(0,r.jsxs)("div",{className:"opacity-60",children:["~",(0,B.d)(s)]})]}),u&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(o.c,{symbol:p,size:14}),(0,r.jsx)("span",{children:(0,B.d)((0,v.ok)(a,[e.vault,"lpBase"]))})]},"icon"),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(o.c,{symbol:d,size:14}),(0,r.jsx)("span",{children:(0,B.d)((0,v.ok)(a,[e.vault,"lpQuote"]))})]},"icon")]})]},"total"),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[A,(0,r.jsxs)("span",{children:["Epoch ",(0,v.ok)(a,[e.vault,"epochCount"]).toString()]})]},"status"),(0,v.Jh)((0,x.lL)(e.vault),10),"".concat((0,B.d)((0,x.pg)(e.vault),2),"X")]})},[e,a,l]);return(0,r.jsx)(DashItem,{title:"B-Vault",tHeader:["Vaults","Total Deposit","Status","PT APY","YT Boost"],tData:i})}function Dashboard(){return(0,m.a1)(),(0,m.Ev)(),(0,g.p)(),(0,r.jsx)(l.E,{children:(0,r.jsxs)("div",{className:"w-full max-w-[1200px] px-4 mx-auto flex flex-col gap-5 md:pb-8",children:[(0,r.jsx)(TVLItem,{}),(0,r.jsx)(BVaultsItem,{})]})})}},44939:function(t,e,a){"use strict";a.d(e,{E:function(){return PageWrap}});var r=a(31113);a(64103);var o=a(26361),l=a(69708),i=a(12045);function PageWrap(t){let{children:e,className:a}=t,s=(0,i.l)(t=>t.theme),u=(0,l.usePathname)();return(0,r.jsx)("div",{className:(0,o.cn)("min-h-[calc(100vh+1px)] h-auto pt-[90px] pb-6",a),style:{backgroundSize:"contain",background:"light"==s?"#eeeeee":"/"==u?"url(bg_home.svg) center bottom no-repeat,linear-gradient(105.67deg, #02050E 14.41%, #1D2F23 98.84%)":"linear-gradient(105.67deg, #02050E 14.41%, #1D2F23 98.84%)"},children:e})}},75496:function(t,e,a){"use strict";var r=a(31113),o=a(26361);function DefEmpty(){return(0,r.jsx)("tr",{className:"text-lg font-normal text-center text-black ",children:(0,r.jsx)("td",{colSpan:100,className:"h-[100px] py-5 align-top"})})}a(64103),e.ZP=t=>{let{header:e,data:a,span:l={},empty:i=(0,r.jsx)(DefEmpty,{}),className:s="relative min-w-full bg-transparent ",headerClassName:u,headerItemClassName:p,tbodyClassName:d="",rowClassName:g,rowStyle:m,cellClassName:f,onClickRow:h,onRowMouseHover:v}=t;return(0,r.jsxs)("table",{className:(0,o.cn)("relative min-w-full bg-transparent ",s),children:[(0,r.jsx)("thead",{className:"",children:(0,r.jsx)("tr",{className:(0,o.cn)("text-left whitespace-nowrap font-normal text-black border-b border-gray-100 pt-5 pb-6 dark:text-slate-50 dark:border-zinc-600",u),children:e.map((t,e)=>(0,r.jsx)("th",{colSpan:l[e],scope:"col",className:(0,o.cn)(0==l[e]?"p-0 w-0":"p-3 font-normal text-sm",p),children:t},e))})}),(0,r.jsxs)("tbody",{className:(0,o.cn)(d),children:[a.map((t,a)=>(0,r.jsx)("tr",{onClick:()=>h&&h(a),onMouseEnter:()=>v&&v(a),onMouseLeave:()=>v&&v(-1),style:"function"==typeof m?m(a):m,className:(0,o.cn)("text-slate-700 dark:text-slate-50 font-medium whitespace-nowrap",h?"cursor-pointer hover:bg-slate-400/10":"","function"==typeof g?g(a):g),children:t.map((t,i)=>i>=e.length?(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsx)("td",{colSpan:l[i],className:(0,o.cn)(0==l[i]?"p-0 w-max":"px-3 py-2 text-sm w-max","function"==typeof f?f(a,i):f),children:t},i))},a)),0===a.length&&i]})]})}},31889:function(t,e,a){"use strict";a.d(e,{Ev:function(){return useLoadBVaults},a1:function(){return useLoadLVaults},g2:function(){return useLoadUserBVaults},tK:function(){return useLoadLntVaults},z2:function(){return useLoadUserLVaults}});var r=a(87031),o=a(19757),l=a(22139),i=a(55349),s=a(64370),u=a(83978),p=a.n(u),d=a(64103),g=a(96670),m=a(59175),f=a(95889);function useLoadLVaults(){let t=(0,m.p)(),e=o.iK[t]||[],{address:a}=(0,g.m)(),r=(0,d.useMemo)(()=>p().chain(o.iK[t]||[]).map(t=>[t.assetTokenAddress,t.xTokenAddress]).flatten().concat([o.O1[t]]).union().value(),[t]);(0,s.a)({queryKey:["UpdateLvautlsTokens",r],queryFn:async()=>(await i.w.getState().sliceTokenStore.updateTokenTotalSupply(r),!0)}),(0,s.a)({queryKey:["UpdateUserLvautlsTokens",r,a],queryFn:async()=>!!a&&(await i.w.getState().sliceTokenStore.updateTokensBalance(r,a),!0)}),(0,s.a)({queryKey:["UpdateLVautls",e],queryFn:async()=>(await i.w.getState().sliceLVaultsStore.updateLVaults(e),!0)})}function useLoadBVaults(){let t=(0,m.p)(),e=(0,d.useMemo)(()=>r.Fw[t].filter(t=>(t.onEnv||[]).includes(l.Vi)),[t,l.Vi]);(0,s.a)({queryKey:["UpdateBVaults",e],queryFn:async()=>(await Promise.all([i.w.getState().sliceBVaultsStore.updateBvaults(e),i.w.getState().sliceBVaultsStore.updateYTokenSythetic(e)]),!0)});let{address:a}=(0,g.m)(),o=(0,d.useMemo)(()=>e.map(t=>[t.asset,t.pToken]).flat().reduce((t,e)=>t.includes(e)?t:[...t,e],[]),[e]);(0,s.a)({queryKey:["UpdateBvautlsTokens",o],queryFn:async()=>(await Promise.all([i.w.getState().sliceTokenStore.updateTokenTotalSupply(o),i.w.getState().sliceTokenStore.updateTokenPrices(o)]),!0),throwOnError:(t,e)=>(console.error(t),!1)}),(0,s.a)({queryKey:["UpdateUserBvautlsTokens",o,a],queryFn:async()=>!!a&&(await i.w.getState().sliceTokenStore.updateTokensBalance(o,a),!0)})}function useLoadLntVaults(){let t=(0,m.p)(),e=(0,d.useMemo)(()=>{var e;return(null===(e=f.f_[t])||void 0===e?void 0:e.filter(t=>(t.onEnv||[]).includes(l.Vi)))||[]},[t,l.Vi]);(0,s.a)({queryKey:["UpdateLntVaults",e],queryFn:async()=>(await i.w.getState().sliceLntVaultsStore.updateLntVaults(e),!0)});let{address:a}=(0,g.m)(),r=(0,d.useMemo)(()=>e.map(t=>[t.vestingToken,t.vToken]).flat().reduce((t,e)=>t.includes(e)?t:[...t,e],[]),[e]);(0,s.a)({queryKey:["UpdateLntvautlsTokens",r],queryFn:async()=>(await i.w.getState().sliceTokenStore.updateTokenTotalSupply(r),await i.w.getState().sliceTokenStore.updateTokenPrices(r),!0),throwOnError:(t,e)=>(console.error(t),!1)}),(0,s.a)({queryKey:["UpdateUserLntvautlsTokens",r,a],queryFn:async()=>!!a&&(await i.w.getState().sliceTokenStore.updateTokensBalance(r,a),!0)})}function useLoadUserLVaults(){let{address:t}=(0,g.m)(),e=(0,m.p)(),a=o.iK[e]||[];(0,s.a)({queryKey:["UpdateAllUserLVaults",e,t,a],queryFn:async()=>!!t&&(await Promise.all(a.map(e=>i.w.getState().sliceLVaultsStore.updateUserLVault(e,t))),!0)})}function useLoadUserBVaults(){let{address:t}=(0,g.m)(),e=(0,m.p)(),a=(0,d.useMemo)(()=>r.Fw[e].filter(t=>(t.onEnv||[]).includes(l.Vi)),[e,l.Vi]),o=(0,i.o)(t=>p().keys(t.sliceBVaultsStore.bvaults).toString(),["sliceBVaultsStore.bvaults"]);(0,s.a)({queryKey:["UpdateAllUserBvaults",a,e,t,o],queryFn:async()=>{if(!t)return!1;let e=i.w.getState().sliceBVaultsStore.bvaults;for(let t of a)if(!e[t.vault])return!1;await Promise.all(a.map(t=>i.w.getState().sliceBVaultsStore.updateEpoches(t)));let getEpochesParams=t=>{let e=i.w.getState().sliceBVaultsStore.bvaults[t.vault],a=[];for(let r=parseInt(e.epochCount.toString());r>0;r--){let e=i.w.getState().sliceBVaultsStore.epoches["".concat(t.vault,"_").concat(r)];a.push(e)}return a};return await Promise.all(a.map(e=>i.w.getState().sliceUserBVaults.updateEpoches(e,t,getEpochesParams(e)))),!0}})}},88439:function(t,e,a){"use strict";a.d(e,{b:function(){return useMemoOfChainId}});var r=a(64103),o=a(59175);function useMemoOfChainId(t){let e=(0,o.p)(),a=(0,r.useRef)({});return(0,r.useMemo)(()=>(a.current[e]||(a.current[e]=t()),a.current[e]),[e])}},45438:function(t,e,a){"use strict";a.d(e,{i:function(){return d},p:function(){return useUpdatePtypoolApy}});var r=a(19757),o=a(22139),l=a(55349),i=a(64103),s=a(33737),u=a(93108),p=a(59175);let d=(0,u.Ue)(t=>({update:t}));function useUpdatePtypoolApy(t){let e=(0,p.p)(),a=r.iK[e]||[],u=(0,l.o)(t=>t.sliceLVaultsStore.lvaults,["sliceLVaultsStore.lvaults"]);(0,i.useEffect)(()=>{console.info("updatePtypoolApy"),null==a||a.forEach(a=>{let l=u[a.vault];if(a.ptyPoolAboveAddress&&l&&l.sellPoolTotalStaking&&d.getState().update({[a.ptyPoolAboveAddress]:{staking:(0,s.v)("0.025",10),matching:0n}}),a.ptyPoolBelowAddress&&l&&l.buyPoolTotalStaking&&!l.isStable){let i=l&&l.sellPoolTotalStaking*t[r.O1[e]],s=i>0n&&l.settingsDecimals>0n?l.M_ETHx*l.Y*t[a.xTokenAddress]*o.Pq/2n/i/l.settingsDecimals**10n:0n;d.getState().update({[a.ptyPoolBelowAddress]:{staking:s*10n**10n/o.Pq,matching:0n}})}})},[a,u,t,e])}},15506:function(t,e,a){"use strict";a.d(e,{D2:function(){return useWandContractRead},uX:function(){return useWandContractReads}}),a(78403);var r=a(83978),o=a.n(r);a(64103);var l=a(30308),i=a(59307),s=a(93108);let u=(0,s.Ue)(t=>({time:o().now(),update:()=>{t({time:o().now()})}}));function useWandContractRead(t){let{time:e}=u();return(0,l.u)({...t,query:{placeholderData:t=>t,refetchOnMount:!1,refetchOnWindowFocus:!1,...t.query||{}},wandtime:e})}function useWandContractReads(t){let{time:e}=u();return(0,i.N)({...t,query:{placeholderData:t=>t,refetchOnMount:!1,refetchOnWindowFocus:!1,...t.query||{}},wandtime:e})}},52671:function(t,e,a){"use strict";a.d(e,{g:function(){return x},A:function(){return FetcherProvider}});var r=a(31113),o=a(19757),l=a(22139),i=a(59175),s=a(64103),u=a(25233),p=a(87958),d=a(41340),g=a(73216),m=a(88439),f=a(45438),h=a(26361),v=a(64370),b=a(55349),y=a(18358),S=a(39577);let x=(0,s.createContext)({prices:(0,h.Yb)({},0n),usbApr:{apr:0n,aprDecimals:10}}),FetcherProvider=t=>{let{children:e}=t;(0,y.d6)();let a=(0,i.p)();!function(){let{chainId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,u.m)({chainId:t});s.useMemo(()=>(e&&(g.ON.provider=function(t){var e,a;let{chain:r,transport:o}=t,l={chainId:r.id,name:r.name,ensAddress:null===(a=r.contracts)||void 0===a?void 0:null===(e=a.ensRegistry)||void 0===e?void 0:e.address};return"fallback"===o.type?new p.H(o.transports.map(t=>{let{value:e}=t;return new d.r(null==e?void 0:e.url,l)})):new d.r(o.url,l)}(e)),g.ON.provider),[e])}();let B=(0,m.b)(()=>(0,h.Yb)({[o.O1[a]]:l.Pq},0n));(0,S.$$)(B);let T=(0,S.UM)();return(0,f.p)(B),(0,v.a)({queryKey:["updateDefTokenList",a],staleTime:36e5,queryFn:async()=>(await b.w.getState().sliceTokenStore.updateDefTokenList(),!0)}),(0,r.jsx)(x.Provider,{value:{prices:B,usbApr:T},children:e})}},18358:function(t,e,a){"use strict";a.d(e,{R3:function(){return useUpBVaultForUserAction},Vw:function(){return useEpochesData},Zd:function(){return useBVaultEpoches},d6:function(){return useResetBVaultsData},gz:function(){return useCalcClaimable},lL:function(){return calcBVaultPTApy},nr:function(){return useBVault},oU:function(){return useBVaultApy},pg:function(){return calcBVaultBoost},v7:function(){return useBVaultBoost}});var r=a(22139),o=a(59175),l=a(26361),i=a(84944),s=a(83978),u=a.n(s),p=a(64103),d=a(96670),g=a(55349);function useResetBVaultsData(){let t=(0,o.p)(),{address:e}=(0,d.m)();(0,p.useEffect)(()=>{},[t]),(0,p.useEffect)(()=>{g.w.getState().sliceUserBVaults.reset()},[e])}function useBVault(t){return(0,g.o)(e=>e.sliceBVaultsStore.bvaults[t]||(0,l.Yb)({current:(0,l.Yb)({},0n)},0n),["sliceBVaultsStore.bvaults.".concat(t)])}function useBVaultEpoches(t){return(0,g.o)(e=>{let a=e.sliceBVaultsStore.bvaults[t];if(!a||a.epochCount<=0n)return[];let r=u().range(1,parseInt((a.epochCount+1n).toString())).reverse(),o=e.sliceBVaultsStore.epoches;return r.map(e=>o["".concat(t,"_").concat(e)]).filter(t=>null!=t)},["sliceBVaultsStore.bvaults.".concat(t),"sliceBVaultsStore.epoches"])}function useEpochesData(t){let e=useBVaultEpoches(t),a=(0,g.o)(e=>e.sliceUserBVaults.epoches[t]||[],["sliceUserBVaults.epoches.".concat(t)]);return(0,p.useMemo)(()=>{let t=a.reduce((t,e)=>({...t,[e.epochId.toString()]:e}),{});return e.map(e=>(0,l.Yb)({...e,...t[e.epochId.toString()]||{bribes:[],sBribes:[],aBribes:[]}},0n))},[e,a])}function useCalcClaimable(t){let e=useEpochesData(t);return(0,p.useMemo)(()=>{let t=e.filter(t=>t.claimableAssetBalance&&t.settled);return{ids:t.map(t=>t.epochId),claimable:t.reduce((t,e)=>t+e.claimableAssetBalance,0n)}},[e])}function calcBVaultBoost(t){let e=g.w.getState(),a=e.sliceBVaultsStore.bvaults[t],o=(null==a?void 0:a.current.vaultYTokenBalance)||0n,l=(null==a?void 0:a.Y)||0n,s=l>0n?o*r.Pq/l:0n,u=(null==a?void 0:a.current.yTokenAmountForSwapYT)||0n,p=(null==a?void 0:a.lockedAssetTotal)||0n,d=u>0n?p*r.Pq/u:0n;return console.info("calcBootst:",(0,i.d)(s),(0,i.d)(d)),s}function useBVaultBoost(t){let e=(0,g.o)(()=>calcBVaultBoost(t),["sliceBVaultsStore.bvaults.".concat(t)]);return[(0,i.d)(e,0),e]}function calcBVaultPTApy(t){let e=g.w.getState(),a=e.sliceBVaultsStore.bvaults[t],o=(0,l.ok)(e.sliceBVaultsStore.yTokenSythetic,[t]),i=a&&a.current.assetTotalSwapAmount&&o?a.current.assetTotalSwapAmount*r.SH*BigInt(1e10)/o:0n;return i}function useBVaultApy(t){let e=(0,g.o)(()=>calcBVaultPTApy(t),["sliceBVaultsStore.bvaults.".concat(t),"sliceBVaultsStore.yTokenSythetic.".concat(t)]);return[(0,l.Jh)(e,10),e]}function useUpBVaultForUserAction(t,e){let{address:a}=(0,d.m)();return()=>{(0,l.XD)(async()=>{if(null==e||e(),!a)return;await Promise.all([g.w.getState().sliceTokenStore.updateTokensBalance([t.asset,t.pToken],a),g.w.getState().sliceTokenStore.updateTokenTotalSupply([t.asset,t.pToken]),g.w.getState().sliceBVaultsStore.updateBvaults([t]),g.w.getState().sliceBVaultsStore.updateYTokenSythetic([t])]);let r=g.w.getState().sliceBVaultsStore.bvaults[t.vault];await g.w.getState().sliceBVaultsStore.updateEpoches(t,r.epochCount>1n?[r.epochCount,r.epochCount-1n]:[r.epochCount]);let o=[];for(let e=parseInt(r.epochCount.toString());e>0;e--){let a=g.w.getState().sliceBVaultsStore.epoches["".concat(t.vault,"_").concat(e)];o.push(a)}console.info("onUserAction:epoches",o),await g.w.getState().sliceUserBVaults.updateEpoches(t,a,o)},3,1e3)}}},39577:function(t,e,a){"use strict";a.d(e,{$$:function(){return useSetLVaultPrices},UM:function(){return useUSBApr},aS:function(){return useValutsLeverageRatio},hC:function(){return useLVault},hY:function(){return useUserLVault},so:function(){return useUpLVaultOnUserAction},z6:function(){return useVaultLeverageRatio}});var r=a(19757),o=a(22139),l=a(59175),i=a(88439),s=a(26361),u=a(55349),p=a(96670),d=a(73216);let g=(0,s.Yb)({vaultMode:0,discountEnable:!1},0n),m=(0,s.Yb)({},0n);function useLVault(t){return(0,u.o)(e=>e.sliceLVaultsStore.lvaults[t]||g,["sliceLVaultsStore.lvaults.".concat(t)])}function useUserLVault(t){return(0,u.o)(e=>e.sliceLVaultsStore.user[t]||m,["sliceLVaultsStore.user.".concat(t)])}function useVaultLeverageRatio(t){let e=useLVault(t.vault),a=(0,s.pF)(e.aar,e.AARDecimals);return Math.max(0,1+1/(a-1))}function useValutsLeverageRatio(){let t=(0,l.p)(),e=r.iK[t]||[],a=(0,i.b)(()=>(0,s.Yb)({},0)),o=(0,u.o)(t=>t.sliceLVaultsStore.lvaults);return null==e||e.forEach(t=>{let e=o[t.vault],r=e?(0,s.pF)(e.aar,e.AARDecimals):0;a[t.vault]=Math.max(0,1+1/(r-1))}),a}function useSetLVaultPrices(t){var e;let a=(0,u.o)(t=>t.sliceLVaultsStore.lvaults),i=(0,u.o)(t=>t.sliceTokenStore.totalSupply),s=(0,l.p)();null===(e=r.iK[s])||void 0===e||e.forEach(e=>{let l=a[e.vault]||g,u=l.assetBalance,p=l.latestPrice,d=l.usbTotalSupply,m=i[e.xTokenAddress]||0n,f=m>0n&&u>0n&&p>0n&&d>0n&&u*p>d*o.Pq?(u*p-d*o.Pq)/m:0n;t[e.xTokenAddress]=f,t[e.assetTokenAddress]=p,m>0n&&u>0n&&p>0n&&d>0n&&u*p<d*o.Pq&&(t[r.O1[s]]=u*p/d)})}function useUSBApr(){var t;let e=(0,l.p)(),a=(0,u.o)(t=>t.sliceLVaultsStore.lvaults),o=0,i=0n,s=0n;return null===(t=r.iK[e])||void 0===t||t.forEach(t=>{let e=a[t.vault]||g;e.isStable?(i+=e.M_USB_USDC*e.Y*e.aar/10n**e.AARDecimals,s+=e.M_USB_USDC,e.M_USB_USDC>0n&&e.Y>0n&&o++):(i+=e.M_USB_ETH*e.Y,s+=e.M_USB_ETH,e.M_USB_ETH>0n&&e.Y>0n&&o++)}),{apr:s>0n?i/s:0n,aprDecimals:10}}function useUpLVaultOnUserAction(t){let{address:e}=(0,p.m)();return()=>{(0,s.XD)(async()=>{if(!e)return;let a=u.w.getState().sliceLVaultsStore,o=[t.assetTokenAddress,t.xTokenAddress,r.O1[(0,d.BV)()]];await Promise.all([a.updateLVaults([t]),a.updateUserLVault(t,e),u.w.getState().sliceTokenStore.updateTokensBalance(o,e),u.w.getState().sliceTokenStore.updateTokenTotalSupply(o)])},3,1e3).catch(console.error)}}},55046:function(t,e,a){"use strict";function hashFn(t){return JSON.stringify(t,(t,e)=>!function(t){if(!hasObjectPrototype(t))return!1;let e=t.constructor;if(void 0===e)return!0;let a=e.prototype;return!!(hasObjectPrototype(a)&&a.hasOwnProperty("isPrototypeOf"))}(e)?"bigint"==typeof e?e.toString():e:Object.keys(e).sort().reduce((t,a)=>(t[a]=e[a],t),{}))}function hasObjectPrototype(t){return"[object Object]"===Object.prototype.toString.call(t)}function filterQueryOptions(t){let{_defaulted:e,behavior:a,gcTime:r,initialData:o,initialDataUpdatedAt:l,maxPages:i,meta:s,networkMode:u,queryFn:p,queryHash:d,queryKey:g,queryKeyHashFn:m,retry:f,retryDelay:h,structuralSharing:v,getPreviousPageParam:b,getNextPageParam:y,initialPageParam:S,_optimisticResults:x,enabled:B,notifyOnChangeProps:T,placeholderData:V,refetchInterval:k,refetchIntervalInBackground:w,refetchOnMount:L,refetchOnReconnect:M,refetchOnWindowFocus:A,retryOnMount:P,select:j,staleTime:R,suspense:C,throwOnError:U,config:q,connector:E,query:N,...D}=t;return D}a.d(e,{O:function(){return filterQueryOptions},k:function(){return hashFn}})},44178:function(t,e,a){"use strict";a.d(e,{aM:function(){return useQuery},if:function(){return structuralSharing}});var r=a(64370),o=a(72549),l=a(73992),i=a(55046);function useQuery(t){let e=(0,r.a)({...t,queryKeyHashFn:i.k});return e.queryKey=t.queryKey,e}function structuralSharing(t,e){return(0,l.v)(t,e)?t:(0,o.Q$)(t,e)}}},function(t){t.O(0,[4881,7495,7622,842,3606,7625,956,6002,7093,604,1744],function(){return t(t.s=36599)}),_N_E=t.O()}]);