"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4634],{62653:function(e,t,s){s.d(t,{Z:function(){return m}});var n=s(55731),a=s(77317),r=s(13012),i=s(40460);let l={0:"grid-cols-none",1:"grid-cols-1",2:"grid-cols-2",3:"grid-cols-3",4:"grid-cols-4",5:"grid-cols-5",6:"grid-cols-6",7:"grid-cols-7",8:"grid-cols-8",9:"grid-cols-9",10:"grid-cols-10",11:"grid-cols-11",12:"grid-cols-12"},o={0:"sm:grid-cols-none",1:"sm:grid-cols-1",2:"sm:grid-cols-2",3:"sm:grid-cols-3",4:"sm:grid-cols-4",5:"sm:grid-cols-5",6:"sm:grid-cols-6",7:"sm:grid-cols-7",8:"sm:grid-cols-8",9:"sm:grid-cols-9",10:"sm:grid-cols-10",11:"sm:grid-cols-11",12:"sm:grid-cols-12"},c={0:"md:grid-cols-none",1:"md:grid-cols-1",2:"md:grid-cols-2",3:"md:grid-cols-3",4:"md:grid-cols-4",5:"md:grid-cols-5",6:"md:grid-cols-6",7:"md:grid-cols-7",8:"md:grid-cols-8",9:"md:grid-cols-9",10:"md:grid-cols-10",11:"md:grid-cols-11",12:"md:grid-cols-12"},d={0:"lg:grid-cols-none",1:"lg:grid-cols-1",2:"lg:grid-cols-2",3:"lg:grid-cols-3",4:"lg:grid-cols-4",5:"lg:grid-cols-5",6:"lg:grid-cols-6",7:"lg:grid-cols-7",8:"lg:grid-cols-8",9:"lg:grid-cols-9",10:"lg:grid-cols-10",11:"lg:grid-cols-11",12:"lg:grid-cols-12"},u=(0,r.fn)("Grid"),Grid_c=(e,t)=>e&&Object.keys(t).includes(String(e))?t[e]:"",m=a.forwardRef((e,t)=>{let{numItems:s=1,numItemsSm:r,numItemsMd:m,numItemsLg:f,children:x,className:p}=e,v=(0,n._T)(e,["numItems","numItemsSm","numItemsMd","numItemsLg","children","className"]),h=(0,a.useMemo)(()=>{let e=Grid_c(s,l),t=Grid_c(r,o),n=Grid_c(m,c),a=Grid_c(f,d);return(0,i.q)(e,t,n,a)},[s,r,m,f]);return a.createElement("div",Object.assign({ref:t,className:(0,i.q)(u("root"),"grid",h,p)},v),x)});m.displayName="Grid"},68495:function(e){var t,s="object"==typeof Reflect?Reflect:null,n=s&&"function"==typeof s.apply?s.apply:function(e,t,s){return Function.prototype.apply.call(e,t,s)};t=s&&"function"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function EventEmitter(){EventEmitter.init.call(this)}e.exports=EventEmitter,e.exports.once=function(e,t){return new Promise(function(s,n){function errorListener(s){e.removeListener(t,resolver),n(s)}function resolver(){"function"==typeof e.removeListener&&e.removeListener("error",errorListener),s([].slice.call(arguments))}eventTargetAgnosticAddListener(e,t,resolver,{once:!0}),"error"!==t&&"function"==typeof e.on&&eventTargetAgnosticAddListener(e,"error",errorListener,{once:!0})})},EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var r=10;function checkListener(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function _getMaxListeners(e){return void 0===e._maxListeners?EventEmitter.defaultMaxListeners:e._maxListeners}function _addListener(e,t,s,n){if(checkListener(s),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,s.listener?s.listener:s),r=e._events),i=r[t]),void 0===i)i=r[t]=s,++e._eventsCount;else if("function"==typeof i?i=r[t]=n?[s,i]:[i,s]:n?i.unshift(s):i.push(s),(a=_getMaxListeners(e))>0&&i.length>a&&!i.warned){i.warned=!0;var a,r,i,l=Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=i.length,console&&console.warn&&console.warn(l)}return e}function onceWrapper(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(e,t,s){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:s},a=onceWrapper.bind(n);return a.listener=s,n.wrapFn=a,a}function _listeners(e,t,s){var n=e._events;if(void 0===n)return[];var a=n[t];return void 0===a?[]:"function"==typeof a?s?[a.listener||a]:[a]:s?function(e){for(var t=Array(e.length),s=0;s<t.length;++s)t[s]=e[s].listener||e[s];return t}(a):arrayClone(a,a.length)}function listenerCount(e){var t=this._events;if(void 0!==t){var s=t[e];if("function"==typeof s)return 1;if(void 0!==s)return s.length}return 0}function arrayClone(e,t){for(var s=Array(t),n=0;n<t;++n)s[n]=e[n];return s}function eventTargetAgnosticAddListener(e,t,s,n){if("function"==typeof e.on)n.once?e.once(t,s):e.on(t,s);else if("function"==typeof e.addEventListener)e.addEventListener(t,function wrapListener(a){n.once&&e.removeEventListener(t,wrapListener),s(a)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(e){if("number"!=typeof e||e<0||a(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");r=e}}),EventEmitter.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);var a="error"===e,r=this._events;if(void 0!==r)a=a&&void 0===r.error;else if(!a)return!1;if(a){if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var i,l=Error("Unhandled error."+(i?" ("+i.message+")":""));throw l.context=i,l}var o=r[e];if(void 0===o)return!1;if("function"==typeof o)n(o,this,t);else for(var c=o.length,d=arrayClone(o,c),s=0;s<c;++s)n(d[s],this,t);return!0},EventEmitter.prototype.addListener=function(e,t){return _addListener(this,e,t,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(e,t){return _addListener(this,e,t,!0)},EventEmitter.prototype.once=function(e,t){return checkListener(t),this.on(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.prependOnceListener=function(e,t){return checkListener(t),this.prependListener(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.removeListener=function(e,t){var s,n,a,r,i;if(checkListener(t),void 0===(n=this._events)||void 0===(s=n[e]))return this;if(s===t||s.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,s.listener||t));else if("function"!=typeof s){for(a=-1,r=s.length-1;r>=0;r--)if(s[r]===t||s[r].listener===t){i=s[r].listener,a=r;break}if(a<0)return this;0===a?s.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(s,a),1===s.length&&(n[e]=s[0]),void 0!==n.removeListener&&this.emit("removeListener",e,i||t)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(e){var t,s,n;if(void 0===(s=this._events))return this;if(void 0===s.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==s[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete s[e]),this;if(0==arguments.length){var a,r=Object.keys(s);for(n=0;n<r.length;++n)"removeListener"!==(a=r[n])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=s[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},EventEmitter.prototype.listeners=function(e){return _listeners(this,e,!0)},EventEmitter.prototype.rawListeners=function(e){return _listeners(this,e,!1)},EventEmitter.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):listenerCount.call(e,t)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},38108:function(e,t,s){s.d(t,{r:function(){return n.Z}});var n=s(62653)},84634:function(e,t,s){s.r(t),s.d(t,{default:function(){return Vaults}});var n=s(52987),a=s(787),r=s(71784),i=s(43213),l=s(81501),o=s(7347),c=s(96555),d=s(40292),u=s(99409),m=s(84525),f=s(17014),x=s(13854),p=s(62628),v=s(32422),h=s(44100),b=s(29293),g=s(64370),y=s(65551),j=s(83978),k=s.n(j),w=s(96396),N=s(77317),T=s(12485),S=s(93650),E=s(14993),C=s(55272),B=s(5624),L=s(44964),A=s(88474),I=s(87621),P=s(4949),_=s(39809),F=s(11877),R=s(51470),M=s(31506),Y=s(27022),O=s(3861),V=s(33501),q=s(85665),D=s(68728),W=s(77087),K=s(24113);function TokenSymbol(e){let{token:t}=e;return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(M.c,{symbol:t.symbol,size:24}),t.symbol]})}function TokenInput(e){let{tokens:t,checkBalance:s=!0,balance:a=!0,balanceTit:r="Balance",exchange:i,readonly:l,selected:o,onClick:c,amount:d,setAmount:u,price:f,disable:p,balanceClassName:v="",loading:h,error:g="",onTokenChange:y}=e,j=(0,N.useMemo)(()=>t.map(e=>({key:e.address,show:(0,n.jsx)(TokenSymbol,{token:e}),data:e})),[t]),[w,T]=(0,N.useState)(t[0]),S=(0,m.KQ)(s?w:void 0),E=S.result,C=(0,N.useRef)(null),B=s&&void 0!==E&&(0,x.su)("number"==typeof d?d+"":d||"",w.decimals)>("bigint"==typeof E?E:0n),L=!!g||B,[A,{width:I}]=(0,q.Z)();return 0==t.length?null:(0,n.jsxs)("div",{className:"relative w-full",onClick:()=>{c&&!p&&c()},children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("div",{className:"absolute flex items-center h-fit gap-2 left-[48px] bottom-1 w-full  max-w-[calc(100%-56px)]",style:{pointerEvents:"none"},children:[f&&(0,n.jsx)("div",{className:"text-neutral-500 dark:text-slate-50/70 text-xs max-w-full overflow-hidden",children:f}),i&&(0,n.jsxs)("div",{className:"text-slate-500 dark:text-slate-50/70 text-xs max-w-full overflow-hidden",children:["~$",i]})]}),(0,n.jsx)("div",{className:"absolute flex items-center gap-2 w-fit top-1/2 left-4 -translate-y-1/2 z-50",ref:A,children:t.length>1?(0,n.jsx)(K.G,{className:"border-none",options:j,onChange:e=>{T(e.data),null==y||y(e.data)}}):(0,n.jsx)(TokenSymbol,{token:w})}),(0,n.jsx)("input",{value:h?"":d,onChange:e=>{if(l)return;let t=(e.target.value||"").replaceAll("-","").replaceAll("+","");u(t)},ref:C,type:"number",disabled:p,style:{paddingLeft:"".concat(k().round((I+32)/16,3),"rem")},className:(0,V.Z)(l?"bg-slate-50 cursor-not-allowed dark:bg-slate-800":"bg-white dark:bg-transparent",{"border-green-700 border-2":o,"border-red-400 !border-2 focus:border-red-400":L,"border-slate-400  focus:border-primary":!L&&!o},"w-full h-14 text-right pr-4 font-bold text-lg border-[#4A5546] border focus:border-2 text-slate-700 rounded-lg outline-none dark:text-slate-50"),placeholder:"0.000",maxLength:36,pattern:"[0-9.]{36}",step:.01,title:"",readOnly:l}),h&&(0,n.jsx)(W.$,{className:"absolute right-24 top-[1.125rem]"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between mt-1 px-1 text-slate-400 dark:text-slate-50/70 text-sm",children:[a&&(0,n.jsxs)("div",{className:v,children:[(0,n.jsxs)("span",{children:[r,": ",(0,b.d)(E,void 0,w.decimals)]}),(0,n.jsx)("button",{className:"text-primary ml-2",onClick:()=>{let e=(0,D.b)(E,w.decimals);u(e),c&&!p&&c()},children:"Max"})]}),L&&(0,n.jsx)("div",{className:"text-sm text-red-400",children:g||"Insufficient account balance"})]})]})}var U=s(25282),Z=s(7807);async function wrapIfErc4626(e){let{chainId:t,vc:s,token:n,inputBn:a,user:r}=e,i=[],l=a;return(0,C.E)(s.asset,n)||(l=await (0,p.B)(t).readContract({abi:B.EN,address:s.asset,functionName:"previewDeposit",args:[a]}),i=[{abi:B.Wo,address:n,functionName:"approve",args:[s.asset,a]},{abi:B.EN,address:s.asset,functionName:"deposit",args:[a,r]}]),{txs:i,sharesBn:l}}function useTokens(e){let t=(0,u.p)();return(0,N.useMemo)(()=>{let s=[...e.moreAssets||[],e.asset],n=(0,j.union)(s.map(e=>e.toLowerCase())).map(e=>(0,o.kb)(e,t)).filter(Boolean);return n},[e])}function TupleTxt(e){return(0,n.jsxs)("div",{className:"flex items-center gap-5",children:[(0,n.jsx)("div",{className:"text-xs dark:text-white/60 font-medium",children:e.tit}),(0,n.jsx)("div",{className:(0,x.cn)("text-lg  font-medium flex items-center",e.subClassname),children:e.sub})]})}let G=BigInt(1e16);function BVaultApy(e){let{bvc:t,showTip:s=!1}=e,[a,r]=(0,h.oU)(t),{data:i}=(0,f.d)(),l=(0,x.Jh)("vIP"===t.assetSymbol?r+i:r,10);return"vIP"===t.assetSymbol&&s?(0,n.jsxs)(U.C,{className:"underline underline-offset-[3px]",node:l,children:[(0,n.jsxs)("div",{children:["vIP Base: ",(0,x.Jh)(i,10)]}),(0,n.jsxs)("div",{children:["YT Income: ",a]})]}):(0,n.jsx)(n.Fragment,{children:l})}function BVaultCard(e){var t,s,a;let{vc:i}=e,c=(0,u.p)(),m=(0,w.useRouter)(),[f,p]=i.assetSymbol.split("-"),v=(0,h.nr)(i.vault),g=(0,o.kb)(i.asset,c),[y,j,T]=(0,h.OY)(i),S=l.P[i.asset],E=v.lpBase||0n,C=v.lpQuote||0n,B="Epoch ".concat(((null==v?void 0:v.epochCount)||0n).toString()),L=0n==v.epochCount?"-- -- --":(0,x.G$)((v.current.startTime+v.current.duration)*1000n,x.mv.DATE2),A=0n==v.epochCount?"":(0,x.Y)((v.current.startTime+v.current.duration)*1000n-BigInt(k().now())),{data:{avrageApy:I,items:P}}=(0,d.Zi)(i),{roi:_}=(0,d.tY)(i);return(0,n.jsxs)("div",{className:(0,x.cn)("card !p-0 grid grid-cols-2 overflow-hidden",{}),children:[(0,n.jsxs)("div",{className:(0,x.cn)(Z.bG,"border-b","bg-black/10 dark:bg-white/10 col-span-2 flex-row px-4 md:px-5 py-4 items-center"),children:[(0,n.jsx)(M.c,{symbol:null!==(t=i.icon)&&void 0!==t?t:i.assetSymbol,size:44}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:" text-lg font-semibold whitespace-nowrap",children:null!==(s=i.tit)&&void 0!==s?s:i.assetSymbol}),(0,n.jsx)("div",{className:" text-sm font-medium",children:null!==(a=i.sub)&&void 0!==a?a:i.assetSymbol.includes("-")?"LP Token":""})]}),(0,n.jsxs)("div",{className:"ml-auto",children:[(0,n.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:"Total Value Locked"}),(0,n.jsxs)("div",{className:"text-sm font-medium",children:["$",(0,b.d)(y,2,g.decimals)]})]})]}),S&&(0,Z.BW)(f,E,j),S&&(0,Z.BW)(p,C,T,18,!0),(0,Z.yP)("Settlement Time",v.closed?"status-red":"status-green",v.closed?"Closed":(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,n.jsx)("span",{children:L}),(0,n.jsx)("span",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:A})]}),v.epochCount>0n&&(0,n.jsx)("div",{className:"absolute top-full mt-1 left-0 text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:B})]})),(0,Z.yP)("Reward",i.rewardSymbol||"vIP",(0,n.jsxs)(N.Fragment,{children:[(0,n.jsx)("span",{children:"Spice Points"===i.rewardSymbol?"".concat(i.rewardSymbol," 20x"):i.rewardSymbol||"vIP"}),"vIP"==(i.rewardSymbol||"vIP")&&(0,n.jsxs)("div",{className:"text-xs whitespace-nowrap absolute top-2/3 left-1/2 -translate-x-1/2",children:["Underlying APY:",(0,n.jsx)(U.C,{node:(0,n.jsx)("span",{className:"underline underline-offset-2",children:(0,x.Jh)(I,18,2)}),children:(0,n.jsxs)("div",{className:"grid grid-cols-3",children:[(0,n.jsx)("div",{className:"p-2",children:"IP Asset"}),(0,n.jsx)("div",{className:"p-2",children:"Restaked"}),(0,n.jsx)("div",{className:"p-2",children:"APY"}),P.map(e=>(0,n.jsxs)(N.Fragment,{children:[(0,n.jsx)("div",{className:"px-2",children:e.tit||"-"}),(0,n.jsx)("div",{className:"px-2",children:(0,b.d)(e.staked)}),(0,n.jsx)("div",{className:"px-2",children:(0,x.Jh)(e.apy,18,2)})]},e.tit))]})})]})]}),!0),(0,Z.Sn)(i.pTokenSymbol,"Principal Token",(0,n.jsx)(BVaultApy,{bvc:i}),i.yTokenSymbol,"Yield Token","".concat("Spice Points"!==i.rewardSymbol?(0,x.Jh)(_,18,2):""),e=>{e.stopPropagation(),(0,r.rc)(m,i.vault,"pt")},e=>{e.stopPropagation(),(0,r.rc)(m,i.vault,"yt")})]})}function Info(e){var t,s,a,r;let{vc:i}=e,l=(0,u.p)(),c=(0,o.kb)(i.asset,l),d=(0,h.nr)(i.vault),m=d.current,[f]=(0,h.OY)(i);return(0,n.jsxs)("div",{style:{backdropFilter:"blur(20px)"},className:"card bg-white flex flex-col h-full gap-10",children:[(0,n.jsxs)("div",{className:"flex flex-wrap gap-5 items-center",children:[(0,n.jsx)(M.c,{symbol:null!==(t=i.icon)&&void 0!==t?t:i.assetSymbol,size:35}),(0,n.jsxs)("div",{className:"flex flex-col whitespace-nowrap font-semibold",children:[(0,n.jsx)("div",{className:"text-lg",children:null!==(s=i.tit)&&void 0!==s?s:i.assetSymbol}),(0,n.jsx)("div",{className:"text-xs",children:null!==(a=i.sub)&&void 0!==a?a:i.assetSymbol})]}),(0,n.jsxs)("div",{className:"flex flex-col whitespace-nowrap font-semibold gap-1 ml-auto",children:[(0,n.jsx)("div",{className:"text-sm",children:"Underlying Asset"}),(0,n.jsx)(F.T,{token:(0,o.kb)(i.asset,l,{symbol:i.assetSymbol||"vIP",decimals:18})})]}),(0,n.jsxs)("div",{className:"flex flex-col whitespace-nowrap font-semibold gap-1",children:[(0,n.jsx)("div",{className:"text-sm",children:"Total Vaule Locked"}),(0,n.jsxs)("div",{className:"text-xs opacity-60",children:["$",(0,b.d)(f,2,c.decimals)]})]})]}),(0,n.jsx)("div",{className:"opacity-60 text-sm font-medium leading-normal whitespace-pre-wrap",children:null!==(r=i.des)&&void 0!==r?r:""}),m&&(0,n.jsxs)("div",{className:"dark:text-white/60 text-xs whitespace-nowrap gap-1 flex w-full flex-col",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{children:"Duration"}),(0,n.jsxs)("span",{className:"scale-90",children:["~",(0,x.Y)((m.startTime+m.duration)*1000n-BigInt(new Date().getTime()))," remaining"]})]}),(0,n.jsx)(y.k,{value:(e=>{let t=BigInt(Math.floor(new Date().getTime()/1e3));if(t<e.startTime)return 0;if(t-m.startTime>=m.duration)return 100;let s=(t-m.startTime)*100n/e.duration;return parseInt(s.toString())})(m),className:"mt-2 rounded-full overflow-hidden"}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"scale-90",children:(0,x.G$)(1000n*m.startTime,x.mv.ALL2)}),(0,n.jsx)("span",{className:"scale-90",children:(0,x.G$)((m.startTime+m.duration)*1000n,x.mv.ALL2)})]})]})]})}function PT(e){let{vc:t}=e,[s,a]=(0,N.useState)(""),r=l.P[t.asset],c=!!r;c||t.pTokenSymbol,c||t.assetSymbol;let d=(0,h.nr)(t.vault),{data:f}=(0,A.p)(),v=(0,u.p)(),y=(0,o.kb)(t.pToken,v),{address:j}=(0,I.m)(),k=(0,h.R3)(t),w=useTokens(t),[T,S]=(0,N.useState)(w[0]),E=(0,m.KQ)(T),L=(0,x.su)(s,T.decimals),_=L>0n&&"vIP"===t.assetSymbol&&L<G,{data:F,isFetching:Y}=(0,g.a)({queryKey:["calcPTout",v,L,T],initialData:0n,queryFn:async()=>(0,C.E)(t.asset,T.address)?L:(0,p.B)(v).readContract({abi:B.EN,address:t.asset,functionName:"previewDeposit",args:[L]})});return(0,n.jsxs)("div",{className:(0,x.cn)("flex flex-col gap-5 w-full"),children:[(0,n.jsxs)("div",{className:"card !p-0 overflow-hidden w-full",children:[(0,n.jsxs)("div",{className:"flex p-5 bg-[#10B98126] gap-5",children:[(0,n.jsx)(M.c,{size:54,symbol:t.pTokenSymbol}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("div",{className:"text-xl text-black dark:text-white font-semibold",children:t.pTokenSymbol}),(0,n.jsxs)("div",{className:"text-xs text-black/60 dark:text-white/60 font-medium",children:["1 ",t.pTokenSymbol," is equal to 1 ",t.assetSymbol," deposited in ",t.compney," at maturity"]})]})]}),(0,n.jsxs)("div",{className:"flex items-baseline justify-between px-5 pt-5 gap-5",children:[(0,n.jsx)(TupleTxt,{tit:"APY Est.",sub:(0,n.jsx)(BVaultApy,{bvc:t,showTip:!0})}),(0,n.jsx)(TupleTxt,{tit:"Total Supply",sub:(0,n.jsx)(n.Fragment,{children:(0,b.d)(d.pTokenTotal,void 0,y.decimals)})})]}),(0,n.jsx)("div",{className:"flex px-2 pb-5",children:(0,n.jsx)("button",{className:"btn-link ml-auto text-black/60 dark:text-white/60 text-xs",onClick:()=>{null==f||f.watchAsset({type:"ERC20",options:{address:t.pToken,symbol:t.pTokenSymbol,decimals:18}}).catch(x.S3)},children:"Add to wallet"})})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)(TokenInput,{tokens:w,onTokenChange:S,amount:s,setAmount:a,error:_?"Minimum amount is ".concat((0,b.d)(G)):""}),(0,n.jsx)(R.x,{address:t.asset}),(0,n.jsx)("div",{className:"text-base font-bold my-2",children:"Receive"}),(0,n.jsx)(TokenInput,{tokens:[y],balance:!1,loading:Y&&!!s,readonly:!0,disable:!0,checkBalance:!1,amount:(0,x.Kl)(F,y.decimals)}),(0,n.jsx)(P.$M,{className:"mx-auto mt-4",tx:"Buy",disabled:L<=0n||L>E.result||_,txs:async()=>{let{txs:e,sharesBn:s}=await wrapIfErc4626({chainId:v,vc:t,token:T.address,inputBn:L,user:j});return[...e,{abi:B.Wo,address:t.asset,functionName:"approve",args:[t.vault,s]},{abi:i.j5,address:t.vault,functionName:"deposit",args:[s]}]},onTxSuccess:()=>{a(""),k()}})]})]})}function YT(e){var t;let{vc:s}=e,a=useTokens(s),[r,l]=(0,N.useState)(a[0]),d=s.assetSymbol.includes("-");d||s.pTokenSymbol;let f=d?"YT":s.yTokenSymbol,v=d?"LP token":s.assetSymbol,[y,j]=(0,N.useState)(""),k=(0,x.su)(y,r.decimals),w=(0,h.nr)(s.vault),C=(0,h.RA)(s.vault),L=null==C?void 0:C[0],A=(0,u.p)(),F=(0,o.kb)(s.asset,A),{address:Y}=(0,I.m)(),[O,V]=(0,N.useState)(["calcSwap",s.vault,k,A]);(0,S.Z)(()=>V(["calcSwap",s.vault,k,A]),300,["calcSwap",s.vault,k,A]);let{data:q,isFetching:D}=(0,g.a)({queryKey:O,queryFn:()=>(0,p.B)().readContract({abi:i.j5,address:s.vault,functionName:"calcSwap",args:[k]})}),W=w.current.yTokenAmountForSwapYT>0n?w.lockedAssetTotal*10n**BigInt(F.decimals)/w.current.yTokenAmountForSwapYT:0n,[K,U]=(0,E.Z)(!1),Z=w.current.vaultYTokenBalance,z=(0,x.ok)(q,"1"),$=Z>0n?w.Y*c.Pq/Z:0n,J=$>0n?c.Pq*c.Pq/$:0n,Q=K?"1 ".concat(v,"=").concat((0,b.d)(J)," ").concat(f):"1 ".concat(f,"=").concat((0,b.d)($)," ").concat(v),H=Z>z?(w.Y+k)*c.Pq/(Z-z):0n,X=(0,x.Kl)(z,F.decimals),ee=H>$&&$>0n?(H-$)*BigInt(1e10)/$:0n,et=(0,h.R3)(s),es=null!==(t=null==L?void 0:L.userBalanceYToken)&&void 0!==t?t:0n,en=w.current.yTokenAmountForSwapYT>0n&&es>0n?es*BigInt(1e10)/w.current.yTokenAmountForSwapYT:0n,ea=(0,x.Jh)(en,10,2),er=en;k>0n&&z>0n&&(er=(es+z)*BigInt(1e10)/(w.current.yTokenAmountForSwapYT+z));let ei=(0,x.Jh)(er,10,2),el=(0,m.KQ)(r),eo=k>0n&&"vIP"===s.assetSymbol&&k<G,ec=k>0n&&50n*k>w.pTokenTotal,ed=eo?"Minimum amount is ".concat((0,b.d)(G)):ec?"Exceeded purchase limit":"";return(0,n.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,n.jsxs)("div",{className:"card !p-0 overflow-hidden w-full",children:[(0,n.jsxs)("div",{className:"flex p-5 bg-[#10B98126] gap-5",children:[(0,n.jsx)(M.c,{size:54,symbol:s.yTokenSymbol}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("div",{className:"text-xl text-black dark:text-white font-semibold",children:s.yTokenSymbol}),(0,n.jsxs)("div",{className:"text-xs text-black/60 dark:text-white/60 font-medium",children:["YT holder sharing ",s.rewardSymbol||"vIP"," generated by underlying asset"]})]})]}),(0,n.jsxs)("div",{className:"flex flex-col items-end justify-between px-5 pt-5 gap-1 pb-5",children:[(0,n.jsx)(TupleTxt,{tit:"Circulation amount",sub:(0,n.jsx)(n.Fragment,{children:(0,b.d)(w.current.yTokenAmountForSwapYT,void 0,F.decimals)})}),(0,n.jsxs)("span",{className:"text-xs ",children:["1",f," = Yield of ",(0,b.d)(W,2,F.decimals)," ",v]})]})]}),(0,n.jsxs)("div",{className:"card !p-4 flex flex-col h-[24.25rem] gap-1",children:[(0,n.jsx)(TokenInput,{tokens:a,onTokenChange:l,amount:y,setAmount:j,error:ed}),(0,n.jsx)(R.x,{address:s.asset}),(0,n.jsx)("div",{className:"text-base font-bold my-2",children:"Receive"}),(0,n.jsx)(_.W,{asset:s.yTokenSymbol,decimals:r.decimals,loading:D&&!!y,readonly:!0,disable:!0,checkBalance:!1,amount:X}),(0,n.jsxs)("div",{className:"text-xs font-medium  flex justify-between select-none",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(T.k$E,{className:"text-sm text-primary cursor-pointer inline-block",onClick:()=>U()}),(0,n.jsx)("span",{children:"Price: ".concat(Q)})]}),(0,n.jsx)("div",{className:"flex gap-2 items-center",children:"Price Impact: ".concat((0,x.Jh)(ee,10,2))})]}),(0,n.jsxs)("div",{className:"text-xs font-medium opacity-60",children:["YT Share: ",ea," ",er!==en?"-> ".concat(ei):""]}),(0,n.jsx)(P.$M,{className:"mx-auto mt-auto",tx:"Buy",disabled:k<=0n||k>el.result||eo,txs:async()=>{let{txs:e,sharesBn:t}=await wrapIfErc4626({chainId:A,vc:s,token:r.address,inputBn:k,user:Y});return[...e,{abi:B.Wo,address:s.asset,functionName:"approve",args:[s.vault,t]},{abi:i.j5,address:s.vault,functionName:"swap",args:[t]}]},onTxSuccess:()=>{j(""),et()}})]})]})}function PTYT(e){let{vc:t}=e;return(0,n.jsx)("div",{className:"card bg-white h-full",children:(0,n.jsx)(O.x,{listClassName:"p-0 gap-8 mb-4 w-full",triggerClassName:e=>'text-2xl font-semibold leading-none data-[state="active"]:underline underline-offset-2',data:[{tab:"PT",content:(0,n.jsx)(PT,{vc:t})},{tab:"YT",content:(0,n.jsx)(YT,{vc:t})}]})})}let MCoinAmount=e=>{let{...t}=e;return(0,n.jsx)(F.T,{className:"font-bold text-sm",symbolClassName:"opacity-100",...t})};function b_vault_new_TokenSymbol(e){let{t,size:s=32,className:a}=e;return t?(0,n.jsxs)("div",{className:(0,x.cn)("flex gap-2 items-center font-semibold",a),children:[(0,n.jsx)(M.c,{symbol:t.symbol,size:s}),t.symbol]}):null}function PositonPT(e){let{vc:t}=e,s=(0,u.p)(),a=(0,h.nr)(t.vault),r=(0,o.kb)(t.pToken,s),l=(0,o.kb)(t.asset,s),c=(0,v.o)(e=>e.sliceTokenStore.balances[t.pToken]||0n,["sliceTokenStore.balances.".concat(t.pToken)]),d=(0,h.R3)(t),{data:m}=(0,A.p)(),{ids:f,claimable:x}=(0,h.gz)(t.vault),p=!m||!0!==a.closed||c+x<=100n,g=["PT","Value","Status","Redeemable",""];return(0,n.jsx)("div",{className:"card !p-4 bg-white overflow-x-auto",children:(0,n.jsx)(Y.ZP,{className:"min-w-[750px] w-full",headerClassName:"text-left font-semibold border-b-0",headerItemClassName:"py-1 px-0 text-base",rowClassName:"text-left text-black text-sm leading-none font-medium",cellClassName:"py-2 px-0",header:g,span:{2:1.6,3:2,[g.length-1]:1.3},data:[[(0,n.jsx)(b_vault_new_TokenSymbol,{t:r},"token"),(0,b.d)(c,void 0,r.decimals),a.closed?"Mature":"Active",p?"":(0,n.jsx)(MCoinAmount,{token:l,amount:c+x}),p?"":(0,n.jsx)(P.$M,{tx:"Redeem",className:"w-32",txs:()=>{let e=[];return c>10n&&e.push({abi:i.j5,address:t.vault,functionName:"redeem",args:[c]}),x>10n&&e.push({abi:i.j5,address:t.vault,functionName:"batchClaimRedeemAssets",args:[f]}),e},onTxSuccess:d})]]})})}function PositonYT(e){let{vc:t}=e,s=(0,u.p)(),a=(0,o.kb)(t.asset,s),r=(0,h.Vw)(t.vault),l=(0,h.nr)(t.vault),c=(0,h.R3)(t),d=(0,N.useMemo)(()=>{let e=r.length>0?r[0].userBalanceYToken:0n,d=r.length>0?r[0].userClaimableYTokenSyntyetic:0n,txs=(e,t)=>e.map(e=>[e.userClaimableYTokenSyntyetic>0n&&t?{abi:i.q3,functionName:"collectYT",address:e.adhocBribesPool}:null,e.aBribes.reduce((e,t)=>e+t.bribeAmount,0n)>0n?{abi:i.q3,functionName:"getBribes",address:e.adhocBribesPool}:null,e.sBribes.reduce((e,t)=>e+t.bribeAmount,0n)>0n?{abi:i.l0,functionName:"getBribes",address:e.stakingBribesPool}:null].filter(Boolean)).flat(),bribes=(e,t)=>{let n=[];return e.forEach(e=>{e[t].forEach(e=>{if(e.bribeAmount>0n){let t=n.find(t=>(0,C.E)(t.token.address,e.bribeToken));t?t.amount+=e.bribeAmount:n.push({token:(0,o.kb)(e.bribeToken,s,{address:e.bribeToken,symbol:e.bribeSymbol,decimals:18}),amount:e.bribeAmount})}})}),n},u=r.length>0?!0===l.closed?r:[r[0]]:[],m=txs(u,!0),f=bribes(u,"sBribes"),x=bribes(u,"aBribes"),p=r.length>1&&!0!==l.closed?r.slice(1):[],v=txs(p),h=v.length>0,g=bribes(r.slice(1),"sBribes"),y=bribes(r.slice(1),"aBribes");return[[(0,n.jsx)(b_vault_new_TokenSymbol,{t:{address:L.DR,symbol:t.yTokenSymbol,decimals:18,chain:[s]}},"token"),(0,b.d)(e,void 0,a.decimals),l.closed?"Mature":"Active",(0,n.jsxs)("div",{children:[d>0n&&(0,n.jsxs)("div",{className:"flex gap-3 items-center",children:["YT Points"," ",(0,n.jsx)("span",{children:(0,b.d)(d,void 0,a.decimals+5)})]}),f.map((e,t)=>(0,n.jsx)(MCoinAmount,{token:e.token,amount:e.amount},"yields_".concat(t)))]},"yields"),(0,n.jsx)("div",{children:x.map((e,t)=>(0,n.jsx)(MCoinAmount,{token:e.token,amount:e.amount},"airdrops_".concat(t)))},"airdrops"),(0,n.jsx)(P.$M,{tx:"Redeem",className:"w-32",txs:m,onTxSuccess:c},"redeem")],...h?[["","","Rewards for mature YT",(0,n.jsx)("div",{children:g.map((e,t)=>(0,n.jsx)(MCoinAmount,{token:e.token,amount:e.amount},"yields_".concat(t)))},"yields"),(0,n.jsx)("div",{children:y.map((e,t)=>(0,n.jsx)(MCoinAmount,{token:e.token,amount:e.amount},"airdrops_".concat(t)))},"airdrops"),(0,n.jsx)(P.$M,{tx:"Redeem",className:"w-32",txs:v,onTxSuccess:c},"redeem")]]:[]]},[r,l]),m=["YT","Value","Status","Yield","Airdrops",""];return(0,n.jsx)("div",{className:"card !p-4 bg-white overflow-x-auto",children:(0,n.jsx)(Y.ZP,{className:"min-w-[750px] w-full",headerClassName:"text-left font-semibold border-b-0",headerItemClassName:"py-1 px-0 text-base",rowClassName:"text-left text-black text-sm leading-none font-medium",cellClassName:"py-2 px-0",header:m,span:{2:1.6,[m.length-1]:1.3},data:d})})}function MyPositions(e){let{vc:t}=e;return(0,n.jsxs)("div",{className:"mt-4 lg:mt-6 flex flex-col gap-4",children:[(0,n.jsx)("div",{className:"text-left w-full font-semibold text-2xl",children:"My Positions"}),(0,n.jsx)(PositonPT,{vc:t}),(0,n.jsx)(PositonYT,{vc:t})]})}var z=s(79999),$=s(20889),J=s(95499),Q=s(83960),H=s(47259),X=s(40190);function PulseTokenItem(){return(0,n.jsxs)("div",{className:"animate-pulse flex px-4 py-2 items-center gap-4 rounded-lg",children:[(0,n.jsx)("div",{className:"rounded-full w-10 h-10 bg-slate-400"}),(0,n.jsx)("div",{className:"w-28 h-5 rounded-lg bg-slate-400"}),(0,n.jsx)("div",{className:"ml-auto w-12 h-5 rounded-lg bg-slate-400"})]})}var ee=s(16804),et=s(45820);let es=[{symbol:"vIP",name:"Verio IP",address:"0x5267F7eE069CEB3D8F1c760c215569b79d0685aD",decimals:18},{symbol:"WIP",name:"Wrapped IP",address:"0x1514000000000000000000000000000000000000",decimals:18}];function TokenSelect(e){let{tokens:t,onSelect:s,hiddenNative:a}=e,r=(0,v.o)(e=>e.sliceTokenStore.defTokenList),i=(0,N.useMemo)(()=>{let e=k().isEmpty(t)?k().isEmpty(r)?es:r:t;return a?e.filter(e=>e.address!==L.DR&&e.address!==z.K8):e},[t,r,a]),[l,o]=(0,N.useState)(""),c=(0,$.ln)(),{address:d}=(0,I.m)(),[u,m]=(0,N.useState)(["searchTokens",l,i]);(0,S.Z)(()=>m(["searchTokens",l,i]),300,[l,i]);let{data:f,isFetching:h}=(0,g.a)({initialData:i,queryFn:async()=>{if((0,X.U)(l)){let e=i.find(e=>e.address==l);if(e)return[e];let t=(0,p.B)(),[s,n]=await Promise.all([t.readContract({abi:B.Wo,address:l,functionName:"symbol"}),t.readContract({abi:B.Wo,address:l,functionName:"decimals"})]);return d&&v.w.getState().sliceTokenStore.updateTokensBalance([l],d),[{symbol:s,address:l,decimals:n}]}return l?i.filter(e=>{let t=l.toLowerCase(),s=!!e.symbol.toLowerCase().match(t),n=!!e.name&&!!e.name.toLowerCase().match(t);return s||n}):i},queryKey:u}),y=f||i;return(0,g.a)({queryKey:["updateBalancesForUnknowToken",i],enabled:!!d,queryFn:()=>v.w.getState().sliceTokenStore.updateTokensBalance(i.map(e=>e.address),d)}),(0,n.jsxs)("div",{className:"flex flex-col gap-4 p-5",children:[(0,n.jsx)("div",{className:"page-sub text-center",children:"Select a token"}),(0,n.jsx)("input",{className:(0,x.cn)("bg-white dark:bg-transparent","border-slate-400  focus:border-primary","w-full h-14 text-right px-4 font-bold text-base border-[#4A5546] border focus:border-2 text-slate-700 rounded-lg outline-none dark:text-slate-50"),placeholder:"Search by name, symbol or address",value:l,onChange:e=>o(e.target.value)}),(0,n.jsx)("div",{className:"flex flex-col overflow-y-auto h-[18.75rem]",children:h?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(PulseTokenItem,{}),(0,n.jsx)(PulseTokenItem,{}),(0,n.jsx)(PulseTokenItem,{})]}):(0,n.jsx)(n.Fragment,{children:y.map(e=>(0,n.jsxs)("div",{className:"flex px-4 py-2 items-center gap-4 rounded-lg cursor-pointer hover:bg-primary/20",onClick:()=>{null==s||s(e)},children:[(0,n.jsx)(M.c,{className:"rounded-full",size:40,symbol:e.symbol,url:e.url}),(0,n.jsx)("span",{children:e.symbol}),(0,n.jsx)("span",{className:"ml-auto",children:(0,b.d)(c[e.address],3,e.decimals)})]},e.address))})})]})}function BVaultAddReward(e){let{bvc:t}=e,s=(0,$.ln)(),a=(0,h.nr)(t.vault),r=(0,v.o)(e=>e.sliceTokenStore.defTokenList),l=k().isEmpty(r)?es[0]:r[0],[o,c]=(0,N.useState)(l),[d,u]=(0,N.useState)(""),m=s[o.address],f=(0,x.su)(d,o.decimals),b=(0,N.useRef)(null),g=(0,A.p)(),{address:y}=(0,I.m)(),{mutate:j,isPending:w}=(0,J.D)({mutationFn:async()=>{if(T)return;let e=(0,p.B)();if(t.isOld){let s=await e.readContract({abi:i.j5,address:t.vault,functionName:"bribeTokens",args:[a.epochCount]});if(console.info("tokens:",s,o.address),!s.find(e=>e.toLowerCase()==o.address.toLowerCase())){let s=await g.data.writeContract({abi:i.j5,address:t.vault,functionName:"addBribeToken",args:[o.address]});await e.waitForTransactionReceipt({hash:s,confirmations:3})}let n=await e.readContract({abi:B.Wo,address:o.address,functionName:"allowance",args:[y,t.vault]});if(n<f){let s=await g.data.writeContract({abi:B.Wo,address:o.address,functionName:"approve",args:[t.vault,f-n]});await e.waitForTransactionReceipt({hash:s,confirmations:3})}let r=await g.data.writeContract({abi:i.j5,address:t.vault,functionName:"addBribes",args:[o.address,f]});await e.waitForTransactionReceipt({hash:r,confirmations:3})}else{let s=await e.readContract({abi:B.Wo,address:o.address,functionName:"allowance",args:[y,t.vault]});if(s<f){let n=await g.data.writeContract({abi:B.Wo,address:o.address,functionName:"approve",args:[t.vault,f-s]});await e.waitForTransactionReceipt({hash:n,confirmations:3})}let n=await g.data.writeContract({abi:i.j5,address:t.vault,functionName:"addAdhocBribes",args:[o.address,f]});await e.waitForTransactionReceipt({hash:n,confirmations:3})}v.w.getState().sliceTokenStore.updateTokensBalance([o.address],y),u(""),H.A.success("Transaction success")},mutationKey:["addReward"],onError:x.S3}),T=!g.data||!y||0n==f||f>m||w||0n==a.epochCount;return(0,n.jsxs)("div",{className:"max-w-4xl mx-auto mt-8 card",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(_.W,{decimals:o.decimals,asset:o.symbol,assetURL:o.url,balance:s[o.address],amount:d,setAmount:u}),(0,n.jsx)(ee.o,{trigger:(0,n.jsxs)("div",{ref:b,className:"absolute left-0 top-0 flex cursor-pointer justify-end items-center py-4",children:[(0,n.jsx)("span",{className:"invisible pl-12",children:o.symbol}),(0,n.jsx)(Q.tv1,{className:"ml-2"})]}),children:(0,n.jsx)(TokenSelect,{hiddenNative:!0,onSelect:e=>{var t;c(e),null===(t=b.current)||void 0===t||t.click()}})})]}),(0,n.jsx)(et.k6,{busy:w,className:"w-full flex justify-center items-center gap-2",disabled:T,onClick:()=>j(),children:"Add"})]})}var en=s(82121),ea=s(26694),er=s(58400),ei=s(422),el=s(38108),eo=s(67003),ec=s(5807);let ed=["redeem","principal_panda","yield_token","add_reward"];function BVaultPage(e){var t;let{bvc:s,currentTab:l}=e,{address:o}=(0,I.m)(),c=(0,h.nr)(s.vault);(0,g.a)({queryKey:["UpdateVaultDetails",s,c],queryFn:async()=>0n!=c.epochCount&&(await v.w.getState().sliceBVaultsStore.updateEpoches(s),!0)});let d=(0,h.Zd)(s.vault);(0,g.a)({queryKey:["UpdateUserData",s,d,o],queryFn:async()=>0!=d.length&&!!o&&(console.info("epochesOld:",d),await v.w.getState().sliceUserBVaults.updateEpoches(s,o,d),!0)});let{data:u}=(0,g.a)({queryKey:["checkIsBriber",o,s],queryFn:async()=>{if(!o)return!1;let e=(0,p.B)(),t=await Promise.all([e.readContract({abi:i.j5,address:s.vault,functionName:"isBriber",args:[o]}),e.readContract({abi:i.j5,address:s.vault,functionName:"owner"}).then(e=>e==o)]);return t.includes(!0)||(0,C.E)(o,"0xFE18Aa1EFa652660F36Ab84F122CD36108f903B6")}}),m=(0,w.useRouter)();if(s.newUI)return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"grid lg:grid-cols-[1.6fr_1fr] gap-4 xl:gap-5",children:[(0,n.jsx)(Info,{vc:s}),(0,n.jsx)("div",{className:"row-span-2",children:(0,n.jsx)(PTYT,{vc:s,currentTab:l})}),(0,n.jsx)(eo.Z,{bvc:s,epochId:c.epochCount})]}),(0,n.jsx)(MyPositions,{vc:s})]});let f=[...c.closed?[{tab:"Redeem",content:(0,n.jsx)("div",{className:"max-w-xl mx-auto pt-8 w-full",children:(0,n.jsx)(a.ge,{bvc:s})})}]:[{tab:"Principal Token",content:(0,n.jsx)(a.aK,{bvc:s})}],{tab:"Yield Token",content:(0,n.jsx)(a.Cw,{bvc:s})}],b=u?[...f,{tab:"Add Reward",content:(0,n.jsx)(BVaultAddReward,{bvc:s})}]:f,y=null===(t=b.find(e=>(0,x.pi)(e.tab)==l))||void 0===t?void 0:t.tab;return(0,n.jsx)(O.x,{currentTab:y,onTabChange:e=>(0,r.rc)(m,s.vault,e),listClassName:"flex-wrap p-0 mb-5 md:gap-14",triggerClassName:'text-lg sm:text-xl md:text-2xl py-0 data-[state="active"]:border-b border-b-black dark:border-b-white leading-[0.8] rounded-none whitespace-nowrap',contentClassName:"gap-5",data:b})}let eu=["Active","All","Closed"];function Vaults(){var e;let t=(0,u.p)(),s=(0,N.useMemo)(()=>er.Fw[t].filter(e=>e.onEnv&&e.onEnv.includes(c.Vi)),[t,c.Vi]),r=(0,w.useSearchParams)(),i=r.get("vault"),l=r.get("tab"),o=ed.includes(l)?l:"",d=s.findLast(e=>e.vault==i),{loading:m}=(0,ei.Ev)(),[f,x]=(0,N.useState)(null!==(e=eu.find(e=>e===sessionStorage.getItem("bvualts-filter")))&&void 0!==e?e:eu[0]),p=(0,v.o)(e=>e.sliceBVaultsStore.bvaults,["sliceBVaultsStore.bvaults"]),h=(0,N.useMemo)(()=>m||"All"==f?s:"Active"==f?s.filter(e=>{var t;return!(null===(t=p[e.vault])||void 0===t?void 0:t.closed)}):s.filter(e=>{var t;return!!(null===(t=p[e.vault])||void 0===t?void 0:t.closed)}),[m,p,f,s]);return(0,n.jsx)(ea.E,{children:(0,n.jsx)("div",{className:"w-full max-w-[1232px] px-4 mx-auto md:pb-8",children:d?(0,n.jsx)(BVaultPage,{bvc:d,currentTab:o}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"page-title",children:"IP-Vaults"}),(0,n.jsxs)("div",{className:"flex items-center gap-8 justify-between",children:[(0,n.jsx)(en.K,{data:"A Pendle-like Yield Tokenization Protocol Tailored for IP Assets"}),(0,n.jsx)(K.G,{value:f,options:eu,onChange:e=>{x(e),sessionStorage.setItem("bvualts-filter",e)}})]}),m?(0,n.jsx)("div",{className:"w-full flex items-center justify-center pt-40",children:(0,n.jsx)(ec.fCD,{className:"animate-spin text-4xl opacity-80"})}):(0,n.jsxs)(el.r,{numItems:1,numItemsMd:2,numItemsLg:3,className:"gap-5 mt-4",children:[h.map((e,t)=>e.newUI?(0,n.jsx)(BVaultCard,{vc:e},"group_vault_item_".concat(t)):(0,n.jsx)(a.Bx,{vc:e},"group_vault_item_".concat(t))),0==s.length&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.O4,{}),(0,n.jsx)(a.O4,{}),(0,n.jsx)(a.O4,{})]}),1==s.length&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.O4,{}),(0,n.jsx)(a.O4,{})]}),2==s.length&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.O4,{})})]})]})})})}},11877:function(e,t,s){s.d(t,{T:function(){return CoinAmount}});var n=s(52987),a=s(31506),r=s(29293),i=s(13854),l=s(83978),o=s.n(l);function CoinAmount(e){let{token:t,amount:s,size:l,className:c,symbolClassName:d,amountClassName:u}=e;return t?(0,n.jsxs)("div",{className:(0,i.cn)("flex gap-2 items-center font-medium text-xs",c),children:[(0,n.jsx)(a.c,{size:l||16,symbol:t.symbol}),(0,n.jsx)("span",{className:(0,i.cn)("opacity-60",d),children:t.symbol}),!o().isNil(s)&&(0,n.jsx)("span",{className:(0,i.cn)("ml-1",u),children:(0,r.d)(s,void 0,t.decimals)})]}):null}},82121:function(e,t,s){s.d(t,{K:function(){return Noti}});var n=s(52987);s(77317);var a=s(63114);function Noti(e){let{data:t}=e;return(0,n.jsxs)("div",{className:"w-full mt-2 mb-3 md:mt-4 md:mb-6 flex text-[24px] md:text-[14px] text-[#64748B] dark:text-slate-50/60 font-medium leading-[24px] md:leading-[14px]",children:[(0,n.jsx)("div",{className:"",children:(0,n.jsx)(a.pMA,{size:20})}),(0,n.jsx)("div",{className:"text-sm ml-1 ",children:t})]})}},24113:function(e,t,s){s.d(t,{G:function(){return SimpleSelect}});var n=s(52987),a=s(13854),r=s(77317),i=s(53360),l=s(23449);function SimpleSelect(e){let{options:t,value:s,defValue:o,onChange:c,className:d,itemClassName:u,currentClassName:m}=e,[f,x]=(0,r.useState)(!1),[p,v]=(0,r.useState)(o||t[0]);(0,r.useEffect)(()=>{!t.length||p&&t.find(e=>e!==p)||(v(o||t[0]),null==c||c(o||t[0]))},[t,o,p]);let h=s||p,b=(0,r.useRef)(null);(0,l.Z)(b,()=>x(!1));let renderItem=e=>e?"string"==typeof e?e:e.show:null;return 0==t.length?null:(0,n.jsxs)("div",{ref:b,className:(0,a.cn)("w-auto rounded relative border-gray-400/60 border dark:bg-white/5 bg-white select-none cursor-pointer",d),children:[(0,n.jsxs)("div",{className:(0,a.cn)("flex items-center justify-between gap-5 px-2 py-1",m),onClick:()=>x(!f),children:[(0,n.jsx)("div",{className:"flex items-center",children:renderItem(h)}),f?(0,n.jsx)(i.E0f,{}):(0,n.jsx)(i.IAR,{})]}),f&&(0,n.jsx)("div",{className:"mt-1 absolute overflow-hidden z-50 top-full min-w-full w-max right-0 flex flex-col rounded bg-white dark:bg-black border-gray-400/60 border",children:t.map(e=>(0,n.jsx)("div",{className:(0,a.cn)("w-auto cursor-pointer px-2 py-1 hover:bg-primary/30",u),onClick:()=>{v(e),null==c||c(e),x(!1)},children:renderItem(e)},"string"==typeof e?e:e.key))})]})}},9540:function(e,t,s){s.d(t,{B8:function(){return useFet},VZ:function(){return isError},d6:function(){return isSuccess},hg:function(){return isLoading},iM:function(){return reFet}});var n=s(13854),a=s(68495),r=s.n(a),i=s(77317);let l={},o={};function initFS(e){return{key:e.key,status:"idle",result:e.initResult,lastUpDate:0}}let c=new(r());async function runFetImpl(e){var t,s;let a=l[e.key].runId,r=Object.hasOwn(o,e.key),i=null!==(t=e.retry)&&void 0!==t?t:3;for(;i>0;){i--;try{if(a!==l[e.key].runId)break;let t=await (r?"function"==typeof o[e.key]?o[e.key]():o[e.key]:e.fetfn());if(a!==l[e.key].runId)break;return l[e.key].fs.result=t,l[e.key].fs.lastUpDate=now(),l[e.key].fs.status="success",c.emit(e.key,l[e.key].fs),t}catch(t){if(console.error("RunFetError: fetKey:".concat(e.key," retryCount:").concat(i),t),0==i){if(a!==l[e.key].runId)break;l[e.key].fs.status="error",l[e.key].fs.error=t,c.emit(e.key,l[e.key].fs);break}await (0,n._v)(null!==(s=e.retryInterval)&&void 0!==s?s:500)}}}function runFet(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(l[e.key]){var s;(s=e.key)&&(l[s].runId>999999?l[s].runId=0:l[s].runId++),runFetImpl(e)}else l[e.key]={fet:e,runId:0,fs:initFS(e)},runFetImpl(e);return l[e.key].fs.status="fetching",l[e.key].fs.error=void 0,t&&c.emit(e.key,l[e.key].fs),l[e.key].fs}function now(){return new Date().getTime()}let updateReducer=e=>(e+1)%1e6;function useFet(e){var t;let s=function(){let[,e]=(0,i.useReducer)(updateReducer,0);return e}(),n=(null===(t=l[e.key])||void 0===t?void 0:t.fs)||initFS(e),a=!!e.key&&(!n||"idle"==n.status);return a&&(n=runFet(e)),(0,i.useEffect)(()=>{var t;let n=(t=e=>{s()},e.key?(c.on(e.key,t),()=>{c.off(e.key,t)}):()=>{});return function(e){var t,s;let n=null===(t=l[e.key])||void 0===t?void 0:t.fs,a=null!==(s=e.cacheTime)&&void 0!==s?s:1e3;return!!(e.key&&n&&"fetching"!==n.status&&now()-n.lastUpDate>a)}(e)&&(runFet(e),s()),n},[e.key]),n}function isLoading(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return 0!=t.length&&!!t.find(e=>"fetching"===e.status&&0==e.lastUpDate)}function isSuccess(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return!(0==t.length||t.find(e=>0==e.lastUpDate))}function isError(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return 0!=t.length&&!!t.find(e=>"error"===e.status)}function reFet(){for(var e,t=arguments.length,s=Array(t),n=0;n<t;n++)s[n]=arguments[n];for(let t of s){let s="string"==typeof t?null===(e=l[t])||void 0===e?void 0:e.fet:t;s&&runFet(s,!0)}}},84525:function(e,t,s){s.d(t,{A5:function(){return useTotalSupply},KQ:function(){return useBalance}});var n=s(9540),a=s(62628),r=s(5624),i=s(87621),l=s(99409);let keyBalance=(e,t)=>t&&e?"tokenBalance:".concat(e.chain,"-").concat(e.address,"-by-").concat(t):"";function useBalance(e){let{address:t}=(0,i.m)(),s=(0,l.p)();return(0,n.B8)({key:keyBalance(e,t),initResult:0n,fetfn:async()=>e.isNative?(0,a.B)(s).getBalance({address:t}):(0,a.B)().readContract({abi:r.Wo,functionName:"balanceOf",address:e.address,args:[t]})})}let keyTotalSupply=e=>e?"tokenTotalSupply:".concat(e.chain,"-").concat(e.address):"";function useTotalSupply(e){return(0,n.B8)({key:keyTotalSupply(e),initResult:0n,fetfn:async()=>e.isNative?0n:(0,a.B)().readContract({abi:r.Wo,functionName:"totalSupply",address:e.address})})}},20889:function(e,t,s){s.d(t,{A5:function(){return useTotalSupply},b7:function(){return useNftBalance},ln:function(){return useBalances}});var n=s(13854),a=s(32422);function useBalances(){return(0,a.o)(e=>(0,n.Yb)(e.sliceTokenStore.balances,0n),["sliceTokenStore.balances"])}function useNftBalance(e){return(0,a.o)(t=>t.sliceTokenStore.nftBalance[e]||[],["sliceTokenStore.nftBalance.".concat(e)])}function useTotalSupply(e){return(0,a.o)(t=>{var s;return null!==(s=t.sliceTokenStore.totalSupply[e])&&void 0!==s?s:0n},["sliceTokenStore.totalSupply.".concat(e)])}},23449:function(e,t,s){var n=s(77317),a=s(17695),r=["mousedown","touchstart"];t.Z=function(e,t,s){void 0===s&&(s=r);var i=(0,n.useRef)(t);(0,n.useEffect)(function(){i.current=t},[t]),(0,n.useEffect)(function(){for(var handler=function(t){var s=e.current;s&&!s.contains(t.target)&&i.current(t)},t=0,n=s;t<n.length;t++){var r=n[t];(0,a.on)(document,r,handler)}return function(){for(var e=0,t=s;e<t.length;e++){var n=t[e];(0,a.S1)(document,n,handler)}}},[s,e])}}}]);