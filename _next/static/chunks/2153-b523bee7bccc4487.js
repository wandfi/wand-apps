"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2153],{62600:function(e,t,a){a.d(t,{r:function(){return n.Z}});var n=a(62653)},59781:function(e,t,a){a.d(t,{kQ:function(){return toLVault},p2:function(){return toLntVault},rc:function(){return toBVault}});var n=a(26361);function toBVault(e,t,a,r){if(!t)return e.push("/ip-vaults");let s="/ip-vaults?vault=".concat(t);a&&(s+="&tab=".concat((0,n.pi)(a))),r&&(s+="&subtab=".concat((0,n.pi)(r))),e.push(s)}function toLVault(e,t,a){if(!t)return e.push("/l-vaults");let r="/l-vaults?vault=".concat(t);a&&(r+="&tab=".concat((0,n.pi)(a))),e.push(r)}function toLntVault(e,t,a){if(!t)return e.push("/lnt-vaults");let r="/lnt-vaults?vault=".concat(t);a&&(r+="&tab=".concat((0,n.pi)(a))),e.push(r)}},99548:function(e,t,a){a.d(t,{v:function(){return ApproveAndTx},L:function(){return NftApproveAndTx}});var n=a(31113),r=a(19757),s=a(26361),o=a(78403),c=a(83978),l=a.n(c),u=a(64103),i=a(47259),d=a(58714),p=a(96670),f=a(4408);let v={},useApproves=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10000000000n*10n**18n,{address:n,chainId:c}=(0,p.m)(),{data:l}=(0,f.p)(),[m,h]=(0,u.useState)(!1),b=(0,u.useMemo)(()=>Object.keys(e).filter(e=>e!==r.K8),[e]),[x,g]=(0,u.useState)(t&&v[t]||{}),updateAllownce=(e,a)=>{t&&(v[t]={...v[t]||{},[e]:a},g(t=>({...t,[e]:a})))};(0,u.useEffect)(()=>{n&&t&&c&&b.forEach(e=>{(0,o.B)().readContract({abi:d.Wo,address:e,functionName:"allowance",args:[n,t]}).then(t=>updateAllownce(e,t||0n)).catch(console.error)})},[b,c,n]);let[y,w]=(0,u.useState)(!1),k=(0,u.useMemo)(()=>b.filter(t=>(0,s.ok)(e,t)>0n&&(0,s.ok)(e,t)>(0,s.ok)(x,t)),[e,b,x]),approve=async()=>{if(0!=k.length&&t)try{w(!0),h(!1);for(let n=0;n<k.length;n++){let r=k[n],s=!1===a?e[r]:a,c=await (null==l?void 0:l.writeContract({abi:d.Wo,address:r,functionName:"approve",args:[t,s]}));c&&await (0,o.B)().waitForTransactionReceipt({hash:c}),updateAllownce(r,s)}i.A.success("Approve success"),w(!1),h(!0)}catch(e){i.A.error((0,s.az)(e)),w(!1),h(!1)}};return{approve,loading:y,shouldApprove:k.length>0,isSuccess:m}},m={},useNftApproves=(e,t)=>{let{address:a,chainId:n}=(0,p.m)(),{data:r}=(0,f.p)(),[c,v]=(0,u.useState)(!1),h=l().keys(e),[b,x]=(0,u.useState)(t&&m[t]||{}),updateAllownce=(e,a)=>{t&&(m[t]={...m[t]||{},[e]:a},x(t=>({...t,[e]:a})))};(0,u.useEffect)(()=>{a&&t&&n&&h.forEach(e=>{(0,o.B)().readContract({abi:d.Hr,address:e,functionName:"isApprovedForAll",args:[a,t]}).then(t=>t!==b[e]&&updateAllownce(e,t)).catch(console.error)})},[h,n,a]);let[g,y]=(0,u.useState)(!1),w=(0,u.useMemo)(()=>h.filter(e=>!b[e]),[e,h,b]),approve=async()=>{if(0!=w.length&&t)try{y(!0),v(!1);for(let e=0;e<w.length;e++){let a=w[e],n=await (null==r?void 0:r.writeContract({abi:d.Hr,address:a,functionName:"setApprovalForAll",args:[t,!0]}));n&&await (0,o.B)().waitForTransactionReceipt({hash:n}),updateAllownce(a,!0)}i.A.success("Approve success"),y(!1),v(!0)}catch(e){i.A.error((0,s.az)(e)),y(!1),v(!1)}};return{approve,loading:g,shouldApprove:w.length>0,isSuccess:c}};var h=a(78354),b=a(88501),x=a(60689);function ApproveAndTx(e){let{className:t,tx:a,busyShowTxet:r=!0,approves:s,spender:o,requestAmount:c,config:l,toast:i=!0,skipSimulate:d=!1,disabled:p,confirmations:f,onTxSuccess:v,onApproveSuccess:m}=e,{write:g,isDisabled:y,isLoading:w}=(0,h.R)(l,{onSuccess:()=>v&&v(),autoToast:i,skipSimulate:d,confirmations:f}),k=p||y||w||!1===l.enabled,{approve:S,shouldApprove:T,loading:A,isSuccess:V}=useApproves(s||{},o,c),L=(0,u.useRef)();return(L.current=m,(0,u.useEffect)(()=>{L.current&&V&&L.current()},[V]),T)?(0,n.jsx)(x.k,{className:(0,b.m)("flex items-center justify-center gap-4",t),onClick:S,busy:A,disabled:p||!S||A,children:"Approve"}):(0,n.jsx)(x.k,{className:(0,b.m)("flex items-center justify-center gap-4",t),onClick:()=>g(),busy:w,busyShowContent:r,disabled:k,children:a})}function NftApproveAndTx(e){let{className:t,tx:a,busyShowTxet:r=!0,approves:s,spender:o,requestAmount:c,config:l,toast:i=!0,skipSimulate:d=!1,disabled:p,confirmations:f,onTxSuccess:v,onApproveSuccess:m}=e,{write:g,isDisabled:y,isLoading:w}=(0,h.R)(l,{onSuccess:()=>v&&v(),autoToast:i,skipSimulate:d,confirmations:f}),k=p||y||w||!1===l.enabled,{approve:S,shouldApprove:T,loading:A,isSuccess:V}=useNftApproves(null!=s?s:{},o),L=(0,u.useRef)();return(L.current=m,(0,u.useEffect)(()=>{L.current&&V&&L.current()},[V]),T)?(0,n.jsx)(x.k,{className:(0,b.m)("flex items-center justify-center gap-4",t),onClick:S,busy:A,disabled:p||!S||A,children:"Approve"}):(0,n.jsx)(x.k,{className:(0,b.m)("flex items-center justify-center gap-4",t),onClick:()=>g(),busy:w,busyShowContent:r,disabled:k,children:a})}},91214:function(e,t,a){a.d(t,{W:function(){return AssetInput}});var n=a(31113),r=a(26361),s=a(84944),o=a(33501),c=a(64103),l=a(45631),u=a(35057),i=a(99971),d=a(12045),p=a(36762);function AssetInput(e){let{asset:t="ETH",assetIcon:a,assetURL:f,checkBalance:v=!0,balance:m,balanceTit:h="Balance",decimals:b=18,exchange:x,readonly:g,selected:y,onClick:w,amount:k,setAmount:S,price:T,disable:A,hasInput:V=!1,options:L,onChange:B=()=>{},defaultValue:N,balanceClassName:j="",loading:C,disableNegative:E}=e,q=(0,c.useRef)(null),U=v&&void 0!==m&&(0,r.su)("number"==typeof k?k+"":k||"",b)>("bigint"==typeof m?m:0n),F=(0,d.l)(e=>"dark"==e.theme);return(0,n.jsxs)("div",{className:"relative w-full",onClick:()=>{w&&!A&&w()},children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("div",{className:"absolute flex items-center h-fit gap-2 left-[48px] bottom-1 w-full  max-w-[calc(100%-56px)]",style:{pointerEvents:"none"},children:[T&&(0,n.jsx)("div",{className:"text-neutral-500 dark:text-slate-50/70 text-xs max-w-full overflow-hidden",children:T}),x&&(0,n.jsxs)("div",{className:"text-slate-500 dark:text-slate-50/70 text-xs max-w-full overflow-hidden",children:["~$",x]})]}),(0,n.jsxs)("div",{className:"absolute flex items-center gap-2 w-fit top-1/2 left-4 -translate-y-1/2",children:[(0,n.jsx)(i.c,{size:24,symbol:a||t,url:f,className:"rounded-full"}),(0,n.jsx)("div",{className:(0,o.Z)("relative",T||x?"-top-[6px]":""),children:V?(0,n.jsx)(l.ZP,{options:L,onChange:B,defaultValue:N,styles:{control:(e,t)=>({...e,border:"0px",outline:"none",boxShadow:"none",borderRadius:"0px",minHeight:"24px",padding:"0px",background:"transparent"}),singleValue:(e,t)=>({...e,color:F?"#fff":"#000"}),valueContainer:(e,t)=>({...e,padding:"0px"}),menu:(e,t)=>({...e,margin:0,background:F?"#444":"#fff"}),option:(e,t)=>({...e,color:F?"#fff":"#000",background:F?"transparent":"#fff"}),menuPortal:(e,t)=>({...e,margin:0})}}):(0,n.jsx)("div",{children:t})})]}),(0,n.jsx)("input",{value:C?"":k,onChange:e=>{if(g)return;let t=(e.target.value||"").replaceAll("-","").replaceAll("+","");S(t)},ref:q,type:"number",disabled:A,className:(0,o.Z)(g?"bg-slate-50 cursor-not-allowed dark:bg-slate-800":"bg-white dark:bg-transparent",{"border-green-700 border-2":y,"border-red-400 !border-2 focus:border-red-400":U,"border-slate-400  focus:border-primary":!U&&!y},"w-full h-14 text-right pr-4 pl-[8rem] font-bold text-2xl border-[#4A5546] border focus:border-2 text-slate-700 rounded-lg outline-none dark:text-slate-50"),placeholder:"0.000",maxLength:36,pattern:"[0-9.]{36}",step:.01,title:"",readOnly:g}),C&&(0,n.jsx)(p.$,{className:"absolute right-24 top-[1.125rem]"})]}),void 0!=m&&(0,n.jsxs)("div",{className:"flex items-center justify-between mt-1 px-1 text-slate-400 dark:text-slate-50/70 text-sm",children:[(0,n.jsxs)("div",{className:j,children:[(0,n.jsxs)("span",{children:[h,": ",(0,s.d)(m,3,b)]}),(0,n.jsx)("button",{className:"text-primary ml-2",onClick:()=>{let e=(0,u.b)(m,b);S(e),w&&!A&&w()},children:"Max"})]}),(0,n.jsx)("div",{className:"text-sm text-red-400",children:U?"Insufficient account balance":""})]})]})}},44939:function(e,t,a){a.d(t,{E:function(){return PageWrap}});var n=a(31113);a(64103);var r=a(26361),s=a(69708),o=a(12045);function PageWrap(e){let{children:t,className:a}=e,c=(0,o.l)(e=>e.theme),l=(0,s.usePathname)();return(0,n.jsx)("div",{className:(0,r.cn)("min-h-[calc(100vh+1px)] h-auto pt-[90px] pb-6",a),style:{backgroundSize:"contain",background:"light"==c?"#eeeeee":"/"==l?"url(bg_home.svg) center bottom no-repeat,linear-gradient(105.67deg, #02050E 14.41%, #1D2F23 98.84%)":"linear-gradient(105.67deg, #02050E 14.41%, #1D2F23 98.84%)"},children:t})}},16738:function(e,t,a){a.d(t,{x:function(){return SimpleTabs}});var n=a(31113),r=a(26361),s=a(24626),o=a(64103);function SimpleTabs(e){let{currentTab:t,className:a,listClassName:c,triggerClassName:l,contentClassName:u,hiddenConetent:i=!1,data:d,onTabChange:p}=e,[f,v]=(0,o.useState)(t||d[0].tab);return(0,o.useEffect)(()=>{d.find(e=>e.tab==f)||v(d[0].tab)},[f,d]),(0,n.jsxs)(s.fC,{value:t||f,className:(0,r.cn)("w-full",a),onValueChange:e=>{v(e),null==p||p(e)},children:[(0,n.jsx)(s.aV,{className:(0,r.cn)("p-1 w-fit rounded-md gap-5 flex bg-transparent",c),children:d.map(e=>(0,n.jsx)(s.xz,{className:(0,r.cn)('rounded-[3px] text-sm py-1.5 px-0 text-black/50 font-medium data-[state="active"]:bg-black data-[state="active"]:text-slate-900 !bg-transparent dark:text-white/50 dark:data-[state="active"]:text-white',l),value:e.tab,children:e.tab},e.tab))}),!i&&d.map(e=>(0,n.jsx)(s.VY,{value:e.tab,className:(0,r.cn)("flex flex-col gap-6 outline-none",u),children:e.content},e.tab))]})}},36762:function(e,t,a){a.d(t,{$:function(){return Spinner}});var n=a(31113),r=a(26361);let Spinner=e=>{let{className:t}=e;return(0,n.jsxs)("svg",{fill:"none",className:(0,r.cn)("animate-spin h-5 w-5 2-ml-1 2mr-3",t),viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},60689:function(e,t,a){a.d(t,{k:function(){return BBtn}});var n=a(31113),r=a(26361),s=a(83978),o=a.n(s),c=a(64103),l=a(36762);function BBtn(e){let{borderWidth:t=1,children:a,busy:s,busyShowContent:u=!0,className:i,hiddenBorder:d=!0,...p}=e,f=(0,c.useRef)(null),[v,m]=(0,c.useState)("0_0"),h="unset",b="unset";if(f.current&&!d){let e=f.current,a=e.clientWidth,n=e.clientHeight,r=parseInt(getComputedStyle(e).borderRadius.replace("px","")),s="A".concat(r-t," ").concat(r-t," 0, 0, 1, ").concat(r," ").concat(t,"L").concat(a-r," ").concat(t),c="A".concat(r-t," ").concat(r-t," 0, 0, 1, ").concat(a-t," ").concat(r,"L").concat(a-t," ").concat(n-r),l="A".concat(r-t," ").concat(r-t," 0, 0, 1, ").concat(a-r," ").concat(n-t,"L").concat(r," ").concat(n-t," "),u="A".concat(r-t," ").concat(r-t," 0, 0, 1, ").concat(t," ").concat(n-r,"L").concat(t," ").concat(r),i="M ".concat(t," ").concat(r," ").concat(s," ").concat(c," ").concat(l," ").concat(u),d="M 0 0 L 0 ".concat(n," L ").concat(a," ").concat(n," L ").concat(a," 0 L 0 0 ").concat(i," Z");h="path('".concat(d,"')");let p=2*a,tranP=e=>o().round(e/2,2);b="radial-gradient(122.5% ".concat(o().round(122.5/(a/n),2),"% at ").concat(o().round((52.9*a+50*p-50*a)/p,2),"% ").concat(o().round((16.25*n+50*p-50*n)/p,2),"%, #15d264 0%, #2cbd35 ").concat(tranP(36.26),"%, #dcf45d ").concat(tranP(92.54),"%)")}return(0,c.useEffect)(()=>{let e=new ResizeObserver(()=>{var e,t;m("".concat((null===(e=f.current)||void 0===e?void 0:e.clientWidth)||0,"_").concat((null===(t=f.current)||void 0===t?void 0:t.clientWidth)||0))});return f.current&&e.observe(f.current),()=>{f.current&&e.unobserve(f.current)}},[f.current]),(0,n.jsxs)("button",{...p,ref:f,style:{},className:(0,r.cn)("group/bbtn bg-[#64738B] hover:bg-primary disabled:hover:bg-[#64738B] relative px-3 cursor-pointer w-full transition-all leading-[2.375] ring-0 text-base text-white font-medium h-10 rounded-lg disabled:opacity-60 disabled:cursor-not-allowed",i),children:[!d&&(0,n.jsx)("div",{className:"absolute w-full h-full left-0 top-0 flex justify-center items-center rounded-lg overflow-hidden",style:{visibility:f.current?"visible":"hidden",clipPath:h},children:(0,n.jsx)("div",{className:(0,r.cn)("w-[200%] aspect-square shrink-0",{"group-hover/bbtn:animate-spin-slow":!e.disabled}),style:{background:b}})}),s&&(0,n.jsx)(l.$,{}),(u||!s)&&a]})}},31889:function(e,t,a){a.d(t,{Ev:function(){return useLoadBVaults},a1:function(){return useLoadLVaults},g2:function(){return useLoadUserBVaults},tK:function(){return useLoadLntVaults},z2:function(){return useLoadUserLVaults}});var n=a(87031),r=a(19757),s=a(22139),o=a(55349),c=a(64370),l=a(83978),u=a.n(l),i=a(64103),d=a(96670),p=a(59175),f=a(95889);function useLoadLVaults(){let e=(0,p.p)(),t=r.iK[e]||[],{address:a}=(0,d.m)(),n=(0,i.useMemo)(()=>u().chain(r.iK[e]||[]).map(e=>[e.assetTokenAddress,e.xTokenAddress]).flatten().concat([r.O1[e]]).union().value(),[e]);(0,c.a)({queryKey:["UpdateLvautlsTokens",n],queryFn:async()=>(await o.w.getState().sliceTokenStore.updateTokenTotalSupply(n),!0)}),(0,c.a)({queryKey:["UpdateUserLvautlsTokens",n,a],queryFn:async()=>!!a&&(await o.w.getState().sliceTokenStore.updateTokensBalance(n,a),!0)}),(0,c.a)({queryKey:["UpdateLVautls",t],queryFn:async()=>(await o.w.getState().sliceLVaultsStore.updateLVaults(t),!0)})}function useLoadBVaults(){let e=(0,p.p)(),t=(0,i.useMemo)(()=>n.Fw[e].filter(e=>(e.onEnv||[]).includes(s.Vi)),[e,s.Vi]);(0,c.a)({queryKey:["UpdateBVaults",t],queryFn:async()=>(await Promise.all([o.w.getState().sliceBVaultsStore.updateBvaults(t),o.w.getState().sliceBVaultsStore.updateYTokenSythetic(t)]),!0)});let{address:a}=(0,d.m)(),r=(0,i.useMemo)(()=>t.map(e=>[e.asset,e.pToken]).flat().reduce((e,t)=>e.includes(t)?e:[...e,t],[]),[t]);(0,c.a)({queryKey:["UpdateBvautlsTokens",r],queryFn:async()=>(await Promise.all([o.w.getState().sliceTokenStore.updateTokenTotalSupply(r),o.w.getState().sliceTokenStore.updateTokenPrices(r)]),!0),throwOnError:(e,t)=>(console.error(e),!1)}),(0,c.a)({queryKey:["UpdateUserBvautlsTokens",r,a],queryFn:async()=>!!a&&(await o.w.getState().sliceTokenStore.updateTokensBalance(r,a),!0)})}function useLoadLntVaults(){let e=(0,p.p)(),t=(0,i.useMemo)(()=>{var t;return(null===(t=f.f_[e])||void 0===t?void 0:t.filter(e=>(e.onEnv||[]).includes(s.Vi)))||[]},[e,s.Vi]);(0,c.a)({queryKey:["UpdateLntVaults",t],queryFn:async()=>(await o.w.getState().sliceLntVaultsStore.updateLntVaults(t),!0)});let{address:a}=(0,d.m)(),n=(0,i.useMemo)(()=>t.map(e=>[e.vestingToken,e.vToken]).flat().reduce((e,t)=>e.includes(t)?e:[...e,t],[]),[t]);(0,c.a)({queryKey:["UpdateLntvautlsTokens",n],queryFn:async()=>(await o.w.getState().sliceTokenStore.updateTokenTotalSupply(n),await o.w.getState().sliceTokenStore.updateTokenPrices(n),!0),throwOnError:(e,t)=>(console.error(e),!1)}),(0,c.a)({queryKey:["UpdateUserLntvautlsTokens",n,a],queryFn:async()=>!!a&&(await o.w.getState().sliceTokenStore.updateTokensBalance(n,a),!0)})}function useLoadUserLVaults(){let{address:e}=(0,d.m)(),t=(0,p.p)(),a=r.iK[t]||[];(0,c.a)({queryKey:["UpdateAllUserLVaults",t,e,a],queryFn:async()=>!!e&&(await Promise.all(a.map(t=>o.w.getState().sliceLVaultsStore.updateUserLVault(t,e))),!0)})}function useLoadUserBVaults(){let{address:e}=(0,d.m)(),t=(0,p.p)(),a=(0,i.useMemo)(()=>n.Fw[t].filter(e=>(e.onEnv||[]).includes(s.Vi)),[t,s.Vi]),r=(0,o.o)(e=>u().keys(e.sliceBVaultsStore.bvaults).toString(),["sliceBVaultsStore.bvaults"]);(0,c.a)({queryKey:["UpdateAllUserBvaults",a,t,e,r],queryFn:async()=>{if(!e)return!1;let t=o.w.getState().sliceBVaultsStore.bvaults;for(let e of a)if(!t[e.vault])return!1;await Promise.all(a.map(e=>o.w.getState().sliceBVaultsStore.updateEpoches(e)));let getEpochesParams=e=>{let t=o.w.getState().sliceBVaultsStore.bvaults[e.vault],a=[];for(let n=parseInt(t.epochCount.toString());n>0;n--){let t=o.w.getState().sliceBVaultsStore.epoches["".concat(e.vault,"_").concat(n)];a.push(t)}return a};return await Promise.all(a.map(t=>o.w.getState().sliceUserBVaults.updateEpoches(t,e,getEpochesParams(t)))),!0}})}},78354:function(e,t,a){a.d(t,{R:function(){return useWrapContractWrite}});var n=a(26361),r=a(78403),s=a(64103),o=a(47259),c=a(4408);function useWrapContractWrite(e,t){let{autoToast:a=!0,onSuccess:l}=t||{},[u,i]=(0,s.useState)(!1),[d,p]=(0,s.useState)(!1),{data:f}=(0,c.p)(),v=!f||!f.account||u||!e,write=async()=>{if(!v){i(!0),p(!1);try{let n="function"==typeof e?await e():e,s=(0,r.B)(),c={account:f.account,...n};if(!(null==t?void 0:t.skipSimulate)){let e=await s.simulateContract(c);c=e.request}let u=await f.writeContract(c),i=await s.waitForTransactionReceipt({hash:u,confirmations:null==t?void 0:t.confirmations});if("success"!==i.status)throw"Transaction reverted";p(!0),l&&l(),a&&o.A.success("Transaction success")}catch(e){a&&o.A.error((0,n.az)(e))}i(!1)}};return{write,isDisabled:v,isLoading:u,isSuccess:d}}},36602:function(e,t,a){a.d(t,{A5:function(){return useTotalSupply},b7:function(){return useNftBalance},ln:function(){return useBalances}});var n=a(26361),r=a(55349);function useBalances(){return(0,r.o)(e=>(0,n.Yb)(e.sliceTokenStore.balances,0n),["sliceTokenStore.balances"])}function useNftBalance(e){return(0,r.o)(t=>t.sliceTokenStore.nftBalance[e]||[],["sliceTokenStore.nftBalance.".concat(e)])}function useTotalSupply(e){return(0,r.o)(t=>{var a;return null!==(a=t.sliceTokenStore.totalSupply[e])&&void 0!==a?a:0n},["sliceTokenStore.totalSupply.".concat(e)])}}}]);