"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1162],{4949:function(e,t,a){a.d(t,{vZ:function(){return ApproveAndTx},Lc:function(){return NftApproveAndTx},$M:function(){return Txs},Rb:function(){return withTokenApprove}});var n=a(52987),r=a(79999),s=a(13854),c=a(62628),o=a(83978),l=a.n(o),i=a(77317),u=a(47259),d=a(5624),p=a(87621),f=a(88474);let b={},useApproves=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10000000000n*10n**18n,{address:n,chainId:o}=(0,p.m)(),{data:l}=(0,f.p)(),[m,h]=(0,i.useState)(!1),v=(0,i.useMemo)(()=>Object.keys(e).filter(e=>e!==r.K8),[e]),[x,w]=(0,i.useState)(t&&b[t]||{}),updateAllownce=(e,a)=>{t&&(b[t]={...b[t]||{},[e]:a},w(t=>({...t,[e]:a})))};(0,i.useEffect)(()=>{n&&t&&o&&v.forEach(e=>{(0,c.B)().readContract({abi:d.Wo,address:e,functionName:"allowance",args:[n,t]}).then(t=>updateAllownce(e,t||0n)).catch(console.error)})},[v,o,n]);let[g,y]=(0,i.useState)(!1),k=(0,i.useMemo)(()=>v.filter(t=>(0,s.ok)(e,t)>0n&&(0,s.ok)(e,t)>(0,s.ok)(x,t)),[e,v,x]),approve=async()=>{if(0!=k.length&&t)try{y(!0),h(!1);for(let n=0;n<k.length;n++){let r=k[n],s=!1===a?e[r]:a,o=await (null==l?void 0:l.writeContract({abi:d.Wo,address:r,functionName:"approve",args:[t,s]}));o&&await (0,c.B)().waitForTransactionReceipt({hash:o}),updateAllownce(r,s)}u.A.success("Approve success"),y(!1),h(!0)}catch(e){u.A.error((0,s.az)(e)),y(!1),h(!1)}};return{approve,loading:g,shouldApprove:k.length>0,isSuccess:m}},m={},useNftApproves=(e,t)=>{let{address:a,chainId:n}=(0,p.m)(),{data:r}=(0,f.p)(),[o,b]=(0,i.useState)(!1),h=l().keys(e),[v,x]=(0,i.useState)(t&&m[t]||{}),updateAllownce=(e,a)=>{t&&(m[t]={...m[t]||{},[e]:a},x(t=>({...t,[e]:a})))};(0,i.useEffect)(()=>{a&&t&&n&&h.forEach(e=>{(0,c.B)().readContract({abi:d.Hr,address:e,functionName:"isApprovedForAll",args:[a,t]}).then(t=>t!==v[e]&&updateAllownce(e,t)).catch(console.error)})},[h,n,a]);let[w,g]=(0,i.useState)(!1),y=(0,i.useMemo)(()=>h.filter(e=>!v[e]),[e,h,v]),approve=async()=>{if(0!=y.length&&t)try{g(!0),b(!1);for(let e=0;e<y.length;e++){let a=y[e],n=await (null==r?void 0:r.writeContract({abi:d.Hr,address:a,functionName:"setApprovalForAll",args:[t,!0]}));n&&await (0,c.B)().waitForTransactionReceipt({hash:n}),updateAllownce(a,!0)}u.A.success("Approve success"),g(!1),b(!0)}catch(e){u.A.error((0,s.az)(e)),g(!1),b(!1)}};return{approve,loading:w,shouldApprove:y.length>0,isSuccess:o}};var h=a(46608),v=a(88501),x=a(9061),w=a(44964),g=a(99409),y=a(95499),k=a(87991),A=a(45820);function SwitchNet(e){let{className:t}=e,a=(0,k.o)(),r=(0,g.pK)();return(0,n.jsx)(A.k6,{className:(0,v.m)("flex items-center justify-center gap-4 whitespace-nowrap w-fit min-w-[200px]",t),onClick:()=>a.switchChainAsync({chainId:r}).catch(console.error),busy:a.isPending,disabled:a.isPending,children:"Switch Network"})}function ApproveAndTx(e){let{className:t,tx:a,busyShowTxet:r=!0,approves:s,spender:c,requestAmount:o,config:l,toast:u=!0,skipSimulate:d=!1,disabled:p,confirmations:f,onTxSuccess:b,onApproveSuccess:m}=e,{write:x,isDisabled:w,isLoading:y}=(0,h.R)(l,{onSuccess:()=>b&&b(),autoToast:u,skipSimulate:d,confirmations:f}),k=p||w||y||!1===l.enabled,{approve:N,shouldApprove:C,loading:j,isSuccess:S}=useApproves(s||{},c,o),E=(0,i.useRef)();E.current=m,(0,i.useEffect)(()=>{E.current&&S&&E.current()},[S]);let T=(0,g.tx)();return T?(0,n.jsx)(SwitchNet,{className:t}):C?(0,n.jsx)(A.k6,{className:(0,v.m)("flex items-center justify-center gap-4",t),onClick:N,busy:j,disabled:p||!N||j,children:"Approve"}):(0,n.jsx)(A.k6,{className:(0,v.m)("flex items-center justify-center gap-4",t),onClick:()=>x(),busy:y,busyShowContent:r,disabled:k,children:a})}function NftApproveAndTx(e){let{className:t,tx:a,busyShowTxet:r=!0,approves:s,spender:c,requestAmount:o,config:l,toast:u=!0,skipSimulate:d=!1,disabled:p,confirmations:f,onTxSuccess:b,onApproveSuccess:m}=e,{write:x,isDisabled:w,isLoading:y}=(0,h.R)(l,{onSuccess:()=>b&&b(),autoToast:u,skipSimulate:d,confirmations:f}),k=p||w||y||!1===l.enabled,{approve:N,shouldApprove:C,loading:j,isSuccess:S}=useNftApproves(null!=s?s:{},c),E=(0,i.useRef)();E.current=m,(0,i.useEffect)(()=>{E.current&&S&&E.current()},[S]);let T=(0,g.tx)();return T?(0,n.jsx)(SwitchNet,{className:t}):C?(0,n.jsx)(A.k6,{className:(0,v.m)("flex items-center justify-center gap-4",t),onClick:N,busy:j,disabled:p||!N||j,children:"Approve"}):(0,n.jsx)(A.k6,{className:(0,v.m)("flex items-center justify-center gap-4",t),onClick:()=>x(),busy:y,busyShowContent:r,disabled:k,children:a})}function Txs(e){let{className:t,tx:a,txs:r,disabled:o,busyShowTxet:l=!0,toast:i=!0,disableSendCalls:d,onTxSuccess:p}=e,{data:b}=(0,f.p)(),m=(0,g.tx)(),h=(0,g.pK)(),{mutate:w,isPending:k}=(0,y.D)({mutationFn:async()=>{if(!b)return;let e=await (0,s.IE)(r).then(e=>Promise.all(e.map(s.IE)));console.info("calls:",b.account.address,e);try{if(d)throw Error("disable wallet_sendCalls");let{id:t}=await b.sendCalls({account:b.account.address,calls:e.map(e=>({data:(0,x.R)({abi:e.abi,functionName:e.functionName,args:e.args}),to:e.address}))});for(;;){let e=await b.waitForCallsStatus({id:t});if("pending"!=e.status){if("success"==e.status)i&&u.A.success("Transactions Success"),null==p||p();else throw Error("Transactions ".concat(e.status," ").concat(JSON.stringify(e)));break}}}catch(a){let t=(0,s.az)(a);if(t&&(t.includes("wallet_sendCalls")||t.includes("EIP-7702 not supported"))){let t=(0,c.B)(h);for(let a of e){let e=await b.writeContract(a),n=await t.waitForTransactionReceipt({hash:e,confirmations:1});if("success"!==n.status)throw Error("Transactions Reverted")}i&&u.A.success("Transactions Success"),null==p||p()}}},onError:i?s.S3:()=>{}}),N=o||k||"function"!=typeof r&&0==r.length||!b;return m?(0,n.jsx)(SwitchNet,{}):(0,n.jsx)(A.k6,{className:(0,v.m)("flex items-center justify-center gap-4",t),onClick:()=>w(),busy:k,busyShowContent:l,disabled:N,children:a})}async function withTokenApprove(e){let{approves:t,pc:a,user:n,tx:r}=e,s=0n,c=await Promise.all(t.map(async e=>{if(w.DR===e.token)return s+=e.amount,null;let t=await a.readContract({abi:d.Wo,address:e.token,functionName:"allowance",args:[n,e.spender]});return t>=e.amount?null:{abi:d.Wo,address:e.token,functionName:"approve",args:[e.spender,e.amount-t]}})).then(e=>e.filter(e=>null!==e));return[...c,{...r,...s>0n?{value:s}:{}}]}},61387:function(e,t,a){a.d(t,{Ak:function(){return Expandable},At:function(){return d},UT:function(){return GeneralAction},pk:function(){return p}});var n=a(52987),r=a(13854),s=a(77317),c=a(23125),o=a(83960),l=a(58409),i=a(5477),u=a(4949);let d={menu:()=>(0,r.cn)("bg-white dark:bg-black dark:border"),option:e=>(0,r.cn)({"!bg-primary/50":e.isFocused,"!bg-primary":e.isSelected}),control:()=>"bg-white dark:bg-black !min-h-[58px] !border-primary/70 !shadow-none",singleValue:()=>"dark:text-white"},p="bg-white dark:bg-transparent border-primary/70 w-full h-14 text-right pr-4 font-bold text-sm border focus:border-2  rounded-md outline-none ",defConvertArg=(e,t,a)=>"uint8"==a.type?parseInt((e||"").replaceAll(" ","")):a.type.startsWith("uint")?BigInt((e||"").replaceAll(" ","")):"bytes32"==a.type?(0,i.$G)(e,{size:32}):"bool"==a.type?"true"==e.toLowerCase():e,convertArgs=(e,t,a)=>{try{return e.map((e,n)=>{let r=t[n];return a?a(e,n,r):defConvertArg(e,n,r)})}catch(e){return}};function Expandable(e){let{children:t,tit:a,disable:r}=e,[l,i]=(0,s.useState)(!1);return(0,n.jsxs)("div",{className:"flex flex-col w-full bg-white dark:bg-transparent rounded-lg overflow-hidden border border-solid border-primary/40",children:[(0,n.jsxs)("div",{className:"px-5 py-2 min-h-[58px] flex justify-between items-center text-sm",children:[(0,n.jsx)("div",{className:"font-medium text-base",children:a}),r?t:(0,n.jsxs)("div",{className:"px-2 py-1 rounded-full border border-solid border-primary flex items-center text-xs text-primary cursor-pointer ",onClick:()=>i(!l),children:[(0,n.jsx)("span",{className:"mr-[5px]",children:l?"Close":"Expand"}),l?(0,n.jsx)(o.iRh,{}):(0,n.jsx)(o.tv1,{})]})]}),(0,n.jsx)(c.Collapse,{isOpened:l,theme:{content:"bg-gray-200 dark:bg-transparent p-4 flex flex-col gap-2 whitespace-break-spaces"},children:t})]})}function GeneralAction(e){var t,a;let{abi:c,address:o,functionName:i,tit:d,infos:f,convertArg:b,txProps:m,onArgs:h,argsDef:v}=e,x=c.find(e=>"function"==e.type&&e.name==i),w=(null==x?void 0:null===(t=x.inputs)||void 0===t?void 0:t.length)||0,[{args:g,value:y},k]=(0,l.Z)({value:"",args:Array(w).fill("")}),A=(0,s.useMemo)(()=>g.map((e,t)=>e||(null==v?void 0:v[t])||""),[v,g]),N=(0,r.su)(y);if((0,s.useEffect)(()=>{h&&h(g)},[g]),!x)return;let C=!x.inputs||0==x.inputs.length;return(0,n.jsxs)(Expandable,{tit:d||i,disable:C,children:[null===(a=x.inputs)||void 0===a?void 0:a.map((e,t)=>(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"opacity-60 absolute top-1/2 left-2 -translate-y-1/2 text-xs",children:e.name}),(0,n.jsx)("input",{type:"text",value:A[t],onChange:e=>k({args:g.map((a,n)=>t==n?e.target.value:a)}),className:(0,r.cn)(p)})]},"input_".concat(t))),"payable"==x.stateMutability&&(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"opacity-60 absolute top-1/2 left-2 -translate-y-1/2 text-xs",children:"value"}),(0,n.jsx)("input",{type:"text",value:y,onChange:e=>k({value:e.target.value}),className:(0,r.cn)(p)})]}),f,(0,n.jsx)(u.vZ,{...m||{},tx:"Write",config:{abi:c,address:o,functionName:i,...A.length?{args:convertArgs(A,x.inputs,b)}:{},value:N},className:(0,r.cn)("!mt-0 flex items-center justify-center gap-4",C?"max-w-[100px]":"w-full")})]})}},26694:function(e,t,a){a.d(t,{E:function(){return PageWrap}});var n=a(52987);a(77317);var r=a(13854),s=a(96396),c=a(78525);function PageWrap(e){let{children:t,className:a}=e,o=(0,c.l)(e=>e.theme),l=(0,s.usePathname)();return(0,n.jsx)("div",{className:(0,r.cn)("min-h-[calc(100vh+1px)] h-auto pt-[90px] pb-6",a),style:{backgroundSize:"contain",background:"light"==o?"transparent":"/"==l?"url(bg_home.svg) center bottom no-repeat,linear-gradient(105.67deg, #02050E 14.41%, #1D2F23 98.84%)":"linear-gradient(105.67deg, #02050E 14.41%, #1D2F23 98.84%)"},children:t})}},73559:function(e,t,a){a.d(t,{j:function(){return r}});var n=a(64786);let r=[{tit:"YTK Vault1",vault:"0x8e2fd9b36b9d1dea6b931f3492d26745daa195e3",asset:"0x97e733e8583169c3a8f8d18e0556b6567973c5b8",bt:"0xaca6abef41315da039f0025900bdbb2e85034325",protocal:"0x521ec0865129ddbefa6963ac2a5c4bf4d3ebf2d8",protocalSettings:"0xbfa4b61d2a75056521ee543d516374515221a9e8",hook:"0x4b5435453b6d6b61b61f129d11cb186d97bc7a88",mockInfraredVault:"0x2aba549ac8b3e79225b45bb2e94e99e42fe8ffeb",onEnv:["test"],chain:n.F.id,logs:!0},{tit:"YTK Vault2",vault:"0xf6c73f08114556e523c6255fcd9a60dc0b01268a",asset:"0x97e733e8583169c3a8f8d18e0556b6567973c5b8",bt:"0xaca6abef41315da039f0025900bdbb2e85034325",protocal:"0x521ec0865129ddbefa6963ac2a5c4bf4d3ebf2d8",protocalSettings:"0xbfa4b61d2a75056521ee543d516374515221a9e8",hook:"0xb8b435fd066c3a0a78bbd83c59d0fee2c1db7a88",mockInfraredVault:"0x2aba549ac8b3e79225b45bb2e94e99e42fe8ffeb",onEnv:["test"],chain:n.F.id}]},16759:function(e,t,a){a.d(t,{G:function(){return useVaultsConfigs}});var n=a(58400),r=a(79999),s=a(96555),c=a(77317),o=a(58409),l=a(99409),i=a(61650),u=a(73559);function useVaultsConfigs(){let e=(0,l.pK)(),t=r.iK[e]||[],a=r.VQ[e]||[],d=(0,c.useMemo)(()=>(n.Fw[e]||[]).filter(e=>e.onEnv&&e.onEnv.includes(s.Vi)),[e]),p=(0,c.useMemo)(()=>(i.f_[e]||[]).filter(e=>e.onEnv&&e.onEnv.includes(s.Vi)),[e]),f=(0,c.useMemo)(()=>u.j.filter(t=>t.onEnv&&t.onEnv.includes(s.Vi)&&t.chain===e),[e]),b=(0,c.useMemo)(()=>{let e=t.map(e=>({label:e.assetTokenSymbol,value:e.vault,data:e,type:"L-Vault"})),n=a.map(e=>({label:e.assetTokenSymbol,value:e.vault,data:e,type:"P-Vault"})),r=d.map(e=>({label:e.assetSymbol,value:e.vault,data:e,type:"B-Vault"})),s=p.map(e=>({label:e.assetSymbol,value:e.vault,data:e,type:"Lnt-Vault"})),c=f.map(e=>({label:e.tit,value:e.vault,data:e,type:"B-Vault2"}));return[...e,...n,...r,...s,...c].map(e=>({...e,label:"".concat(e.label,"(").concat(e.type,":").concat(e.data.vault,")")}))},[t,a,d,p]),[{current:m},h]=(0,o.Z)({current:b[0]});return{current:m,setState:h,options:b}}},83810:function(e,t,a){a.d(t,{D2:function(){return useWandContractRead},uX:function(){return useWandContractReads}}),a(62628);var n=a(83978),r=a.n(n);a(77317);var s=a(7886),c=a(17032),o=a(93108);let l=(0,o.Ue)(e=>({time:r().now(),update:()=>{e({time:r().now()})}}));function useWandContractRead(e){let{time:t}=l();return(0,s.u)({...e,query:{placeholderData:e=>e,refetchOnMount:!1,refetchOnWindowFocus:!1,...e.query||{}},wandtime:t})}function useWandContractReads(e){let{time:t}=l();return(0,c.N)({...e,query:{placeholderData:e=>e,refetchOnMount:!1,refetchOnWindowFocus:!1,...e.query||{}},wandtime:t})}},46608:function(e,t,a){a.d(t,{R:function(){return useWrapContractWrite}});var n=a(13854),r=a(62628),s=a(77317),c=a(47259),o=a(88474);function useWrapContractWrite(e,t){let{autoToast:a=!0,onSuccess:l}=t||{},[i,u]=(0,s.useState)(!1),[d,p]=(0,s.useState)(!1),{data:f}=(0,o.p)(),b=!f||!f.account||i||!e,write=async()=>{if(!b){u(!0),p(!1);try{let n="function"==typeof e?await e():e,s=(0,r.B)(),o={account:f.account,...n};if(!(null==t?void 0:t.skipSimulate)){let e=await s.simulateContract(o);o=e.request}let i=await f.writeContract(o),u=await s.waitForTransactionReceipt({hash:i,confirmations:null==t?void 0:t.confirmations});if("success"!==u.status)throw"Transaction reverted";p(!0),l&&l(),a&&c.A.success("Transaction success")}catch(e){a&&c.A.error((0,n.az)(e))}u(!1)}};return{write,isDisabled:b,isLoading:i,isSuccess:d}}}}]);