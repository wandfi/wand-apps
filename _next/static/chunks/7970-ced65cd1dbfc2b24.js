"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7970],{36834:function(e,t,s){s.d(t,{k:function(){return a.Z}});var a=s(78321)},67970:function(e,t,s){s.r(t),s.d(t,{default:function(){return Vaults}});var a=s(31113),l=s(59781),n=s(83718),r=s(44020),i=s(22139),c=s(59175),o=s(26361),d=s(78403),m=s(55349),u=s(18358),x=s(84944),p=s(64370),h=s(36834),b=s(83978),f=s.n(b),v=s(69708),j=s(64103),g=s(12485),w=s(93650),N=s(14993),y=s(85665),k=s(20265);let T="0x0000000000000000000000000000000000000000";var B=s(4408),S=s(99548),C=s(91214),V=s(68535),P=s(49041),A=s(64217),E=s(11292);let bnToNum=e=>f().round(parseFloat((0,E.d)(BigInt(e))),5),logTrans=e=>f().round(Math.log10(90*e+1),5),revertLog=e=>f().round((Math.pow(10,e)-1)/90,5);function BvaultEpochYtPrices(e){let{bvc:t,epochId:s}=e,{data:l}=(0,p.a)({queryKey:["bvualt-epoch-yt-prices",t.vault,s],queryFn:()=>(0,V.l6)(t.vault,s),initialData:[]}),[n,r]=(0,N.Z)(!0),{options:i}=(0,j.useMemo)(()=>{let e=l.map(e=>[(0,o.G$)(1e3*e.time,o.mv.ALL),n?logTrans(bnToNum(e.price)):bnToNum(e.price)]),valueFormater=e=>n?revertLog(e).toString():e.toString(),t={animation:!0,animationDuration:200,tooltip:{trigger:"axis",valueFormatter:valueFormater},grid:{top:30,bottom:30,right:20,show:!1},toolbox:{show:!1},xAxis:{type:"category",boundaryGap:!1,axisLine:{onZero:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1},max:e=>1.1*e.max,axisLabel:{formatter:valueFormater}},dataZoom:[{type:"inside",start:0,end:100,minValueSpan:10},{show:!1}],series:[{name:"YT Price",type:"line",symbol:"none",sampling:"lttb",itemStyle:{color:"rgb(30, 202, 83)"},areaStyle:{origin:"start",color:new A.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(30, 202, 83)"},{offset:1,color:"rgba(30, 202, 83, 0.2)"}])},data:e}]};return{data:e,options:t}},[l,n]);return(0,a.jsxs)("div",{className:"card p-4 mx-auto max-w-4xl w-full min-w-0",children:[(0,a.jsxs)("div",{className:"flex justify-between gap-2 items-center",children:[(0,a.jsx)("span",{className:"text-base font-bold",children:"YT Price Chart"}),(0,a.jsx)("span",{className:"text-xs font-medium dark:text-[#FBECEC]"})]}),(0,a.jsx)("div",{className:"flex gap-2 justify-end items-center mt-2",children:(0,a.jsx)("span",{className:(0,o.cn)("cursor-pointer text-xs px-1 py-0 rounded border-primary border",n?"bg-primary":"bg-transparent"),onClick:()=>r(),children:"LOG"})}),(0,a.jsx)(P.Z,{option:i,style:{height:240}})]})}var I=s(73216),Y=s(42487),F=s.n(Y),R=s(99971);function GetvIP(e){let{address:t}=e;return(0,a.jsxs)("div",{className:"text-xs font-medium flex gap-2 justify-end items-center",children:[(0,a.jsx)(R.c,{symbol:"verio",size:18}),(0,a.jsx)(F(),{target:"_blank",className:"underline",href:(0,I.FN)(t),children:"Get vIP on Verio"})]})}var D=s(75496),L=s(16738),q=s(54825),W=s(6371),G=s(32036);function TupleTxt(e){return(0,a.jsxs)("div",{className:"flex items-center gap-5",children:[(0,a.jsx)("div",{className:"text-xs dark:text-white/60 font-medium",children:e.tit}),(0,a.jsx)("div",{className:(0,o.cn)("text-lg  font-medium flex items-center",e.subClassname),children:e.sub})]})}function BVaultRedeem(e){let{bvc:t}=e,[s,l]=(0,j.useState)(""),r=(0,o.su)(s),i=(0,u.nr)(t.vault),c=(0,u.Vw)(t.vault)[0],d=(0,m.o)(e=>e.sliceTokenStore.balances[t.pToken]||0n,["sliceTokenStore.balances.".concat(t.pToken)]),x=(0,u.R3)(t),p=i.current.duration>0n?"Waiting Time: ~".concat((0,o.Y)((i.current.duration+i.current.startTime)*1000n-BigInt(f().now()))):"";return(0,a.jsxs)("div",{className:(0,o.cn)("flex flex-col gap-1"),children:[(0,a.jsx)(C.W,{asset:t.pTokenSymbol,amount:s,balance:d,setAmount:l}),(0,a.jsxs)("div",{className:"text-xs font-medium text-center",children:[p," ",(0,a.jsx)(W.C,{children:"Wait to claim after the Epoch ends."})]}),(0,a.jsx)(S.v,{className:"mx-auto mt-6",tx:"Request",spender:null==c?void 0:c.redeemPool,approves:{[t.pToken]:r},disabled:c&&r<=0n||r>d,config:{abi:i.closed?n.j5:n.gg,address:i.closed?t.vault:(null==c?void 0:c.redeemPool)||T,functionName:"redeem",args:[r]},onTxSuccess:()=>{l(""),x()}})]})}function BVaultClaim(e){let{bvc:t}=e,s=(0,u.nr)(t.vault),l=(0,u.Vw)(t.vault)[0],r=(null==l?void 0:l.redeemingBalance)||0n,{ids:i,claimable:c}=(0,u.gz)(t.vault),d=(0,u.R3)(t);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-base font-medium items-center gap-5 pt-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-black/60 dark:text-white/60 text-sm",children:"Available to Claim"}),(0,a.jsxs)("div",{className:"flex gap-4 items-center whitespace-nowrap mt-2",children:[(0,a.jsx)(R.c,{symbol:t.yeetLiqSymbol||t.assetSymbol,size:24}),(0,a.jsx)("span",{className:"font-semibold",children:t.yeetLiqSymbol||t.assetSymbol}),(0,a.jsx)("span",{className:"text-black/60 dark:text-white/60 ",children:(0,x.d)(c)})]})]}),(0,a.jsx)(S.v,{className:"ml-auto w-1/3",busyShowTxet:!1,tx:"Claim",disabled:c<=0n,config:{abi:n.j5,address:t.vault,functionName:"batchClaimRedeemAssets",args:[i.length>40?i.slice(i.length-40):i]},onTxSuccess:()=>{d()}})]}),(0,a.jsx)("div",{className:"h-[1px] bg-border my-4"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-black/60 dark:text-white/60 mb-4",children:"Pending Requests"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(R.c,{symbol:t.pTokenSymbol,size:24}),(0,a.jsx)("span",{className:"font-semibold",children:t.pTokenSymbol}),(0,a.jsx)("span",{className:"text-black/60 dark:text-white/60",children:(0,x.d)(r)}),(0,a.jsxs)("div",{className:"ml-auto text-xs text-black/60 dark:text-white/60 ",children:["Settlement Time : ",(0,a.jsx)("span",{className:"text-black dark:text-white font-semibold pr-2",children:(0,o.G$)((s.current.duration+s.current.startTime)*1000n,o.mv.DATE2)})," ",(0,o.Y)((s.current.duration+s.current.startTime)*1000n-BigInt(f().now()))]})]})]})]})}function BVaultP(e){var t;let{bvc:s}=e,[i,c]=(0,j.useState)(""),d=(0,o.su)(i),p=r.P[s.asset],h=!!p,b=h?"PT":s.pTokenSymbol,f=h?"LP":s.assetSymbol,g=(0,u.nr)(s.vault),w=(0,m.o)(e=>e.sliceTokenStore.balances[s.asset]||0n,["sliceTokenStore.balances.".concat(s.asset)]),[N]=(0,u.oU)(s.vault),{data:y}=(0,B.p)(),k=(0,u.R3)(s),T=(0,v.useSearchParams)(),V=T.get("subtab"),P=(0,v.useRouter)(),A=[{tab:"Buy",content:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(C.W,{asset:s.assetSymbol,amount:i,balance:w,setAmount:c}),(0,a.jsx)(GetvIP,{address:s.asset}),(0,a.jsx)("div",{className:"text-xs font-medium text-center",children:"Receive 1 ".concat(b," for every ").concat(f)}),(0,a.jsx)(S.v,{className:"mx-auto mt-4",tx:"Buy",disabled:d<=0n||d>w,spender:s.vault,approves:{[s.asset]:d},config:{abi:n.j5,address:s.vault,functionName:"deposit",args:[d]},onTxSuccess:()=>{c(""),k()}})]})},{tab:"Withdraw",content:(0,a.jsx)(BVaultRedeem,{bvc:s})},{tab:"Claim",content:(0,a.jsx)(BVaultClaim,{bvc:s})}],E=null===(t=A.find(e=>e.tab.toLowerCase()==V))||void 0===t?void 0:t.tab;return(0,a.jsxs)("div",{className:(0,o.cn)("flex flex-col gap-5","max-w-4xl mx-auto w-full","max-w-xl"),children:[(0,a.jsxs)("div",{className:"card !p-0 overflow-hidden w-full",children:[(0,a.jsxs)("div",{className:"flex p-5 bg-[#10B98126] gap-5",children:[(0,a.jsx)(R.c,{size:54,symbol:"PToken"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"text-xl text-black font-semibold",children:s.pTokenSymbol}),(0,a.jsx)("div",{className:"text-xs text-black/60 font-medium",children:"Interest bearing rebase principal token"})]})]}),(0,a.jsxs)("div",{className:"flex items-baseline justify-between px-5 pt-5 gap-5",children:[(0,a.jsx)(TupleTxt,{tit:"APY Est.",sub:N}),(0,a.jsx)(TupleTxt,{tit:"Total Supply",sub:(0,a.jsx)(a.Fragment,{children:(0,x.d)(g.pTokenTotal)})})]}),(0,a.jsx)("div",{className:"flex px-2 pb-5",children:(0,a.jsx)("button",{className:"btn-link ml-auto text-black/60 dark:text-white/60 text-xs",onClick:()=>{null==y||y.watchAsset({type:"ERC20",options:{address:s.pToken,symbol:s.pTokenSymbol,decimals:18}}).catch(o.S3)},children:"Add to wallet"})})]}),(0,a.jsx)("div",{className:"md:col-span-2 card !p-4",children:(0,a.jsx)(L.x,{currentTab:E,data:A,onTabChange:e=>(0,l.rc)(P,s.vault,"principal_panda",e)})})]})}function BVaultYInfo(e){let{bvc:t}=e,s=t.assetSymbol.includes("-"),l=s?"YT":t.yTokenSymbol,n=s?"LP token":t.assetSymbol,r=(0,u.nr)(t.vault),c=r.current,d=r.current.yTokenAmountForSwapYT>0n?r.lockedAssetTotal*i.Pq/r.current.yTokenAmountForSwapYT:0n,[m]=(0,u.v7)(t.vault);return(0,a.jsxs)("div",{className:"card !p-0 overflow-hidden flex flex-col",children:[(0,a.jsxs)("div",{className:"flex p-5 bg-[#6366F126] gap-5",children:[(0,a.jsx)(R.c,{size:54,symbol:"YToken"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"text-xl text-black font-semibold",children:t.yTokenSymbol}),(0,a.jsx)("div",{className:"text-xs text-black/60 font-medium",children:"Yield token"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col justify-between p-5 gap-5 flex-1",children:[(0,a.jsxs)("div",{className:"flex justify-between items-baseline gap-4 flex-wrap",children:[(0,a.jsxs)("div",{className:"text-base font-semibold flex gap-5 items-end",children:[(0,a.jsxs)("span",{className:"text-4xl font-medium",children:[m,"x"]}),"Yield Boosted"]}),(0,a.jsxs)("span",{className:"text-xs",children:["1",l," = Yield of ",(0,x.d)(d,2)," ",n]})]}),(0,a.jsx)(TupleTxt,{tit:"Circulation amount",sub:(0,a.jsx)(a.Fragment,{children:(0,x.d)(r.current.yTokenAmountForSwapYT)})}),c&&(0,a.jsxs)("div",{className:"dark:text-white/60 text-xs whitespace-nowrap gap-1 flex w-full flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:"Epoch ".concat(c.epochId.toString())}),(0,a.jsxs)("span",{className:"scale-90",children:["~",(0,o.Y)((c.startTime+c.duration)*1000n-BigInt(new Date().getTime()))," remaining"]})]}),(0,a.jsx)(h.k,{value:(e=>{let t=BigInt(Math.floor(new Date().getTime()/1e3));if(t<e.startTime)return 0;if(t-c.startTime>=c.duration)return 100;let s=(t-c.startTime)*100n/e.duration;return parseInt(s.toString())})(c),className:"mt-2 rounded-full overflow-hidden"}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"scale-90",children:(0,o.G$)(1000n*c.startTime,o.mv.ALL2)}),(0,a.jsx)("span",{className:"scale-90",children:(0,o.G$)((c.startTime+c.duration)*1000n,o.mv.ALL2)})]})]})]})]})}function BVaultYTrans(e){let{bvc:t}=e,s=t.assetSymbol.includes("-");s||t.pTokenSymbol;let l=s?"YT":t.yTokenSymbol,r=s?"LP token":t.assetSymbol,[h,b]=(0,j.useState)(""),f=(0,o.su)(h),v=(0,u.nr)(t.vault),y=(0,m.o)(e=>e.sliceTokenStore.balances[t.asset]||0n,["sliceTokenStore.balances.".concat(t.asset)]),k=(0,c.p)(),[T,B]=(0,j.useState)(["calcSwap",t.vault,f,k]);(0,w.Z)(()=>B(["calcSwap",t.vault,f,k]),300,["calcSwap",t.vault,f,k]);let{data:V,isFetching:P}=(0,p.a)({queryKey:T,queryFn:()=>(0,d.B)().readContract({abi:n.j5,address:t.vault,functionName:"calcSwap",args:[f]})}),[A,E]=(0,N.Z)(!1),I=v.current.vaultYTokenBalance,Y=(0,o.ok)(V,"1"),F=I>0n?v.Y*i.Pq/I:0n,R=F>0n?i.Pq*i.Pq/F:0n,D=A?"1 ".concat(r,"=").concat((0,x.d)(R)," ").concat(l):"1 ".concat(l,"=").concat((0,x.d)(F)," ").concat(r),L=I>Y?(v.Y+f)*i.Pq/(I-Y):0n,q=(0,o.Kl)(Y,void 0,!0),W=L>F&&F>0n?(L-F)*BigInt(1e10)/F:0n,G=(0,u.R3)(t);return(0,a.jsxs)("div",{className:"card !p-4 flex flex-col h-[24.25rem] gap-1",children:[(0,a.jsx)(C.W,{asset:t.assetSymbol,amount:h,balance:y,setAmount:b}),(0,a.jsx)(GetvIP,{address:t.asset}),(0,a.jsx)("div",{className:"text-base font-bold my-2",children:"Receive"}),(0,a.jsx)(C.W,{asset:t.yTokenSymbol,loading:P&&!!h,readonly:!0,disable:!0,checkBalance:!1,amount:q}),(0,a.jsxs)("div",{className:"text-xs font-medium  flex justify-between select-none",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.k$E,{className:"text-sm text-primary cursor-pointer inline-block",onClick:()=>E()}),(0,a.jsx)("span",{children:"Price: ".concat(D)})]}),(0,a.jsx)("div",{className:"flex gap-2 items-center",children:"Price Impact: ".concat((0,o.Jh)(W,10,2))})]}),(0,a.jsx)(S.v,{className:"mx-auto mt-auto",tx:"Buy",disabled:f<=0n||f>y,config:{abi:n.j5,address:t.vault,functionName:"swap",args:[f]},approves:{[t.asset]:f},spender:t.vault,onTxSuccess:()=>{b(""),G()}})]})}function BribeTit(e){return(0,a.jsxs)("div",{className:"flex items-center justify-start pl-5 gap-3",children:[(0,a.jsx)(R.c,{symbol:"GreenDot",size:14}),(0,a.jsx)(W.C,{node:(0,a.jsx)("span",{className:"text-sm font-medium",children:(0,o.lS)(e.name,6,0)}),children:e.name.length>6?e.name:null})]})}function BVaultPoolsOld(e){var t;let{bvc:s}=e,[l,r]=(0,j.useState)(!1),c=(0,u.Vw)(s.vault),d=(0,j.useMemo)(()=>l?c.filter(e=>e.bribes.reduce((e,t)=>e+t.bribeAmount,0n)>0n):c,[c,l]),[m,p]=(0,y.Z)(),h="text-black/60 dark:text-white/60 text-sm",[b,f]=(0,j.useState)(null===(t=d[0])||void 0===t?void 0:t.epochId),v=(0,j.useMemo)(()=>b?d.find(e=>e.epochId==b):d[0],[d,b]),g=(null==v?void 0:v.userBalanceYToken)||0n,w=(null==v?void 0:v.userBalanceYTokenSyntyetic)||0n,onRowClick=e=>{var t;f(null===(t=d[e])||void 0===t?void 0:t.epochId)},N=(null==v?void 0:v.bribes)||[],T=(0,j.useMemo)(()=>{let e=N.find(e=>e.bribeAmount>0n);return e&&0n!=e.bribeTotalAmount?(0,o.Jh)(e.bribeAmount*i.Pq/e.bribeTotalAmount,18):(0,o.Jh)(0n,0n)},[N]),B=(0,u.R3)(s);return(0,a.jsxs)("div",{className:"md:h-[24.25rem] card !p-4",children:[(0,a.jsx)("div",{className:"font-bold text-base",children:"Harvest"}),(0,a.jsxs)("div",{className:(0,o.cn)("flex flex-col md:flex-row gap-4 mt-2"),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 shrink-0 w-full md:w-[14.375rem]",ref:m,children:[(0,a.jsxs)("div",{className:"flex items-center gap-8 text-sm font-semibold",children:[(0,a.jsx)("span",{children:"My Pool Only"}),(0,a.jsx)(q.r,{checked:l,onChange:r})]}),(0,a.jsx)(k.aV,{className:d.length>6?"pr-5":"",width:p.width,height:280,rowHeight:e=>{let{index:t}=e;return t<d.length-1?76:56},overscanRowCount:6,rowCount:d.length,rowRenderer:function(e){let{key:t,style:s,index:l}=e,n=d[l],r="".concat((0,o.G$)(1000n*n.startTime),"-").concat((0,o.G$)((n.startTime+n.duration)*1000n));return(0,a.jsx)("div",{style:s,className:"cursor-pointer",onClick:()=>onRowClick(l),children:(0,a.jsxs)("div",{className:(0,o.cn)("h-[56px] card !rounded-lg !px-5 !py-2 font-semibold",l<d.length-1?"mb-[20px]":""),children:[(0,a.jsxs)("div",{className:"text-sm",children:["Epoch ",d[l].epochId.toString()]}),(0,a.jsx)("div",{className:"text-xs dark:text-white/60 mt-1",children:r})]})},t)}})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,a.jsxs)("div",{className:"flex gap-6 items-end font-semibold",children:[(0,a.jsx)("span",{className:"text-sm",children:"Accumulated Rewards"}),(0,a.jsxs)("span",{className:"text-xs dark:text-white/60",children:["Epoch ",((null==v?void 0:v.epochId)||1n).toString()]})]}),(0,a.jsx)("div",{className:"mt-2 rounded-lg border border-solid border-border px-4 py-1 h-[8.125rem] overflow-auto",children:(0,a.jsx)(D.ZP,{headerClassName:"text-center text-black/60 dark:text-white/60 border-b-0",headerItemClassName:"py-1",rowClassName:"text-center",cellClassName:"py-0",header:["","","Total","Mine",""],span:{1:2,2:1,3:1},data:N.map(e=>["",(0,a.jsx)(BribeTit,{name:e.bribeSymbol},"1"),(0,x.d)(e.bribeTotalAmount),(0,x.d)(e.bribeAmount),""])})}),(0,a.jsxs)("div",{className:"rounded-lg border border-solid border-border px-4 py-2 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"font-semibold text-xs",children:[(0,a.jsxs)("div",{children:["My yToken: ",(0,a.jsx)("span",{className:(0,o.cn)(h),children:(0,x.d)(g)})]}),(0,a.jsxs)("div",{children:["Time Weighted Points:"," ",(0,a.jsx)("span",{className:(0,o.cn)(h),children:g>0n&&0n==w?"Reward received":(0,x.d)(w)})]})]}),(0,a.jsxs)("div",{className:"text-sm",children:["My Share: ",(0,a.jsx)("span",{className:(0,o.cn)(h,"text-xl"),children:T})]})]}),(0,a.jsx)("span",{className:"text-xs mx-auto",children:"You can harvest at the end of Epoch"}),(0,a.jsx)(S.v,{className:"mx-auto mt-4",tx:"Harvest",disabled:!v||!(null==v?void 0:v.settled),config:{abi:n.j5,address:s.vault,functionName:"claimBribes",args:[null==v?void 0:v.epochId]},onTxSuccess:()=>{B()}})]})]})]})}function BVaultPools(e){var t;let{bvc:s}=e,[l,r]=(0,j.useState)(!1),i=(0,u.Vw)(s.vault),c=(0,j.useMemo)(()=>l?i.filter(e=>e.sBribes.reduce((e,t)=>e+t.bribeAmount,0n)>0n||e.aBribes.reduce((e,t)=>e+t.bribeAmount,0n)>0n):i,[i,l]),[d,m]=(0,y.Z)(),[p,h]=(0,j.useState)(null===(t=c[0])||void 0===t?void 0:t.epochId),b=(0,j.useMemo)(()=>p?c.find(e=>e.epochId==p):c[0],[c,p]),f=(null==b?void 0:b.userBalanceYToken)||0n,v=(null==b?void 0:b.userBalanceYTokenSyntyetic)||0n,g=(null==b?void 0:b.userClaimableYTokenSyntyetic)||0n,onRowClick=e=>{var t;h(null===(t=c[e])||void 0===t?void 0:t.epochId)},w=(null==b?void 0:b.sBribes)||[],N=(null==b?void 0:b.aBribes)||[],T=(0,u.R3)(s);return(0,a.jsxs)("div",{className:"md:h-[24.25rem] card !p-4",children:[(0,a.jsx)("div",{className:"font-bold text-base",children:"Harvest"}),(0,a.jsxs)("div",{className:(0,o.cn)("flex flex-col md:flex-row gap-4 mt-2"),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 shrink-0 w-full md:w-[14.375rem]",ref:d,children:[(0,a.jsxs)("div",{className:"flex items-center gap-8 text-sm font-semibold",children:[(0,a.jsx)("span",{children:"My Pool Only"}),(0,a.jsx)(q.r,{checked:l,onChange:r})]}),(0,a.jsx)(k.aV,{className:c.length>6?"pr-5":"",width:m.width,height:280,rowHeight:e=>{let{index:t}=e;return t<c.length-1?76:56},overscanRowCount:6,rowCount:c.length,rowRenderer:function(e){let{key:t,style:s,index:l}=e,n=c[l],r="".concat((0,o.G$)(1000n*n.startTime),"-").concat((0,o.G$)((n.startTime+n.duration)*1000n));return(0,a.jsx)("div",{style:s,className:"cursor-pointer",onClick:()=>onRowClick(l),children:(0,a.jsxs)("div",{className:(0,o.cn)("h-[56px] card !rounded-lg !px-5 !py-2 font-semibold",l<c.length-1?"mb-[20px]":""),children:[(0,a.jsxs)("div",{className:"text-sm",children:["Epoch ",c[l].epochId.toString()]}),(0,a.jsx)("div",{className:"text-xs dark:text-white/60 mt-1",children:r})]})},t)}})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,a.jsxs)("div",{className:"flex gap-6 items-end font-semibold",children:[(0,a.jsx)("span",{className:"text-sm",children:"Rewards"}),(0,a.jsxs)("span",{className:"text-xs dark:text-white/60",children:["Epoch ",((null==b?void 0:b.epochId)||1n).toString()]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto flex flex-col gap-4 font-semibold text-sm",children:[(0,a.jsxs)("div",{className:"flex gap-8 items-end font-semibold",children:[(0,a.jsx)("span",{className:"text-sm",children:"YT Balance"}),(0,a.jsx)("span",{className:"text-xs dark:text-white/60",children:(0,x.d)(f)})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-5 justify-start relative pt-8 items-center",children:[w.map(e=>(0,a.jsxs)("div",{className:"flex items-center w-full relative gap-20 pl-[20%]",children:[(0,a.jsx)(BribeTit,{name:e.bribeSymbol}),(0,a.jsx)("div",{className:"absolute left-1/2",children:(0,x.d)(e.bribeAmount)})]},e.bribeToken)),(0,a.jsx)("span",{className:"absolute left-0 top-0",children:"Berachain Emission"}),(0,a.jsx)("span",{className:"absolute left-1/2 top-0 dark:text-white/60",children:"Claimable"}),(0,a.jsx)(S.v,{className:"absolute w-28 top-0 right-0",tx:"Claim",disabled:!b,config:{abi:n.l0,address:null==b?void 0:b.stakingBribesPool,functionName:"getBribes"},onTxSuccess:()=>{T()}})]}),(0,a.jsxs)("div",{className:"flex items-center relative",children:[(0,a.jsxs)("span",{className:"text-sm",children:["YT Points ",(0,a.jsx)(W.C,{children:"YT Points are calculated based on the duration of YT holding and apply to some uncertain rewards, such as airdrops."})]}),(0,a.jsx)("span",{className:" dark:text-white/60 ml-10",children:(0,x.d)(v,void 0,23)}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 absolute left-1/2 top-0",children:[(0,a.jsx)("span",{className:"dark:text-white/60",children:"Claimable"}),(0,a.jsx)("span",{children:(0,x.d)(g,void 0,23)})]}),(0,a.jsx)(S.v,{className:"w-28 ml-auto",tx:"Claim",disabled:!b,config:{abi:n.q3,address:null==b?void 0:b.adhocBribesPool,functionName:"collectYT"},onTxSuccess:()=>{T()}})]}),N.length>0&&(0,a.jsxs)("div",{className:"flex flex-col gap-5 justify-start relative pt-8 items-center",children:[N.map(e=>(0,a.jsxs)("div",{className:"flex items-center w-full relative gap-20 pl-[20%]",children:[(0,a.jsx)(BribeTit,{name:e.bribeSymbol}),(0,a.jsx)("div",{className:"absolute left-1/2",children:(0,x.d)(e.bribeAmount)})]},e.bribeToken)),(0,a.jsx)("span",{className:"absolute left-0 top-0",children:"Additional Incentives"}),(0,a.jsx)("span",{className:"absolute left-1/2 top-0 dark:text-white/60",children:"Claimable"}),(0,a.jsx)(S.v,{className:"absolute w-28 top-0 right-0",tx:"Claim",disabled:!b,config:{abi:n.q3,address:null==b?void 0:b.adhocBribesPool,functionName:"getBribes"},onTxSuccess:()=>{T()}})]})]})]})]})]})}function BVaultB(e){let{bvc:t}=e,s=(0,u.nr)(t.vault);return(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[4fr_6fr] gap-5",children:[(0,a.jsx)(BVaultYInfo,{bvc:t}),(0,a.jsx)(BvaultEpochYtPrices,{bvc:t,epochId:s.epochCount}),(0,a.jsx)(BVaultYTrans,{bvc:t}),t.isOld?(0,a.jsx)(BVaultPoolsOld,{bvc:t}):(0,a.jsx)(BVaultPools,{bvc:t})]})}function BVaultCard(e){let{vc:t}=e,s=(0,v.useRouter)(),[n,c]=t.assetSymbol.split("-"),d=(0,u.nr)(t.vault),p=r.P[t.asset],h=(0,m.o)(e=>e.sliceTokenStore.prices,["sliceTokenStore.prices"]),b=p&&h[p.base]||0n,j=p&&h[p.quote]||0n,g=d.lpBase||0n,w=d.lpQuote||0n,N=g*b/i.Pq,y=w*j/i.Pq,k=N+y;0n===k&&(k=d.lockedAssetTotal);let[T]=(0,u.v7)(t.vault),[B]=(0,u.oU)(t.vault),S="Epoch ".concat(((null==d?void 0:d.epochCount)||0n).toString()),C=0n==d.epochCount?"-- -- --":(0,o.G$)((d.current.startTime+d.current.duration)*1000n,o.mv.DATE2),V=0n==d.epochCount?"":(0,o.Y)((d.current.startTime+d.current.duration)*1000n-BigInt(f().now()));return(0,a.jsxs)("div",{className:(0,o.cn)("card !p-0 grid grid-cols-2 overflow-hidden",{}),children:[(0,a.jsxs)("div",{className:(0,o.cn)(G.bG,"border-b","bg-black/10 dark:bg-white/10 col-span-2 flex-row px-4 md:px-5 py-4 items-center"),children:[(0,a.jsx)(R.c,{symbol:t.assetSymbol,size:44}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:" text-lg font-semibold whitespace-nowrap",children:t.assetSymbol}),(0,a.jsx)("div",{className:" text-sm font-medium",children:t.assetSymbol.includes("-")?"LP Token":""})]}),(0,a.jsxs)("div",{className:"ml-auto",children:[(0,a.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:"Total Value Locked"}),(0,a.jsxs)("div",{className:"text-sm font-medium",children:["$",(0,x.d)(k,2)]})]})]}),p&&(0,G.BW)(n,g,N),p&&(0,G.BW)(c,w,y,!0),(0,G.yP)("Settlement Time",d.closed?"status-red":"status-green",d.closed?"Closed":(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,a.jsx)("span",{children:C}),(0,a.jsx)("span",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:V})]}),d.epochCount>0n&&(0,a.jsx)("div",{className:"absolute top-full mt-1 left-0 text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:S})]})),(0,G.yP)("Reward",t.rewardSymbol||"vIP",t.rewardSymbol||"vIP",!0),(0,G.Sn)("PToken","Principal Token",B,"YToken","Yield Token","".concat(T,"x"),e=>{e.stopPropagation(),(0,l.rc)(s,t.vault,"principal_token")},e=>{e.stopPropagation(),(0,l.rc)(s,t.vault,"yield_token")})]})}function BVaultCardComming(e){let{symbol:t=""}=e;return(0,a.jsxs)("div",{className:(0,o.cn)("card cursor-pointer !p-0 grid grid-cols-2 overflow-hidden h-[20rem]",{}),children:[(0,a.jsxs)("div",{className:(0,o.cn)(G.bG,"border-b","bg-black/10 dark:bg-white/10 col-span-2 flex-row px-4 md:px-5 py-4 items-center h-20"),children:[(0,a.jsx)(R.c,{symbol:t,size:44}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:" text-lg font-semibold whitespace-nowrap",children:t}),(0,a.jsx)("div",{className:" text-sm font-medium",children:t.includes("-")?"LP Token":""})]}),(0,a.jsxs)("div",{className:"ml-auto",children:[(0,a.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:"Total Value Locked"}),(0,a.jsx)("div",{className:"text-sm font-medium",children:"$-"})]})]}),(0,a.jsx)("div",{className:(0,o.cn)(G.bG,"col-span-2"),children:(0,a.jsx)("div",{className:"text-xs font-semibold leading-[12px] whitespace-nowrap",children:"New Vault Coming Soon..."})})]})}var U=s(19757),M=s(36602),z=s(95499),_=s(83960),Z=s(47259),$=s(61766),K=s(58714),O=s(96670);function PulseTokenItem(){return(0,a.jsxs)("div",{className:"animate-pulse flex px-4 py-2 items-center gap-4 rounded-lg",children:[(0,a.jsx)("div",{className:"rounded-full w-10 h-10 bg-slate-400"}),(0,a.jsx)("div",{className:"w-28 h-5 rounded-lg bg-slate-400"}),(0,a.jsx)("div",{className:"ml-auto w-12 h-5 rounded-lg bg-slate-400"})]})}var H=s(2987),J=s(60689);let Q=[{symbol:"HONEY",name:"HONEY Token",address:"0x0e4aaf1351de4c0264c5c7056ef3777b41bd8e03",decimals:18},{symbol:"USDC",name:"USD Coin",address:"0xd6d83af58a19cd14ef3cf6fe848c9a4d21e5727c",decimals:18},{symbol:"WBERA",name:"BERA Token",address:"0x7507c1dc16935b82698e4c63f2746a2fcf994df8",decimals:18},{symbol:"iBGT",name:"Infrared BGT",address:"0x46eFC86F0D7455F135CC9df501673739d513E982",decimals:18},{symbol:"USDT",name:"Tether USD",address:"0x05D0dD5135E3eF3aDE32a9eF9Cb06e8D37A6795D",decimals:18},{symbol:"DAI",name:"Decentralized USD",address:"0x806Ef538b228844c73E8E692ADCFa8Eb2fCF729c",decimals:18},{symbol:"WBTC",name:"Wrapped Bitcoin",address:"0x2577D24a26f8FA19c1058a8b0106E2c7303454a4",decimals:18},{symbol:"WETH",name:"Wrapped Ether",address:"0xE28AfD8c634946833e89ee3F122C06d7C537E8A8",decimals:18}];function TokenSelect(e){let{tokens:t,onSelect:s,hiddenNative:l}=e,n=(0,m.o)(e=>e.sliceTokenStore.defTokenList),r=(0,j.useMemo)(()=>{let e=f().isEmpty(t)?f().isEmpty(n)?Q:n:t;return l?e.filter(e=>e.address!==T&&e.address!==U.K8):e},[t,n,l]),[i,c]=(0,j.useState)(""),u=(0,M.ln)(),{address:h}=(0,O.m)(),[b,v]=(0,j.useState)(["searchTokens",i,r]);(0,w.Z)(()=>v(["searchTokens",i,r]),300,[i,r]);let{data:g,isFetching:N}=(0,p.a)({initialData:r,queryFn:async()=>{if((0,$.U)(i)){let e=r.find(e=>e.address==i);if(e)return[e];let t=(0,d.B)(),[s,a]=await Promise.all([t.readContract({abi:K.Wo,address:i,functionName:"symbol"}),t.readContract({abi:K.Wo,address:i,functionName:"decimals"})]);return h&&m.w.getState().sliceTokenStore.updateTokensBalance([i],h),[{symbol:s,address:i,decimals:a}]}return i?r.filter(e=>{let t=i.toLowerCase(),s=!!e.symbol.toLowerCase().match(t),a=!!e.name&&!!e.name.toLowerCase().match(t);return s||a}):r},queryKey:b}),y=g||r;return(0,p.a)({queryKey:["updateBalancesForUnknowToken",r],enabled:!!h,queryFn:()=>m.w.getState().sliceTokenStore.updateTokensBalance(r.map(e=>e.address),h)}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-5",children:[(0,a.jsx)("div",{className:"page-sub text-center",children:"Select a token"}),(0,a.jsx)("input",{className:(0,o.cn)("bg-white dark:bg-transparent","border-slate-400  focus:border-primary","w-full h-14 text-right px-4 font-bold text-base border-[#4A5546] border focus:border-2 text-slate-700 rounded-lg outline-none dark:text-slate-50"),placeholder:"Search by name, symbol or address",value:i,onChange:e=>c(e.target.value)}),(0,a.jsx)("div",{className:"flex flex-col overflow-y-auto h-[18.75rem]",children:N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(PulseTokenItem,{}),(0,a.jsx)(PulseTokenItem,{}),(0,a.jsx)(PulseTokenItem,{})]}):(0,a.jsx)(a.Fragment,{children:y.map(e=>(0,a.jsxs)("div",{className:"flex px-4 py-2 items-center gap-4 rounded-lg cursor-pointer hover:bg-primary/20",onClick:()=>{null==s||s(e)},children:[(0,a.jsx)(R.c,{className:"rounded-full",size:40,symbol:e.symbol,url:e.url}),(0,a.jsx)("span",{children:e.symbol}),(0,a.jsx)("span",{className:"ml-auto",children:(0,x.d)(u[e.address],3,e.decimals)})]},e.address))})})]})}function BVaultAddReward(e){let{bvc:t}=e,s=(0,M.ln)(),l=(0,u.nr)(t.vault),r=(0,m.o)(e=>e.sliceTokenStore.defTokenList),i=f().isEmpty(r)?Q[0]:r[0],[c,x]=(0,j.useState)(i),[p,h]=(0,j.useState)(""),b=s[c.address],v=(0,o.su)(p,c.decimals),g=(0,j.useRef)(null),w=(0,B.p)(),{address:N}=(0,O.m)(),{mutate:y,isPending:k}=(0,z.D)({mutationFn:async()=>{if(T)return;let e=(0,d.B)();if(t.isOld){let s=await e.readContract({abi:n.j5,address:t.vault,functionName:"bribeTokens",args:[l.epochCount]});if(console.info("tokens:",s,c.address),!s.find(e=>e.toLowerCase()==c.address.toLowerCase())){let s=await w.data.writeContract({abi:n.j5,address:t.vault,functionName:"addBribeToken",args:[c.address]});await e.waitForTransactionReceipt({hash:s,confirmations:3})}let a=await e.readContract({abi:K.Wo,address:c.address,functionName:"allowance",args:[N,t.vault]});if(a<v){let s=await w.data.writeContract({abi:K.Wo,address:c.address,functionName:"approve",args:[t.vault,v-a]});await e.waitForTransactionReceipt({hash:s,confirmations:3})}let r=await w.data.writeContract({abi:n.j5,address:t.vault,functionName:"addBribes",args:[c.address,v]});await e.waitForTransactionReceipt({hash:r,confirmations:3})}else{let s=await e.readContract({abi:K.Wo,address:c.address,functionName:"allowance",args:[N,t.vault]});if(s<v){let a=await w.data.writeContract({abi:K.Wo,address:c.address,functionName:"approve",args:[t.vault,v-s]});await e.waitForTransactionReceipt({hash:a,confirmations:3})}let a=await w.data.writeContract({abi:n.j5,address:t.vault,functionName:"addAdhocBribes",args:[c.address,v]});await e.waitForTransactionReceipt({hash:a,confirmations:3})}m.w.getState().sliceTokenStore.updateTokensBalance([c.address],N),h(""),Z.A.success("Transaction success")},mutationKey:["addReward"],onError:o.S3}),T=!w.data||!N||0n==v||v>b||k||0n==l.epochCount;return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto mt-8 card",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(C.W,{decimals:c.decimals,asset:c.symbol,assetURL:c.url,balance:s[c.address],amount:p,setAmount:h}),(0,a.jsx)(H.o,{trigger:(0,a.jsxs)("div",{ref:g,className:"absolute left-0 top-0 flex cursor-pointer justify-end items-center py-4",children:[(0,a.jsx)("span",{className:"invisible pl-12",children:c.symbol}),(0,a.jsx)(_.tv1,{className:"ml-2"})]}),children:(0,a.jsx)(TokenSelect,{hiddenNative:!0,onSelect:e=>{var t;x(e),null===(t=g.current)||void 0===t||t.click()}})})]}),(0,a.jsx)(J.k,{busy:k,className:"w-full flex justify-center items-center gap-2",disabled:T,onClick:()=>y(),children:"Add"})]})}var X=s(6868),ee=s(44939),et=s(87031),es=s(31889),ea=s(62600);let el=["redeem","principal_panda","boost_venom"];function BVaultPage(e){var t;let{bvc:s,currentTab:r}=e,{address:c}=(0,O.m)(),x=(0,u.nr)(s.vault);(0,p.a)({queryKey:["UpdateVaultDetails",s,x],queryFn:async()=>0n!=x.epochCount&&(await m.w.getState().sliceBVaultsStore.updateEpoches(s),!0)});let h=(0,u.Zd)(s.vault);(0,p.a)({queryKey:["UpdateUserData",s,h,c],queryFn:async()=>0!=h.length&&!!c&&(console.info("epochesOld:",h),await m.w.getState().sliceUserBVaults.updateEpoches(s,c,h),!0)});let{data:b}=(0,p.a)({queryKey:["checkIsBriber",c,s],queryFn:async()=>{if(!c)return!1;let e=(0,d.B)(),t=await Promise.all([e.readContract({abi:n.j5,address:s.vault,functionName:"isBriber",args:[c]}),e.readContract({abi:n.j5,address:s.vault,functionName:"owner"}).then(e=>e==c)]);return t.includes(!0)}}),f=[{tab:x.closed?"Redeem":"Principal Token",content:x.closed?(0,a.jsx)("div",{className:"max-w-4xl mx-auto pt-8",children:(0,a.jsx)(BVaultRedeem,{bvc:s})}):(0,a.jsx)(BVaultP,{bvc:s})},{tab:"Yield Token",content:(0,a.jsx)(BVaultB,{bvc:s})}],j=b&&i._u?[...f,{tab:"Add Reward",content:(0,a.jsx)(BVaultAddReward,{bvc:s})}]:f,g=null===(t=j.find(e=>(0,o.pi)(e.tab)==r))||void 0===t?void 0:t.tab,w=(0,v.useRouter)();return(0,a.jsx)(L.x,{currentTab:g,onTabChange:e=>(0,l.rc)(w,s.vault,e),listClassName:"flex-wrap p-0 mb-5 md:gap-14",triggerClassName:'text-lg sm:text-xl md:text-2xl py-0 data-[state="active"]:border-b border-b-black dark:border-b-white leading-[0.8] rounded-none whitespace-nowrap',contentClassName:"gap-5",data:j})}function Vaults(){let e=(0,c.p)(),t=(0,j.useMemo)(()=>et.Fw[e].filter(e=>e.onEnv&&e.onEnv.includes(i.Vi)),[e,i.Vi]),s=(0,v.useSearchParams)(),l=s.get("vault"),n=s.get("tab"),r=el.includes(n)?n:"",o=t.find(e=>e.vault==l);return(0,es.Ev)(),(0,a.jsx)(ee.E,{children:(0,a.jsx)("div",{className:"w-full max-w-[1232px] px-4 mx-auto md:pb-8",children:o?(0,a.jsx)(BVaultPage,{bvc:o,currentTab:r}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"page-title",children:"IP-Vaults"}),(0,a.jsx)(X.K,{data:"A Pendle-like Yield Tokenization Protocol Tailored for IP Assets"}),(0,a.jsxs)(ea.r,{numItems:1,numItemsMd:2,numItemsLg:3,className:"gap-5 mt-4",children:[t.map((e,t)=>(0,a.jsx)(BVaultCard,{vc:e},"group_vault_item_".concat(t))),0==t.length&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(BVaultCardComming,{}),(0,a.jsx)(BVaultCardComming,{}),(0,a.jsx)(BVaultCardComming,{})]}),1==t.length&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(BVaultCardComming,{}),(0,a.jsx)(BVaultCardComming,{})]}),2==t.length&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(BVaultCardComming,{})})]})]})})})}},6868:function(e,t,s){s.d(t,{K:function(){return Noti}});var a=s(31113);s(64103);var l=s(63114);function Noti(e){let{data:t}=e;return(0,a.jsxs)("div",{className:"w-full mt-2 mb-3 md:mt-4 md:mb-6 flex text-[24px] md:text-[14px] text-[#64748B] dark:text-slate-50/60 font-medium leading-[24px] md:leading-[14px]",children:[(0,a.jsx)("div",{className:"",children:(0,a.jsx)(l.pMA,{size:20})}),(0,a.jsx)("div",{className:"text-sm ml-1 ",children:t})]})}},75496:function(e,t,s){var a=s(31113),l=s(26361);function DefEmpty(){return(0,a.jsx)("tr",{className:"text-lg font-normal text-center text-black ",children:(0,a.jsx)("td",{colSpan:100,className:"h-[100px] py-5 align-top"})})}s(64103),t.ZP=e=>{let{header:t,data:s,span:n={},empty:r=(0,a.jsx)(DefEmpty,{}),className:i="relative min-w-full bg-transparent ",headerClassName:c,headerItemClassName:o,tbodyClassName:d="",rowClassName:m,rowStyle:u,cellClassName:x,onClickRow:p,onRowMouseHover:h}=e;return(0,a.jsxs)("table",{className:(0,l.cn)("relative min-w-full bg-transparent ",i),children:[(0,a.jsx)("thead",{className:"",children:(0,a.jsx)("tr",{className:(0,l.cn)("text-left whitespace-nowrap font-normal text-black border-b border-gray-100 pt-5 pb-6 dark:text-slate-50 dark:border-zinc-600",c),children:t.map((e,t)=>(0,a.jsx)("th",{colSpan:n[t],scope:"col",className:(0,l.cn)(0==n[t]?"p-0 w-0":"p-3 font-normal text-sm",o),children:e},t))})}),(0,a.jsxs)("tbody",{className:(0,l.cn)(d),children:[s.map((e,s)=>(0,a.jsx)("tr",{onClick:()=>p&&p(s),onMouseEnter:()=>h&&h(s),onMouseLeave:()=>h&&h(-1),style:"function"==typeof u?u(s):u,className:(0,l.cn)("text-slate-700 dark:text-slate-50 font-medium whitespace-nowrap",p?"cursor-pointer hover:bg-slate-400/10":"","function"==typeof m?m(s):m),children:e.map((e,r)=>r>=t.length?(0,a.jsx)(a.Fragment,{children:e}):(0,a.jsx)("td",{colSpan:n[r],className:(0,l.cn)(0==n[r]?"p-0 w-max":"px-3 py-2 text-sm w-max","function"==typeof x?x(s,r):x),children:e},r))},s)),0===s.length&&r]})]})}},54825:function(e,t,s){s.d(t,{r:function(){return Switch}});var a=s(31113),l=s(26361);function Switch(e){return(0,a.jsx)("div",{style:{padding:1,border:"1px solid transparent",backgroundRepeat:"no-repeat",backgroundClip:"padding-box,border-box",backgroundOrigin:"padding-box,border-box",backgroundImage:e.checked?"radial-gradient(#0B1215,#0B1215),radial-gradient(122.5% 122.5% at 52.9% 16.25%, #15D264 0%, #2CBD35 36.26%, #DCF45D 92.54%)":"radial-gradient(#0A1114,#0A1114),radial-gradient(#4A5546,#4A5546)"},className:(0,l.cn)("relative h-[1em] w-[2.5em] cursor-pointer rounded-[0.4em] text-xl"),onClick:()=>{var t;return null===(t=e.onChange)||void 0===t?void 0:t.call(e,!e.checked)},children:(0,a.jsx)("div",{className:(0,l.cn)("transition-all h-full w-[1.5em] absolute top-0 rounded-[0.4em]",e.checked?"-left-[1px]":"left-[1em]"),style:{background:e.checked?"radial-gradient(76.25% 76.25% at 50.3% 23.75%, #1BCD59 0%, #B3E854 100%)":"#3B4144"}})})}},6371:function(e,t,s){s.d(t,{C:function(){return Tip}});var a=s(31113),l=s(26361),n=s(52653),r=s(55966);function Tip(e){let{children:t,node:s,className:i,inFlex:c}=e,o=document.getElementById("tooltip-root");return t?(0,a.jsx)(n.zt,{children:(0,a.jsxs)(n.fC,{children:[(0,a.jsx)(n.xz,{asChild:!0,onClickCapture:e=>{e.preventDefault(),e.stopPropagation()},children:s?(0,a.jsx)("div",{className:(0,l.cn)("inline-block cursor-default",i),style:{verticalAlign:"text-bottom"},children:s}):(0,a.jsx)("div",{className:(0,l.cn)(c?"flex":"translate-y-[-6%] inline-block"," px-[3px] cursor-default relative",i),children:(0,a.jsx)(r.apP,{className:"inline-block stroke-slate-500"})})}),(0,a.jsx)(n.h_,{container:o,children:(0,a.jsxs)(n.VY,{className:"max-w-xs text-sm text-white bg-slate-900 shadow-lg dark:bg-[#333333] rounded-md p-4",children:[t,(0,a.jsx)(n.Eh,{})]})})]})}):s}},32036:function(e,t,s){s.d(t,{BW:function(){return renderToken},Sn:function(){return renderChoseSide},bG:function(){return c},yP:function(){return renderStat}});var a=s(31113),l=s(26361),n=s(84944),r=s(99971),i=s(60689);let c="py-5 flex flex-col items-center gap-2 relative dark:border-border border-solid",renderToken=function(e,t,s){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,a.jsx)("div",{className:(0,l.cn)(c,"border-b",{"border-l":i}),children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap flex gap-2 items-center",children:[(0,a.jsx)(r.c,{symbol:e,size:14}),e]}),(0,a.jsxs)("div",{className:"flex mt-2 flex-col gap-1 pl-[1.375rem] text-xs font-medium",children:[(0,a.jsx)("span",{className:"",children:(0,n.d)(t)}),(0,a.jsx)("span",{className:" text-[#64748B] dark:text-slate-50/60",children:"$".concat((0,n.d)(s,2))})]})]})})},renderStat=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,a.jsx)("div",{className:(0,l.cn)(c,"border-b pb-10",{"border-l":n}),children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap text-center",children:e}),(0,a.jsxs)("div",{className:"flex mt-2 items-center gap-2 text-sm font-medium",children:[(0,a.jsx)(r.c,{symbol:t,size:14}),"string"==typeof s?(0,a.jsx)("span",{children:s}):s]})]})})},BtnWrap=e=>{let{children:t,onClick:s,...l}=e;return e.onClick?(0,a.jsx)(i.k,{hiddenBorder:!0,...l,onClick:s,children:t}):(0,a.jsx)("div",{...l,onClick:s,children:t})},renderChoseSide=(e,t,s,n,i,o,d,m)=>(0,a.jsxs)("div",{className:(0,l.cn)(c,"col-span-2 gap-4"),children:[(0,a.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:"Choose your side"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 w-full px-4",children:[(0,a.jsx)(BtnWrap,{className:(0,l.cn)("h-[4.25rem] w-full relative"),onClick:d,children:(0,a.jsxs)("div",{className:"flex gap-2 items-center p-4 w-full h-[4.25rem] absolute left-0 top-0",children:[(0,a.jsx)(r.c,{symbol:e,size:36}),(0,a.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,a.jsx)("div",{className:"text-white/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:t}),(0,a.jsx)("span",{className:" text-[14px] leading-[14px] font-medium",children:s})]})]})}),(0,a.jsx)(BtnWrap,{className:(0,l.cn)("h-[4.25rem] w-full relative"),onClick:m,children:(0,a.jsxs)("div",{className:"flex flex-row-reverse gap-2 items-center p-4 w-full h-[4.25rem] absolute left-0 top-0",children:[(0,a.jsx)(r.c,{symbol:n,size:36}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,a.jsx)("div",{className:"text-white text-xs font-semibold leading-[12px] whitespace-nowrap",children:i}),(0,a.jsx)("span",{className:" text-[14px] leading-[14px] font-medium",children:o})]})]})})]})]})},18358:function(e,t,s){s.d(t,{R3:function(){return useUpBVaultForUserAction},Vw:function(){return useEpochesData},Zd:function(){return useBVaultEpoches},d6:function(){return useResetBVaultsData},gz:function(){return useCalcClaimable},lL:function(){return calcBVaultPTApy},nr:function(){return useBVault},oU:function(){return useBVaultApy},pg:function(){return calcBVaultBoost},v7:function(){return useBVaultBoost}});var a=s(22139),l=s(59175),n=s(26361),r=s(84944),i=s(83978),c=s.n(i),o=s(64103),d=s(96670),m=s(55349);function useResetBVaultsData(){let e=(0,l.p)(),{address:t}=(0,d.m)();(0,o.useEffect)(()=>{},[e]),(0,o.useEffect)(()=>{m.w.getState().sliceUserBVaults.reset()},[t])}function useBVault(e){return(0,m.o)(t=>t.sliceBVaultsStore.bvaults[e]||(0,n.Yb)({current:(0,n.Yb)({},0n)},0n),["sliceBVaultsStore.bvaults.".concat(e)])}function useBVaultEpoches(e){return(0,m.o)(t=>{let s=t.sliceBVaultsStore.bvaults[e];if(!s||s.epochCount<=0n)return[];let a=c().range(1,parseInt((s.epochCount+1n).toString())).reverse(),l=t.sliceBVaultsStore.epoches;return a.map(t=>l["".concat(e,"_").concat(t)]).filter(e=>null!=e)},["sliceBVaultsStore.bvaults.".concat(e),"sliceBVaultsStore.epoches"])}function useEpochesData(e){let t=useBVaultEpoches(e),s=(0,m.o)(t=>t.sliceUserBVaults.epoches[e]||[],["sliceUserBVaults.epoches.".concat(e)]);return(0,o.useMemo)(()=>{let e=s.reduce((e,t)=>({...e,[t.epochId.toString()]:t}),{});return t.map(t=>(0,n.Yb)({...t,...e[t.epochId.toString()]||{bribes:[],sBribes:[],aBribes:[]}},0n))},[t,s])}function useCalcClaimable(e){let t=useEpochesData(e);return(0,o.useMemo)(()=>{let e=t.filter(e=>e.claimableAssetBalance&&e.settled);return{ids:e.map(e=>e.epochId),claimable:e.reduce((e,t)=>e+t.claimableAssetBalance,0n)}},[t])}function calcBVaultBoost(e){let t=m.w.getState(),s=t.sliceBVaultsStore.bvaults[e],l=(null==s?void 0:s.current.vaultYTokenBalance)||0n,n=(null==s?void 0:s.Y)||0n,i=n>0n?l*a.Pq/n:0n,c=(null==s?void 0:s.current.yTokenAmountForSwapYT)||0n,o=(null==s?void 0:s.lockedAssetTotal)||0n,d=c>0n?o*a.Pq/c:0n;return console.info("calcBootst:",(0,r.d)(i),(0,r.d)(d)),i}function useBVaultBoost(e){let t=(0,m.o)(()=>calcBVaultBoost(e),["sliceBVaultsStore.bvaults.".concat(e)]);return[(0,r.d)(t,0),t]}function calcBVaultPTApy(e){let t=m.w.getState(),s=t.sliceBVaultsStore.bvaults[e],l=(0,n.ok)(t.sliceBVaultsStore.yTokenSythetic,[e]),r=s&&s.current.assetTotalSwapAmount&&l?s.current.assetTotalSwapAmount*a.SH*BigInt(1e10)/l:0n;return r}function useBVaultApy(e){let t=(0,m.o)(()=>calcBVaultPTApy(e),["sliceBVaultsStore.bvaults.".concat(e),"sliceBVaultsStore.yTokenSythetic.".concat(e)]);return[(0,n.Jh)(t,10),t]}function useUpBVaultForUserAction(e,t){let{address:s}=(0,d.m)();return()=>{(0,n.XD)(async()=>{if(null==t||t(),!s)return;await Promise.all([m.w.getState().sliceTokenStore.updateTokensBalance([e.asset,e.pToken],s),m.w.getState().sliceTokenStore.updateTokenTotalSupply([e.asset,e.pToken]),m.w.getState().sliceBVaultsStore.updateBvaults([e]),m.w.getState().sliceBVaultsStore.updateYTokenSythetic([e])]);let a=m.w.getState().sliceBVaultsStore.bvaults[e.vault];await m.w.getState().sliceBVaultsStore.updateEpoches(e,a.epochCount>1n?[a.epochCount,a.epochCount-1n]:[a.epochCount]);let l=[];for(let t=parseInt(a.epochCount.toString());t>0;t--){let s=m.w.getState().sliceBVaultsStore.epoches["".concat(e.vault,"_").concat(t)];l.push(s)}console.info("onUserAction:epoches",l),await m.w.getState().sliceUserBVaults.updateEpoches(e,s,l)},3,1e3)}}}}]);