"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4090],{59781:function(e,t,a){a.d(t,{kQ:function(){return toLVault},p2:function(){return toLntVault},rc:function(){return toBVault}});var s=a(63126);function toBVault(e,t,a,n){if(!t)return e.push("/ip-vaults");let l="/ip-vaults?vault=".concat(t);a&&(l+="&tab=".concat((0,s.pi)(a))),n&&(l+="&subtab=".concat((0,s.pi)(n))),e.push(l)}function toLVault(e,t,a){if(!t)return e.push("/l-vaults");let n="/l-vaults?vault=".concat(t);a&&(n+="&tab=".concat((0,s.pi)(a))),e.push(n)}function toLntVault(e,t,a){if(!t)return e.push("/lnt-vaults");let n="/lnt-vaults?vault=".concat(t);a&&(n+="&tab=".concat((0,s.pi)(a))),e.push(n)}},6371:function(e,t,a){a.d(t,{C:function(){return Tip}});var s=a(31113),n=a(63126),l=a(52653),o=a(55966);function Tip(e){let{children:t,node:a,className:r,inFlex:u,contentClassName:c}=e,i=document.getElementById("tooltip-root");return t?(0,s.jsx)(l.zt,{children:(0,s.jsxs)(l.fC,{children:[(0,s.jsx)(l.xz,{asChild:!0,onClickCapture:e=>{e.preventDefault(),e.stopPropagation()},children:a?(0,s.jsx)("div",{className:(0,n.cn)("inline-block cursor-default",r),style:{verticalAlign:"text-bottom"},children:a}):(0,s.jsx)("div",{className:(0,n.cn)(u?"flex":"translate-y-[-6%] inline-block"," px-[3px] cursor-default relative",r),children:(0,s.jsx)(o.apP,{className:"inline-block stroke-slate-500"})})}),(0,s.jsx)(l.h_,{container:i,children:(0,s.jsxs)(l.VY,{className:(0,n.cn)("max-w-xs text-sm text-white bg-slate-900 shadow-lg dark:bg-[#333333] rounded-md p-4",c),children:[t,(0,s.jsx)(l.Eh,{})]})})]})}):a}},32036:function(e,t,a){a.d(t,{BW:function(){return renderToken},Sn:function(){return renderChoseSide},bG:function(){return u},yP:function(){return renderStat}});var s=a(31113),n=a(63126),l=a(84944),o=a(99971),r=a(60689);let u="py-5 flex flex-col items-center gap-2 relative dark:border-border border-solid",renderToken=function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,s.jsx)("div",{className:(0,n.cn)(u,"border-b",{"border-l":r}),children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap flex gap-2 items-center",children:[(0,s.jsx)(o.c,{symbol:e,size:14}),e]}),(0,s.jsxs)("div",{className:"flex mt-2 flex-col gap-1 pl-[1.375rem] text-xs font-medium",children:[(0,s.jsx)("span",{className:"",children:(0,l.d)(t)}),(0,s.jsx)("span",{className:" text-[#64748B] dark:text-slate-50/60",children:"$".concat((0,l.d)(a,2))})]})]})})},renderStat=function(e,t,a){let l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,s.jsx)("div",{className:(0,n.cn)(u,"border-b pb-10",{"border-l":l}),children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap text-center",children:e}),(0,s.jsxs)("div",{className:"flex mt-2 items-center gap-2 text-sm font-medium",children:[(0,s.jsx)(o.c,{symbol:t,size:14}),"string"==typeof a?(0,s.jsx)("span",{children:a}):a]})]})})},BtnWrap=e=>{let{children:t,onClick:a,...n}=e;return e.onClick?(0,s.jsx)(r.k6,{hiddenBorder:!0,...n,onClick:a,children:t}):(0,s.jsx)("div",{...n,onClick:a,children:t})},renderChoseSide=(e,t,a,l,r,c,i,d)=>(0,s.jsxs)("div",{className:(0,n.cn)(u,"col-span-2 gap-4"),children:[(0,s.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:"Choose your side"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 w-full px-4",children:[(0,s.jsx)(BtnWrap,{className:(0,n.cn)("h-[4.25rem] w-full relative"),onClick:i,children:(0,s.jsxs)("div",{className:"flex gap-2 items-center p-4 w-full h-[4.25rem] absolute left-0 top-0",children:[(0,s.jsx)(o.c,{symbol:e,size:36}),(0,s.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,s.jsx)("div",{className:"text-white/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:t}),(0,s.jsx)("span",{className:" text-[14px] leading-[14px] font-medium",children:a})]})]})}),(0,s.jsx)(BtnWrap,{className:(0,n.cn)("h-[4.25rem] w-full relative"),onClick:d,children:(0,s.jsxs)("div",{className:"flex flex-row-reverse gap-2 items-center p-4 w-full h-[4.25rem] absolute left-0 top-0",children:[(0,s.jsx)(o.c,{symbol:l,size:36}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,s.jsx)("div",{className:"text-white/60 text-xs font-semibold leading-[12px] whitespace-nowrap",children:r}),(0,s.jsx)("span",{className:" text-[14px] leading-[14px] font-medium",children:c})]})]})})]})]})},95889:function(e,t,a){a.d(t,{EI:function(){return n},f_:function(){return o}});var s=a(51186);let n=3,l={[s.F.id]:"0x31C410AEF663FEbDD7A2F1cCF0a4487CDcD56fdA"},o={[s.F.id]:[{vault:"0xEF14D1D8128f496f798f6721713D41070F17A727",asset:"0x2020cAB606cF79169A0f3F6Eb3E710326C4a4C1B",assetName:"Era NFT",assetSymbol:"ERA",assetLogo:"",vestingToken:"0xa10519209B4F6c8Ec22Fda6733a103D3e24F4C39",vestingSymbol:"MkRC20",vestingDecimals:18,vToken:"0x0A126144121Db990a066d63b02589D68104909cF",vTokenSymbol:"vERA",yTokenSymbol:"yERA",protocolAddress:"0x896774931349919B71Ec251CCbA1C6AB1FEb45C4",protocolSettingsAddress:"0xD91C388453042a2214Ad085df76A9E08Bc701f23",queryAddres:l[s.F.id],nftStakingPool:"0x73FA161A679020872356Eea8B6648F3D026228D1",onEnv:["betalnt"]}]}},31889:function(e,t,a){a.d(t,{Ev:function(){return useLoadBVaults},a1:function(){return useLoadLVaults},g2:function(){return useLoadUserBVaults},tK:function(){return useLoadLntVaults},z2:function(){return useLoadUserLVaults}});var s=a(87031),n=a(19757),l=a(22139),o=a(8298),r=a(64370),u=a(83978),c=a.n(u),i=a(64103),d=a(96670),p=a(59175),f=a(95889);function useLoadLVaults(){let e=(0,p.p)(),t=n.iK[e]||[],{address:a}=(0,d.m)(),s=(0,i.useMemo)(()=>c().chain(n.iK[e]||[]).map(e=>[e.assetTokenAddress,e.xTokenAddress]).flatten().concat([n.O1[e]]).union().value(),[e]);(0,r.a)({queryKey:["UpdateLvautlsTokens",s],queryFn:async()=>(await o.w.getState().sliceTokenStore.updateTokenTotalSupply(s),!0)}),(0,r.a)({queryKey:["UpdateUserLvautlsTokens",s,a],queryFn:async()=>!!a&&(await o.w.getState().sliceTokenStore.updateTokensBalance(s,a),!0)}),(0,r.a)({queryKey:["UpdateLVautls",t],queryFn:async()=>(await o.w.getState().sliceLVaultsStore.updateLVaults(t),!0)})}function useLoadBVaults(){let e=(0,p.p)(),t=(0,i.useMemo)(()=>s.Fw[e].filter(e=>(e.onEnv||[]).includes(l.Vi)),[e,l.Vi]);(0,r.a)({queryKey:["UpdateBVaults",t],queryFn:async()=>(await Promise.all([o.w.getState().sliceBVaultsStore.updateBvaults(t),o.w.getState().sliceBVaultsStore.updateYTokenSythetic(t)]),!0)});let{address:a}=(0,d.m)(),n=(0,i.useMemo)(()=>t.map(e=>[e.asset,e.pToken]).flat().reduce((e,t)=>e.includes(t)?e:[...e,t],[]),[t]);(0,r.a)({queryKey:["UpdateBvautlsTokens",n],queryFn:async()=>(await Promise.all([o.w.getState().sliceTokenStore.updateTokenTotalSupply(n),o.w.getState().sliceTokenStore.updateTokenPrices(n)]),!0),throwOnError:(e,t)=>(console.error(e),!1)}),(0,r.a)({queryKey:["UpdateUserBvautlsTokens",n,a],queryFn:async()=>!!a&&(await o.w.getState().sliceTokenStore.updateTokensBalance(n,a),!0)})}function useLoadLntVaults(){let e=(0,p.p)(),t=(0,i.useMemo)(()=>{var t;return(null===(t=f.f_[e])||void 0===t?void 0:t.filter(e=>(e.onEnv||[]).includes(l.Vi)))||[]},[e,l.Vi]);(0,r.a)({queryKey:["UpdateLntVaults",t],queryFn:async()=>(await o.w.getState().sliceLntVaultsStore.updateLntVaults(t),!0)});let{address:a}=(0,d.m)(),s=(0,i.useMemo)(()=>t.map(e=>[e.vestingToken,e.vToken]).flat().reduce((e,t)=>e.includes(t)?e:[...e,t],[]),[t]);(0,r.a)({queryKey:["UpdateLntvautlsTokens",s],queryFn:async()=>(await o.w.getState().sliceTokenStore.updateTokenTotalSupply(s),await o.w.getState().sliceTokenStore.updateTokenPrices(s),!0),throwOnError:(e,t)=>(console.error(e),!1)}),(0,r.a)({queryKey:["UpdateUserLntvautlsTokens",s,a],queryFn:async()=>!!a&&(await o.w.getState().sliceTokenStore.updateTokensBalance(s,a),!0)})}function useLoadUserLVaults(){let{address:e}=(0,d.m)(),t=(0,p.p)(),a=n.iK[t]||[];(0,r.a)({queryKey:["UpdateAllUserLVaults",t,e,a],queryFn:async()=>!!e&&(await Promise.all(a.map(t=>o.w.getState().sliceLVaultsStore.updateUserLVault(t,e))),!0)})}function useLoadUserBVaults(){let{address:e}=(0,d.m)(),t=(0,p.p)(),a=(0,i.useMemo)(()=>s.Fw[t].filter(e=>(e.onEnv||[]).includes(l.Vi)),[t,l.Vi]),n=(0,o.o)(e=>c().keys(e.sliceBVaultsStore.bvaults).toString(),["sliceBVaultsStore.bvaults"]);(0,r.a)({queryKey:["UpdateAllUserBvaults",a,t,e,n],queryFn:async()=>{if(!e)return!1;let t=o.w.getState().sliceBVaultsStore.bvaults;for(let e of a)if(!t[e.vault])return!1;await Promise.all(a.map(e=>o.w.getState().sliceBVaultsStore.updateEpoches(e)));let getEpochesParams=e=>{let t=o.w.getState().sliceBVaultsStore.bvaults[e.vault],a=[];for(let s=parseInt(t.epochCount.toString());s>0;s--){let t=o.w.getState().sliceBVaultsStore.epoches["".concat(e.vault,"_").concat(s)];a.push(t)}return a};return await Promise.all(a.map(t=>o.w.getState().sliceUserBVaults.updateEpoches(t,e,getEpochesParams(t)))),!0}})}},18358:function(e,t,a){a.d(t,{R3:function(){return useUpBVaultForUserAction},Vw:function(){return useEpochesData},Zd:function(){return useBVaultEpoches},d6:function(){return useResetBVaultsData},gz:function(){return useCalcClaimable},lL:function(){return calcBVaultPTApy},nr:function(){return useBVault},oU:function(){return useBVaultApy},v7:function(){return useBVaultBoost}});var s=a(22139),n=a(59175),l=a(63126),o=a(84944),r=a(83978),u=a.n(r),c=a(64103),i=a(96670),d=a(8298);function useResetBVaultsData(){let e=(0,n.p)(),{address:t}=(0,i.m)();(0,c.useEffect)(()=>{},[e]),(0,c.useEffect)(()=>{d.w.getState().sliceUserBVaults.reset()},[t])}function useBVault(e){return(0,d.o)(t=>t.sliceBVaultsStore.bvaults[e]||(0,l.Yb)({current:(0,l.Yb)({},0n)},0n),["sliceBVaultsStore.bvaults.".concat(e)])}function useBVaultEpoches(e){return(0,d.o)(t=>{let a=t.sliceBVaultsStore.bvaults[e];if(!a||a.epochCount<=0n)return[];let s=u().range(1,parseInt((a.epochCount+1n).toString())).reverse(),n=t.sliceBVaultsStore.epoches;return s.map(t=>n["".concat(e,"_").concat(t)]).filter(e=>null!=e)},["sliceBVaultsStore.bvaults.".concat(e),"sliceBVaultsStore.epoches"])}function useEpochesData(e){let t=useBVaultEpoches(e),a=(0,d.o)(t=>t.sliceUserBVaults.epoches[e]||[],["sliceUserBVaults.epoches.".concat(e)]);return(0,c.useMemo)(()=>{let e=a.reduce((e,t)=>({...e,[t.epochId.toString()]:t}),{});return t.map(t=>(0,l.Yb)({...t,...e[t.epochId.toString()]||{bribes:[],sBribes:[],aBribes:[]}},0n))},[t,a])}function useCalcClaimable(e){let t=useEpochesData(e);return(0,c.useMemo)(()=>{let e=t.filter(e=>e.claimableAssetBalance&&e.settled);return{ids:e.map(e=>e.epochId),claimable:e.reduce((e,t)=>e+t.claimableAssetBalance,0n)}},[t])}function useBVaultBoost(e){let t=(0,d.o)(()=>(function(e){let t=d.w.getState(),a=t.sliceBVaultsStore.bvaults[e],n=(null==a?void 0:a.current.vaultYTokenBalance)||0n,l=(null==a?void 0:a.Y)||0n,r=l>0n?n*s.Pq/l:0n,u=(null==a?void 0:a.current.yTokenAmountForSwapYT)||0n,c=(null==a?void 0:a.lockedAssetTotal)||0n,i=u>0n?c*s.Pq/u:0n;return console.info("calcBootst:",(0,o.d)(r),(0,o.d)(i)),s.Pq,r})(e),["sliceBVaultsStore.bvaults.".concat(e)]);return[(0,o.d)(t,0),t]}function calcBVaultPTApy(e){let t=d.w.getState(),a=t.sliceBVaultsStore.bvaults[e.vault],n=(0,l.ok)(t.sliceBVaultsStore.yTokenSythetic,[e.vault]),o=0n;return o=e.pTokenV2?a&&a.ptRebaseRate&&a.pTokenTotal?a.ptRebaseRate/s.Pq*s.SH*BigInt(1e10)/a.pTokenTotal/s.Pq:0n:a&&a.current.assetTotalSwapAmount&&n?a.current.assetTotalSwapAmount*s.SH*BigInt(1e10)/n:0n,console.info("apy:",e.vault,o,e.pTokenV2,null==a?void 0:a.ptRebaseRate,null==a?void 0:a.pTokenTotal),o}function useBVaultApy(e){let t=(0,d.o)(()=>calcBVaultPTApy(e),["sliceBVaultsStore.bvaults.".concat(e.vault),"sliceBVaultsStore.yTokenSythetic.".concat(e.vault)]);return[(0,l.Jh)(t,10),t]}function useUpBVaultForUserAction(e,t){let{address:a}=(0,i.m)();return()=>{(0,l.XD)(async()=>{if(null==t||t(),!a)return;await Promise.all([d.w.getState().sliceTokenStore.updateTokensBalance([e.asset,e.pToken],a),d.w.getState().sliceTokenStore.updateTokenTotalSupply([e.asset,e.pToken]),d.w.getState().sliceBVaultsStore.updateBvaults([e]),d.w.getState().sliceBVaultsStore.updateYTokenSythetic([e])]);let s=d.w.getState().sliceBVaultsStore.bvaults[e.vault];await d.w.getState().sliceBVaultsStore.updateEpoches(e,s.epochCount>1n?[s.epochCount,s.epochCount-1n]:[s.epochCount]);let n=[];for(let t=parseInt(s.epochCount.toString());t>0;t--){let a=d.w.getState().sliceBVaultsStore.epoches["".concat(e.vault,"_").concat(t)];n.push(a)}console.info("onUserAction:epoches",n),await d.w.getState().sliceUserBVaults.updateEpoches(e,a,n)},3,1e3)}}}}]);